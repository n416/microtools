import{D as e,E as t,F as n,b as r}from"./Header-CUnFWtwv.js";import{Bt as i,Dt as a,It as o,ct as s,gt as c,ht as l,nt as u,rt as d,tt as f}from"./index-D9m0Yf2z.js";function p(e){return c(`PrivateSwitchBase`,e)}l(`PrivateSwitchBase`,[`root`,`checked`,`disabled`,`input`,`edgeStart`,`edgeEnd`]);var m=i(o()),h=i(a()),g=e=>{let{classes:t,checked:n,disabled:r,edge:i}=e,a={root:[`root`,n&&`checked`,r&&`disabled`,i&&`edge${f(i)}`],input:[`input`]};return s(a,p,t)},_=u(t,{name:`MuiSwitchBase`})({padding:9,borderRadius:`50%`,variants:[{props:{edge:`start`,size:`small`},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e===`start`&&t.size!==`small`,style:{marginLeft:-12}},{props:{edge:`end`,size:`small`},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e===`end`&&t.size!==`small`,style:{marginRight:-12}}]}),v=u(`input`,{name:`MuiSwitchBase`,shouldForwardProp:d})({cursor:`inherit`,position:`absolute`,opacity:0,width:`100%`,height:`100%`,top:0,left:0,margin:0,padding:0,zIndex:1}),y=m.forwardRef(function(t,i){let{autoFocus:a,checked:o,checkedIcon:s,defaultChecked:c,disabled:l,disableFocusRipple:u=!1,edge:d=!1,icon:f,id:p,inputProps:m,inputRef:y,name:b,onBlur:x,onChange:S,onFocus:C,readOnly:w,required:T=!1,tabIndex:E,type:D,value:O,slots:k={},slotProps:A={},...j}=t,[M,N]=n({controlled:o,default:!!c,name:`SwitchBase`,state:`checked`}),P=r(),F=e=>{C&&C(e),P&&P.onFocus&&P.onFocus(e)},I=e=>{x&&x(e),P&&P.onBlur&&P.onBlur(e)},L=e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;N(t),S&&S(e,t)},R=l;P&&R===void 0&&(R=P.disabled);let z=D===`checkbox`||D===`radio`,B={...t,checked:M,disabled:R,disableFocusRipple:u,edge:d},V=g(B),H={slots:k,slotProps:{input:m,...A}},[U,W]=e(`root`,{ref:i,elementType:_,className:V.root,shouldForwardComponentProp:!0,externalForwardedProps:{...H,component:`span`,...j},getSlotProps:e=>({...e,onFocus:t=>{e.onFocus?.(t),F(t)},onBlur:t=>{e.onBlur?.(t),I(t)}}),ownerState:B,additionalProps:{centerRipple:!0,focusRipple:!u,disabled:R,role:void 0,tabIndex:null}}),[G,K]=e(`input`,{ref:y,elementType:v,className:V.input,externalForwardedProps:H,getSlotProps:e=>({...e,onChange:t=>{e.onChange?.(t),L(t)}}),ownerState:B,additionalProps:{autoFocus:a,checked:o,defaultChecked:c,disabled:R,id:z?p:void 0,name:b,readOnly:w,required:T,tabIndex:E,type:D,...D===`checkbox`&&O===void 0?{}:{value:O}}});return(0,h.jsxs)(U,{...W,children:[(0,h.jsx)(G,{...K}),M?s:f]})});function b(e){return c(`MuiListItemIcon`,e)}var x=l(`MuiListItemIcon`,[`root`,`alignItemsFlexStart`]),S=class{#geminiApiKey=null;#isKeyValid=!1;#modelId=null;#baseUrl=`https://generativelanguage.googleapis.com/v1beta/models`;constructor(){try{let e=localStorage.getItem(`geminiApiKey`);e?(this.#geminiApiKey=e,this.#isKeyValid=!0):this.#isKeyValid=!1,this.#modelId=localStorage.getItem(`geminiModelId`)}catch(e){console.error(`Failed to access localStorage:`,e),this.#isKeyValid=!1}}get isAvailable(){return this.#isKeyValid&&!!this.#modelId}static async listAvailableModels(e){if(!e)throw Error(`APIキーがありません。`);let t=`https://generativelanguage.googleapis.com/v1beta/models?key=${e}`,n=await fetch(t),r=await n.json();if(!n.ok){let e=r?.error?.message||`不明なエラー`;throw Error(`モデルリストの取得に失敗しました (${n.status}): ${e}`)}return r.models}async generateContent(e){if(!this.isAvailable)throw Error(`Gemini APIキーまたはモデルIDが設定されていません。`);let t=this.#modelId.startsWith(`models/`)?this.#modelId.split(`/`)[1]:this.#modelId,n=`${this.#baseUrl}/${t}:generateContent?key=${this.#geminiApiKey}`,r={contents:[{parts:[{text:e}]}],safetySettings:[{category:`HARM_CATEGORY_HARASSMENT`,threshold:`BLOCK_NONE`},{category:`HARM_CATEGORY_HATE_SPEECH`,threshold:`BLOCK_NONE`},{category:`HARM_CATEGORY_SEXUALLY_EXPLICIT`,threshold:`BLOCK_NONE`},{category:`HARM_CATEGORY_DANGEROUS_CONTENT`,threshold:`BLOCK_NONE`}]},i=await fetch(n,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify(r)}),a=await i.json();if(!i.ok){let e=a?.error?.message||`不明なエラー`;throw Error(`APIリクエストに失敗しました (${i.status}): ${e}`)}if(!a.candidates?.[0]?.content?.parts?.[0]?.text){if(a.candidates?.[0]?.finishReason===`SAFETY`)throw Error(`AIから有効な応答が得られませんでした。理由: 安全性設定によりブロックされました。`);let e=a.promptFeedback?.blockReason||a.candidates?.[0]?.finishReason||`不明`;throw Error(`AIから有効な応答が得られませんでした。理由: ${e}`)}return a.candidates[0].content.parts[0].text}};export{y as i,b as n,x as r,S as t};