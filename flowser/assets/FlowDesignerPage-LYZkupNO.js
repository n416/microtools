import{n as e,t}from"./geminiApiClient-BU-pSX4n.js";import{I as n,T as r,b as i,bt as a,gt as o,h as s,k as c,p as l,t as u,w as d,yt as f}from"./index-CV6wLZeq.js";var p=a(f()),m=a(o()),h=[{id:`K001`,text:`新車販売の契約には「注文書」と「売買契約書」が必要。`},{id:`K002`,text:`中古車買取の契約には「車両譲渡契約書」が必要。`},{id:`K003`,text:`車両登録には顧客の「印鑑証明書」と「委任状」が必須。`},{id:`K004`,text:`普通自動車（8ナンバー）の登録には「車庫証明書」が必要。`},{id:`K005`,text:`軽自動車（4ナンバー・8ナンバー）の登録では、地域により「車庫証明書」が不要な場合がある。`},{id:`K006`,text:`オートローンを利用する顧客には、信販会社への「ローン申込書」の記入を案内する。`},{id:`K007`,text:`買取車両の査定時には「自動車検査証（車検証）」と「自賠責保険証明書」の原本を確認する。`},{id:`K008`,text:`下取り車両がある場合、自動車税の「納税証明書」も必要となる。`},{id:`K101`,text:`キャブコンはトラックベースで居住空間が広いが、車高が高く運転に注意が必要。ファミリー層に人気。`},{id:`K102`,text:`バンコンはハイエースなどがベースで普段使いしやすいが、室内高が低いモデルが多い。二人旅や夫婦向け。`},{id:`K103`,text:`バスコンはマイクロバスがベースで最も広く豪華だが、価格と維持費が高い。`},{id:`K104`,text:`軽キャンパーは軽自動車ベースで維持費が安いが、就寝定員は1〜2名が限界。`},{id:`K105`,text:`ベース車両にはトヨタ、日産、マツダ、いすゞなどがあり、駆動方式（2WD/4WD）やエンジン（ガソリン/ディーゼル）も選択肢となる。`},{id:`K201`,text:`サブバッテリーはエンジン停止中に電装品を使うための必須装備。容量（Ah）が大きいほど長時間使える。`},{id:`K202`,text:`ソーラーパネルはサブバッテリーを補助充電するための人気オプション。長期旅行や災害時に有効。`},{id:`K203`,text:`FFヒーターはエンジン停止中に車内を暖めるための装備。特に寒冷地での利用や冬場の車中泊には必須。`},{id:`K204`,text:`家庭用エアコンは快適性が非常に高いが、大容量のサブバッテリーや外部電源接続がほぼ必須となる。`},{id:`K205`,text:`トイレには、本格的な「カセットトイレ」と簡易的な「ポータブルトイレ」の2種類がある。`},{id:`K206`,text:`冷蔵庫は、省電力なDC12V専用モデルが主流。`},{id:`K207`,text:`サイドオーニング（日除け）は、屋外での滞在を快適にするための定番オプション。`},{id:`K301`,text:`最初の接客では、まず顧客の利用目的（旅行、趣味、防災など）、利用人数、予算をヒアリングすることが最重要。`},{id:`K302`,text:`見積書には、車両本体価格の他に、法定費用（税金・自賠責）、登録諸費用、納車準備費用、希望オプション費用を明記する。`},{id:`K303`,text:`納期はベース車両の在庫や架装（カスタム製作）の状況により大きく変動するため、契約前に必ず目安を伝える。`},{id:`K304`,text:`納車時には、車両の運転操作だけでなく、給排水の方法、電装品の操作方法、ガスの取り扱いなどを1時間以上かけて丁寧に説明する。`},{id:`K305`,text:`重大なクレーム（雨漏り、電装系の不動など）には、最優先で対応し、迅速な車両引き取りと原因調査を行う。`},{id:`K306`,text:`中古車の査定では、内外装の傷や汚れ、装備品の動作確認、事故歴の有無をチェックシートに基づいて行う。`}];function g(){let a=l(),[o,f]=(0,p.useState)([]),[g,_]=(0,p.useState)(``),[v,y]=(0,p.useState)(``),[b,x]=(0,p.useState)([]),[S,C]=(0,p.useState)(!1),[w,T]=(0,p.useState)(``);return(0,p.useEffect)(()=>{let e=JSON.parse(localStorage.getItem(`knowledgeBase`))||h;f(e)},[]),(0,m.jsxs)(r,{sx:{display:`flex`,flexDirection:`column`,height:`100vh`,bgcolor:`background.default`},children:[(0,m.jsx)(r,{sx:{p:`0 24px`},children:(0,m.jsx)(e,{isLocked:!1})}),(0,m.jsx)(r,{sx:{flexGrow:1,p:`0 24px 24px 24px`,display:`flex`,gap:2,minHeight:0},children:(0,m.jsxs)(i,{container:!0,spacing:2,children:[(0,m.jsx)(i,{item:!0,xs:12,md:5,children:(0,m.jsxs)(n,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,m.jsx)(c,{variant:`h6`,gutterBottom:!0,children:`① 知識ベース`}),(0,m.jsx)(s,{label:`新しい知識`,multiline:!0,rows:4,variant:`outlined`,fullWidth:!0,value:g,onChange:e=>_(e.target.value),placeholder:`例: 普通自動車の契約には印鑑証明書が必要`,sx:{mb:1}}),(0,m.jsx)(d,{variant:`contained`,onClick:()=>{if(g.trim()){let e=o.length>0?Math.max(...o.map(e=>parseInt(e.id.substring(1))))+1:1,t={id:`K${String(e).padStart(3,`0`)}`,text:g.trim()},n=[...o,t];f(n),localStorage.setItem(`knowledgeBase`,JSON.stringify(n)),_(``)}},sx:{mb:2},children:`知識を登録`}),(0,m.jsx)(r,{sx:{overflow:`auto`,flexGrow:1},children:o.map(e=>(0,m.jsxs)(n,{variant:`outlined`,sx:{p:1,mb:1},children:[(0,m.jsx)(c,{variant:`caption`,children:e.id}),(0,m.jsx)(c,{variant:`body2`,children:e.text})]},e.id))})]})}),(0,m.jsx)(i,{item:!0,xs:12,md:7,children:(0,m.jsxs)(n,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,m.jsx)(c,{variant:`h6`,gutterBottom:!0,children:`② フロー生成`}),(0,m.jsx)(s,{label:`AIへの指示`,multiline:!0,rows:4,variant:`outlined`,fullWidth:!0,value:v,onChange:e=>y(e.target.value),placeholder:`例: 軽自動車の新規契約で、値引き交渉があった場合のフロー`,sx:{mb:1}}),(0,m.jsx)(d,{variant:`contained`,color:`primary`,onClick:async()=>{if(!v.trim()||o.length===0){alert(`「知識ベース」と「AIへの指示」の両方を入力してください。`);return}C(!0),x([]);try{let e=new t;if(!e.isAvailable)throw Error(`APIキーと使用モデルが未設定です。右上の設定アイコンから登録・選択してください。`);let n=`あなたは優秀な業務コンサルタントです。以下の【知識リスト】を制約条件として厳守し、ユーザーからの【指示】に合致する業務フローを、論理的に矛盾のないステップ・バイ・ステップのリスト形式で提案してください。各ステップがどの知識に基づいているか、IDを明記してください。\n\n【知識リスト】\n${o.map(e=>`${e.id}: ${e.text}`).join(`
`)}\n\n【指示】\n${v}\n\n【出力形式】\n- (タスク内容1) (根拠: KXXX)\n- (タスク内容2) (根拠: KXXX)\n- (AIが補完したタスク内容)`,r=(await e.generateContent(n)).split(`
`).filter(e=>e.trim().startsWith(`-`)).map((e,t)=>{let n=e.match(/- (.+?) \(根拠: (K\d+)\)/);return{id:t+1,text:n?n[1].trim():e.replace(`-`,``).trim(),refId:n?n[2].trim():`AI`,completed:!1,details:``}});x(r)}catch(e){console.error(`API呼び出し中にエラーが発生しました:`,e),alert(`エラー: ${e.message}`)}finally{C(!1)}},disabled:S,children:S?`生成中...`:`フローを生成`}),(0,m.jsx)(r,{sx:{overflow:`auto`,flexGrow:1,my:2,p:1,border:`1px solid #eee`,borderRadius:1},children:b.map(e=>(0,m.jsxs)(n,{variant:`outlined`,sx:{p:1,mb:1,display:`flex`,alignItems:`center`,gap:1},children:[(0,m.jsx)(c,{variant:`caption`,sx:{bgcolor:`grey.200`,p:`2px 8px`,borderRadius:`12px`},children:e.refId}),(0,m.jsx)(c,{variant:`body2`,children:e.text})]},e.id))}),(0,m.jsxs)(r,{sx:{display:`flex`,gap:2},children:[(0,m.jsx)(s,{label:`新しいフロー名`,variant:`outlined`,fullWidth:!0,value:w,onChange:e=>T(e.target.value)}),(0,m.jsx)(d,{variant:`contained`,color:`success`,onClick:()=>{if(!w.trim()){alert(`フロー名を入力してください。`);return}if(b.length===0){alert(`保存するタスクがありません。`);return}let e={id:`wf${Date.now()}`,name:w.trim(),description:`AIによって「${v.substring(0,20)}...」という指示を元に生成されました。`,tasks:b};a(u(e)),alert(`新しいフローが保存されました！顧客管理画面で利用できます。`),T(``),y(``),x([])},children:`このフローを保存`})]})]})})]})})]})}var _=g;export{_ as default};