import{a as e,i as t,n,o as r,r as i,t as a}from"./AutoFixHigh-CSwLACJy.js";import{B as o,C as s,D as c,E as l,S as u,T as d,_ as f,d as p,g as m,k as h,l as g,m as _,n as v,o as y,p as b,r as x,t as S,z as C}from"./Header-D2_cX4r4.js";import{i as w,n as T,r as E,t as D}from"./RadioGroup-DYoSchgJ.js";import{t as O}from"./geminiApiClient-CLzk0lO9.js";import{a as k,c as A,i as j,n as M,o as N,r as P,s as F}from"./ExpandMore-BmOiex4T.js";import{n as I,t as L}from"./ListItemText-Dkw5h1Xs.js";import{$ as R,B as ee,C as te,G as ne,H as re,I as ie,It as ae,J as oe,K as se,L as ce,Lt as le,Mt as ue,O as de,Ot as fe,Q as pe,Rt as me,U as z,V as he,Vt as ge,W as _e,X as ve,Y as B,Z as ye,_ as be,_t as xe,a as Se,b as Ce,c as we,d as Te,f as Ee,g as De,gt as Oe,h as ke,i as Ae,it as je,lt as Me,mt as Ne,n as Pe,nt as Fe,q as Ie,r as Le,rt as V,t as Re,v as ze,vt as Be,y as Ve,z as He,zt as Ue}from"./index-DfSAp0TU.js";function We(e){return xe(`MuiAlertTitle`,e)}Oe(`MuiAlertTitle`,[`root`]);var H=ge(le()),U=ge(fe()),Ge=e=>{let{classes:t}=e;return Me({root:[`root`]},We,t)},Ke=V(s,{name:`MuiAlertTitle`,slot:`Root`})(R(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2}))),qe=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiAlertTitle`}),{className:r,...i}=n,a=n,o=Ge(a);return(0,U.jsx)(Ke,{gutterBottom:!0,component:`div`,ownerState:a,ref:t,className:Be(o.root,r),...i})}),Je=C((0,U.jsx)(`path`,{d:`M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z`}),`Person`);function Ye(e){return xe(`MuiAvatar`,e)}Oe(`MuiAvatar`,[`root`,`colorDefault`,`circular`,`rounded`,`square`,`img`,`fallback`]);var Xe=e=>{let{classes:t,variant:n,colorDefault:r}=e;return Me({root:[`root`,n,r&&`colorDefault`],img:[`img`],fallback:[`fallback`]},Ye,t)},Ze=V(`div`,{name:`MuiAvatar`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(R(({theme:e})=>({position:`relative`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:`50%`,overflow:`hidden`,userSelect:`none`,variants:[{props:{variant:`rounded`},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:`square`},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles(`dark`,{backgroundColor:e.palette.grey[600]})}}}]}))),Qe=V(`img`,{name:`MuiAvatar`,slot:`Img`})({width:`100%`,height:`100%`,textAlign:`center`,objectFit:`cover`,color:`transparent`,textIndent:1e4}),$e=V(Je,{name:`MuiAvatar`,slot:`Fallback`})({width:`75%`,height:`75%`});function et({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){let[i,a]=H.useState(!1);return H.useEffect(()=>{if(!n&&!r)return;a(!1);let i=!0,o=new Image;return o.onload=()=>{i&&a(`loaded`)},o.onerror=()=>{i&&a(`error`)},o.crossOrigin=e,o.referrerPolicy=t,o.src=n,r&&(o.srcset=r),()=>{i=!1}},[e,t,n,r]),i}var tt=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiAvatar`}),{alt:r,children:i,className:a,component:o=`div`,slots:s={},slotProps:l={},imgProps:u,sizes:d,src:f,srcSet:p,variant:m=`circular`,...h}=n,g=null,_={...n,component:o,variant:m},v=et({...u,...typeof l.img==`function`?l.img(_):l.img,src:f,srcSet:p}),y=f||p,b=y&&v!==`error`;_.colorDefault=!b,delete _.ownerState;let x=Xe(_),[S,C]=c(`root`,{ref:t,className:Be(x.root,a),elementType:Ze,externalForwardedProps:{slots:s,slotProps:l,component:o,...h},ownerState:_}),[w,T]=c(`img`,{className:x.img,elementType:Qe,externalForwardedProps:{slots:s,slotProps:{img:{...u,...l.img}}},additionalProps:{alt:r,src:f,srcSet:p,sizes:d},ownerState:_}),[E,D]=c(`fallback`,{className:x.fallback,elementType:$e,externalForwardedProps:{slots:s,slotProps:l},shouldForwardComponentProp:!0,ownerState:_});return g=b?(0,U.jsx)(w,{...T}):i||i===0?i:y&&r?r[0]:(0,U.jsx)(E,{...D}),(0,U.jsx)(S,{...C,children:g})});function nt(e){return H.Children.toArray(e).filter(e=>H.isValidElement(e))}function rt(e){return xe(`MuiFab`,e)}var it=Oe(`MuiFab`,[`root`,`primary`,`secondary`,`extended`,`circular`,`focusVisible`,`disabled`,`colorInherit`,`sizeSmall`,`sizeMedium`,`sizeLarge`,`info`,`error`,`warning`,`success`]),at=e=>{let{color:t,variant:n,classes:r,size:i}=e,a={root:[`root`,n,`size${Fe(i)}`,t===`inherit`?`colorInherit`:t]},o=Me(a,rt,r);return{...r,...o}},ot=V(l,{name:`MuiFab`,slot:`Root`,shouldForwardProp:e=>je(e)||e===`classes`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Fe(n.size)}`],n.color===`inherit`&&t.colorInherit,t[Fe(n.size)],t[n.color]]}})(R(({theme:e})=>({...e.typography.button,minHeight:36,transition:e.transitions.create([`background-color`,`box-shadow`,`border-color`],{duration:e.transitions.duration.short}),borderRadius:`50%`,padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:e.palette.getContrastText?.(e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:`none`},[`&.${it.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:`small`},style:{width:40,height:40}},{props:{size:`medium`},style:{width:48,height:48}},{props:{variant:`extended`},style:{borderRadius:48/2,padding:`0 16px`,width:`auto`,minHeight:`auto`,minWidth:48,height:48}},{props:{variant:`extended`,size:`small`},style:{width:`auto`,padding:`0 8px`,borderRadius:34/2,minWidth:34,height:34}},{props:{variant:`extended`,size:`medium`},style:{width:`auto`,padding:`0 16px`,borderRadius:40/2,minWidth:40,height:40}},{props:{color:`inherit`},style:{color:`inherit`}}]})),R(({theme:e})=>({variants:[...Object.entries(e.palette).filter(ye([`dark`,`contrastText`])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),R(({theme:e})=>({[`&.${it.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),st=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiFab`}),{children:r,className:i,color:a=`default`,component:o=`button`,disabled:s=!1,disableFocusRipple:c=!1,focusVisibleClassName:l,size:u=`large`,variant:d=`circular`,...f}=n,p={...n,color:a,component:o,disabled:s,disableFocusRipple:c,size:u,variant:d},m=at(p);return(0,U.jsx)(ot,{className:Be(m.root,i),component:o,disabled:s,focusRipple:!c,focusVisibleClassName:Be(m.focusVisible,l),ownerState:p,ref:t,...f,classes:m,children:r})}),ct=H.createContext({}),lt=H.createContext({});function ut(e){return xe(`MuiStep`,e)}Oe(`MuiStep`,[`root`,`horizontal`,`vertical`,`alternativeLabel`,`completed`]);var dt=e=>{let{classes:t,orientation:n,alternativeLabel:r,completed:i}=e;return Me({root:[`root`,n,r&&`alternativeLabel`,i&&`completed`]},ut,t)},ft=V(`div`,{name:`MuiStep`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({variants:[{props:{orientation:`horizontal`},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:`relative`}}]}),pt=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiStep`}),{active:r,children:i,className:a,component:o=`div`,completed:s,disabled:c,expanded:l=!1,index:u,last:d,...f}=n,{activeStep:p,connector:m,alternativeLabel:h,orientation:g,nonLinear:_}=H.useContext(ct),[v=!1,y=!1,b=!1]=[r,s,c];p===u?v=r===void 0?!0:r:!_&&p>u?y=s===void 0?!0:s:!_&&p<u&&(b=c===void 0?!0:c);let x=H.useMemo(()=>({index:u,last:d,expanded:l,icon:u+1,active:v,completed:y,disabled:b}),[u,d,l,v,y,b]),S={...n,active:v,orientation:g,alternativeLabel:h,completed:y,disabled:b,expanded:l,component:o},C=dt(S),w=(0,U.jsxs)(ft,{as:o,className:Be(C.root,a),ref:t,ownerState:S,...f,children:[m&&h&&u!==0?m:null,i]});return(0,U.jsx)(lt.Provider,{value:x,children:m&&!h&&u!==0?(0,U.jsxs)(H.Fragment,{children:[m,w]}):w})}),mt=C((0,U.jsx)(`path`,{d:`M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z`}),`CheckCircle`),ht=C((0,U.jsx)(`path`,{d:`M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z`}),`Warning`);function gt(e){return xe(`MuiStepIcon`,e)}var _t=Oe(`MuiStepIcon`,[`root`,`active`,`completed`,`error`,`text`]),vt,yt=e=>{let{classes:t,active:n,completed:r,error:i}=e;return Me({root:[`root`,n&&`active`,r&&`completed`,i&&`error`],text:[`text`]},gt,t)},bt=V(o,{name:`MuiStepIcon`,slot:`Root`})(R(({theme:e})=>({display:`block`,transition:e.transitions.create(`color`,{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${_t.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${_t.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${_t.error}`]:{color:(e.vars||e).palette.error.main}}))),xt=V(`text`,{name:`MuiStepIcon`,slot:`Text`})(R(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily}))),St=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiStepIcon`}),{active:r=!1,className:i,completed:a=!1,error:o=!1,icon:s,...c}=n,l={...n,active:r,completed:a,error:o},u=yt(l);if(typeof s==`number`||typeof s==`string`){let e=Be(i,u.root);return o?(0,U.jsx)(bt,{as:ht,className:e,ref:t,ownerState:l,...c}):a?(0,U.jsx)(bt,{as:mt,className:e,ref:t,ownerState:l,...c}):(0,U.jsxs)(bt,{className:e,ref:t,ownerState:l,...c,children:[vt||=(0,U.jsx)(`circle`,{cx:`12`,cy:`12`,r:`12`}),(0,U.jsx)(xt,{className:u.text,x:`12`,y:`12`,textAnchor:`middle`,dominantBaseline:`central`,ownerState:l,children:s})]})}return s});function Ct(e){return xe(`MuiStepLabel`,e)}var wt=Oe(`MuiStepLabel`,[`root`,`horizontal`,`vertical`,`label`,`active`,`completed`,`error`,`disabled`,`iconContainer`,`alternativeLabel`,`labelContainer`]),Tt=e=>{let{classes:t,orientation:n,active:r,completed:i,error:a,disabled:o,alternativeLabel:s}=e;return Me({root:[`root`,n,a&&`error`,o&&`disabled`,s&&`alternativeLabel`],label:[`label`,r&&`active`,i&&`completed`,a&&`error`,o&&`disabled`,s&&`alternativeLabel`],iconContainer:[`iconContainer`,r&&`active`,i&&`completed`,a&&`error`,o&&`disabled`,s&&`alternativeLabel`],labelContainer:[`labelContainer`,s&&`alternativeLabel`]},Ct,t)},Et=V(`span`,{name:`MuiStepLabel`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation]]}})({display:`flex`,alignItems:`center`,[`&.${wt.alternativeLabel}`]:{flexDirection:`column`},[`&.${wt.disabled}`]:{cursor:`default`},variants:[{props:{orientation:`vertical`},style:{textAlign:`left`,padding:`8px 0`}}]}),Dt=V(`span`,{name:`MuiStepLabel`,slot:`Label`})(R(({theme:e})=>({...e.typography.body2,display:`block`,transition:e.transitions.create(`color`,{duration:e.transitions.duration.shortest}),[`&.${wt.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${wt.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${wt.alternativeLabel}`]:{marginTop:16},[`&.${wt.error}`]:{color:(e.vars||e).palette.error.main}}))),Ot=V(`span`,{name:`MuiStepLabel`,slot:`IconContainer`})({flexShrink:0,display:`flex`,paddingRight:8,[`&.${wt.alternativeLabel}`]:{paddingRight:0}}),kt=V(`span`,{name:`MuiStepLabel`,slot:`LabelContainer`})(R(({theme:e})=>({width:`100%`,color:(e.vars||e).palette.text.secondary,[`&.${wt.alternativeLabel}`]:{textAlign:`center`}}))),At=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiStepLabel`}),{children:r,className:i,componentsProps:a={},error:o=!1,icon:s,optional:l,slots:u={},slotProps:d={},StepIconComponent:f,StepIconProps:p,...m}=n,{alternativeLabel:h,orientation:g}=H.useContext(ct),{active:_,disabled:v,completed:y,icon:b}=H.useContext(lt),x=s||b,S=f;x&&!S&&(S=St);let C={...n,active:_,alternativeLabel:h,completed:y,disabled:v,error:o,orientation:g},w=Tt(C),T={slots:u,slotProps:{stepIcon:p,...a,...d}},[E,D]=c(`root`,{elementType:Et,externalForwardedProps:{...T,...m},ownerState:C,ref:t,className:Be(w.root,i)}),[O,k]=c(`label`,{elementType:Dt,externalForwardedProps:T,ownerState:C}),[A,j]=c(`stepIcon`,{elementType:S,externalForwardedProps:T,ownerState:C});return(0,U.jsxs)(E,{...D,children:[x||A?(0,U.jsx)(Ot,{className:w.iconContainer,ownerState:C,children:(0,U.jsx)(A,{completed:y,active:_,error:o,icon:x,...j})}):null,(0,U.jsxs)(kt,{className:w.labelContainer,ownerState:C,children:[r?(0,U.jsx)(O,{...k,className:Be(w.label,k?.className),children:r}):null,l]})]})});At.muiName=`StepLabel`;var jt=At;function Mt(e){return xe(`MuiStepConnector`,e)}Oe(`MuiStepConnector`,[`root`,`horizontal`,`vertical`,`alternativeLabel`,`active`,`completed`,`disabled`,`line`,`lineHorizontal`,`lineVertical`]);var Nt=e=>{let{classes:t,orientation:n,alternativeLabel:r,active:i,completed:a,disabled:o}=e,s={root:[`root`,n,r&&`alternativeLabel`,i&&`active`,a&&`completed`,o&&`disabled`],line:[`line`,`line${Fe(n)}`]};return Me(s,Mt,t)},Pt=V(`div`,{name:`MuiStepConnector`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})({flex:`1 1 auto`,variants:[{props:{orientation:`vertical`},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:`absolute`,top:12,left:`calc(-50% + 20px)`,right:`calc(50% + 20px)`}}]}),Ft=V(`span`,{name:`MuiStepConnector`,slot:`Line`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.line,t[`line${Fe(n.orientation)}`]]}})(R(({theme:e})=>{let t=e.palette.mode===`light`?e.palette.grey[400]:e.palette.grey[600];return{display:`block`,borderColor:e.vars?e.vars.palette.StepConnector.border:t,variants:[{props:{orientation:`horizontal`},style:{borderTopStyle:`solid`,borderTopWidth:1}},{props:{orientation:`vertical`},style:{borderLeftStyle:`solid`,borderLeftWidth:1,minHeight:24}}]}})),It=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiStepConnector`}),{className:r,...i}=n,{alternativeLabel:a,orientation:o=`horizontal`}=H.useContext(ct),{active:s,disabled:c,completed:l}=H.useContext(lt),u={...n,alternativeLabel:a,orientation:o,active:s,completed:l,disabled:c},d=Nt(u);return(0,U.jsx)(Pt,{className:Be(d.root,r),ref:t,ownerState:u,...i,children:(0,U.jsx)(Ft,{className:d.line,ownerState:u})})});function Lt(e){return xe(`MuiStepper`,e)}Oe(`MuiStepper`,[`root`,`horizontal`,`vertical`,`nonLinear`,`alternativeLabel`]);var Rt=e=>{let{orientation:t,nonLinear:n,alternativeLabel:r,classes:i}=e;return Me({root:[`root`,t,n&&`nonLinear`,r&&`alternativeLabel`]},Lt,i)},zt=V(`div`,{name:`MuiStepper`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.nonLinear&&t.nonLinear]}})({display:`flex`,variants:[{props:{orientation:`horizontal`},style:{flexDirection:`row`,alignItems:`center`}},{props:{orientation:`vertical`},style:{flexDirection:`column`}},{props:{alternativeLabel:!0},style:{alignItems:`flex-start`}}]}),Bt=(0,U.jsx)(It,{}),Vt=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiStepper`}),{activeStep:r=0,alternativeLabel:i=!1,children:a,className:o,component:s=`div`,connector:c=Bt,nonLinear:l=!1,orientation:u=`horizontal`,...d}=n,f={...n,nonLinear:l,alternativeLabel:i,orientation:u,component:s},p=Rt(f),m=H.Children.toArray(a).filter(Boolean),h=m.map((e,t)=>H.cloneElement(e,{index:t,last:t+1===m.length,...e.props})),g=H.useMemo(()=>({activeStep:r,alternativeLabel:i,connector:c,nonLinear:l,orientation:u}),[r,i,c,l,u]);return(0,U.jsx)(ct.Provider,{value:g,children:(0,U.jsx)(zt,{as:s,ownerState:f,className:Be(p.root,o),ref:t,...d,children:h})})});function Ht(e){return xe(`MuiToggleButton`,e)}var Ut=Oe(`MuiToggleButton`,[`root`,`disabled`,`selected`,`standard`,`primary`,`secondary`,`sizeSmall`,`sizeMedium`,`sizeLarge`,`fullWidth`]),Wt=H.createContext({}),Gt=H.createContext(void 0);function Kt(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.includes(e):e===t}var qt=e=>{let{classes:t,fullWidth:n,selected:r,disabled:i,size:a,color:o}=e,s={root:[`root`,r&&`selected`,i&&`disabled`,n&&`fullWidth`,`size${Fe(a)}`,o]};return Me(s,Ht,t)},Jt=V(l,{name:`MuiToggleButton`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`size${Fe(n.size)}`]]}})(R(({theme:e})=>({...e.typography.button,borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active,[`&.${Ut.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:`none`,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:`transparent`}},variants:[{props:{color:`standard`},style:{[`&.${Ut.selected}`]:{color:(e.vars||e).palette.text.primary,backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.selectedOpacity)}}}}},...Object.entries(e.palette).filter(ye()).map(([t])=>({props:{color:t},style:{[`&.${Ut.selected}`]:{color:(e.vars||e).palette[t].main,backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity),"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:`100%`}},{props:{size:`small`},style:{padding:7,fontSize:e.typography.pxToRem(13)}},{props:{size:`large`},style:{padding:15,fontSize:e.typography.pxToRem(15)}}]}))),Yt=H.forwardRef(function(e,t){let{value:n,...r}=H.useContext(Wt),i=H.useContext(Gt),a=Ne({...r,selected:Kt(e.value,n)},e),o=pe({props:a,name:`MuiToggleButton`}),{children:s,className:c,color:l=`standard`,disabled:u=!1,disableFocusRipple:d=!1,fullWidth:f=!1,onChange:p,onClick:m,selected:h,size:g=`medium`,value:_,...v}=o,y={...o,color:l,disabled:u,disableFocusRipple:d,fullWidth:f,size:g},b=qt(y),x=e=>{m&&(m(e,_),e.defaultPrevented)||p&&p(e,_)},S=i||``;return(0,U.jsx)(Jt,{className:Be(r.className,b.root,c,S),disabled:u,focusRipple:!d,ref:t,onClick:x,onChange:p,value:_,ownerState:y,"aria-pressed":h,...v,children:s})});function Xt(e){return xe(`MuiToggleButtonGroup`,e)}var W=Oe(`MuiToggleButtonGroup`,[`root`,`selected`,`horizontal`,`vertical`,`disabled`,`grouped`,`groupedHorizontal`,`groupedVertical`,`fullWidth`,`firstButton`,`lastButton`,`middleButton`]),Zt=e=>{let{classes:t,orientation:n,fullWidth:r,disabled:i}=e,a={root:[`root`,n,r&&`fullWidth`],grouped:[`grouped`,`grouped${Fe(n)}`,i&&`disabled`],firstButton:[`firstButton`],lastButton:[`lastButton`],middleButton:[`middleButton`]};return Me(a,Xt,t)},Qt=V(`div`,{name:`MuiToggleButtonGroup`,slot:`Root`,overridesResolver:(e,t)=>{let{ownerState:n}=e;return[{[`& .${W.grouped}`]:t.grouped},{[`& .${W.grouped}`]:t[`grouped${Fe(n.orientation)}`]},{[`& .${W.firstButton}`]:t.firstButton},{[`& .${W.lastButton}`]:t.lastButton},{[`& .${W.middleButton}`]:t.middleButton},t.root,n.orientation===`vertical`&&t.vertical,n.fullWidth&&t.fullWidth]}})(R(({theme:e})=>({display:`inline-flex`,borderRadius:(e.vars||e).shape.borderRadius,variants:[{props:{orientation:`vertical`},style:{flexDirection:`column`,[`& .${W.grouped}`]:{[`&.${W.selected} + .${W.grouped}.${W.selected}`]:{borderTop:0,marginTop:0}},[`& .${W.firstButton},& .${W.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${W.lastButton},& .${W.middleButton}`]:{marginTop:-1,borderTop:`1px solid transparent`,borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${W.lastButton}.${Ut.disabled},& .${W.middleButton}.${Ut.disabled}`]:{borderTop:`1px solid transparent`}}},{props:{fullWidth:!0},style:{width:`100%`}},{props:{orientation:`horizontal`},style:{[`& .${W.grouped}`]:{[`&.${W.selected} + .${W.grouped}.${W.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${W.firstButton},& .${W.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${W.lastButton},& .${W.middleButton}`]:{marginLeft:-1,borderLeft:`1px solid transparent`,borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${W.lastButton}.${Ut.disabled},& .${W.middleButton}.${Ut.disabled}`]:{borderLeft:`1px solid transparent`}}}]}))),$t=H.forwardRef(function(e,t){let n=pe({props:e,name:`MuiToggleButtonGroup`}),{children:r,className:i,color:a=`standard`,disabled:o=!1,exclusive:s=!1,fullWidth:c=!1,onChange:l,orientation:u=`horizontal`,size:d=`medium`,value:f,...p}=n,m={...n,disabled:o,fullWidth:c,orientation:u,size:d},h=Zt(m),g=H.useCallback((e,t)=>{if(!l)return;let n=f&&f.indexOf(t),r;f&&n>=0?(r=f.slice(),r.splice(n,1)):r=f?f.concat(t):[t],l(e,r)},[l,f]),_=H.useCallback((e,t)=>{l&&l(e,f===t?null:t)},[l,f]),v=H.useMemo(()=>({className:h.grouped,onChange:s?_:g,value:f,size:d,fullWidth:c,color:a,disabled:o}),[h.grouped,s,_,g,f,d,c,a,o]),y=nt(r),b=y.length,x=e=>{let t=e===0,n=e===b-1;return t&&n?``:t?h.firstButton:n?h.lastButton:h.middleButton};return(0,U.jsx)(Qt,{role:`group`,className:Be(h.root,i),ref:t,ownerState:m,...p,children:(0,U.jsx)(Wt.Provider,{value:v,children:y.map((e,t)=>(0,U.jsx)(Gt.Provider,{value:x(t),children:e},t))})})});const en=(0,H.createContext)({dragDropManager:void 0});function tn(e){return`Minified Redux error #`+e+`; visit https://redux.js.org/Errors?code=`+e+` for the full message or use the non-minified dev environment for full errors. `}var nn=(function(){return typeof Symbol==`function`&&Symbol.observable||`@@observable`})(),rn=function(){return Math.random().toString(36).substring(7).split(``).join(`.`)},an={INIT:`@@redux/INIT`+rn(),REPLACE:`@@redux/REPLACE`+rn(),PROBE_UNKNOWN_ACTION:function(){return`@@redux/PROBE_UNKNOWN_ACTION`+rn()}};function on(e){if(typeof e!=`object`||!e)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function sn(e,t,n){var r;if(typeof t==`function`&&typeof n==`function`||typeof n==`function`&&typeof arguments[3]==`function`)throw Error(tn(0));if(typeof t==`function`&&n===void 0&&(n=t,t=void 0),n!==void 0){if(typeof n!=`function`)throw Error(tn(1));return n(sn)(e,t)}if(typeof e!=`function`)throw Error(tn(2));var i=e,a=t,o=[],s=o,c=!1;function l(){s===o&&(s=o.slice())}function u(){if(c)throw Error(tn(3));return a}function d(e){if(typeof e!=`function`)throw Error(tn(4));if(c)throw Error(tn(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw Error(tn(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!on(e))throw Error(tn(7));if(e.type===void 0)throw Error(tn(8));if(c)throw Error(tn(9));try{c=!0,a=i(a,e)}finally{c=!1}for(var t=o=s,n=0;n<t.length;n++){var r=t[n];r()}return e}function p(e){if(typeof e!=`function`)throw Error(tn(10));i=e,f({type:an.REPLACE})}function m(){var e,t=d;return e={subscribe:function(e){if(typeof e!=`object`||!e)throw Error(tn(11));function n(){e.next&&e.next(u())}return n(),{unsubscribe:t(n)}}},e[nn]=function(){return this},e}return f({type:an.INIT}),r={dispatch:f,subscribe:d,getState:u,replaceReducer:p},r[nn]=m,r}function G(e,t,...n){if(cn()&&t===void 0)throw Error(`invariant requires an error message argument`);if(!e){let e;if(t===void 0)e=Error(`Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.`);else{let r=0;e=Error(t.replace(/%s/g,function(){return n[r++]})),e.name=`Invariant Violation`}throw e.framesToPop=1,e}}function cn(){return typeof process<`u`&&!0}function ln(e,t,n){return t.split(`.`).reduce((e,t)=>e&&e[t]?e[t]:n||null,e)}function un(e,t){return e.filter(e=>e!==t)}function dn(e){return typeof e==`object`}function fn(e,t){let n=new Map,r=e=>{n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);let i=[];return n.forEach((e,t)=>{e===1&&i.push(t)}),i}function pn(e,t){return e.filter(e=>t.indexOf(e)>-1)}const mn=`dnd-core/INIT_COORDS`,hn=`dnd-core/BEGIN_DRAG`,gn=`dnd-core/PUBLISH_DRAG_SOURCE`,_n=`dnd-core/HOVER`,vn=`dnd-core/DROP`,yn=`dnd-core/END_DRAG`;function bn(e,t){return{type:mn,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}var xn={type:mn,payload:{clientOffset:null,sourceClientOffset:null}};function Sn(e){return function(t=[],n={publishSource:!0}){let{publishSource:r=!0,clientOffset:i,getSourceClientOffset:a}=n,o=e.getMonitor(),s=e.getRegistry();e.dispatch(bn(i)),Cn(t,o,s);let c=En(t,o);if(c==null){e.dispatch(xn);return}let l=null;if(i){if(!a)throw Error(`getSourceClientOffset must be defined`);wn(a),l=a(c)}e.dispatch(bn(i,l));let u=s.getSource(c).beginDrag(o,c);if(u==null)return;Tn(u),s.pinSource(c);let d=s.getSourceType(c);return{type:hn,payload:{itemType:d,item:u,sourceId:c,clientOffset:i||null,sourceClientOffset:l||null,isSourcePublic:!!r}}}}function Cn(e,t,n){G(!t.isDragging(),`Cannot call beginDrag while dragging.`),e.forEach(function(e){G(n.getSource(e),`Expected sourceIds to be registered.`)})}function wn(e){G(typeof e==`function`,`When clientOffset is provided, getSourceClientOffset must be a function.`)}function Tn(e){G(dn(e),`Item must be an object.`)}function En(e,t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Dn(e,t,n[t])})}return e}function kn(e){return function(t={}){let n=e.getMonitor(),r=e.getRegistry();An(n),Nn(n).forEach((i,a)=>{let o=jn(i,a,r,n),s={type:vn,payload:{dropResult:On({},t,o)}};e.dispatch(s)})}}function An(e){G(e.isDragging(),`Cannot call drop while not dragging.`),G(!e.didDrop(),`Cannot call drop twice during one drag operation.`)}function jn(e,t,n,r){let i=n.getTarget(e),a=i?i.drop(r,e):void 0;return Mn(a),a===void 0&&(a=t===0?{}:r.getDropResult()),a}function Mn(e){G(e===void 0||dn(e),`Drop result must either be an object or undefined.`)}function Nn(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Pn(e){return function(){let t=e.getMonitor(),n=e.getRegistry();Fn(t);let r=t.getSourceId();return r!=null&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource()),{type:yn}}}function Fn(e){G(e.isDragging(),`Cannot call endDrag while not dragging.`)}function In(e,t){return t===null?e===null:Array.isArray(e)?e.some(e=>e===t):e===t}function Ln(e){return function(t,{clientOffset:n}={}){Rn(t);let r=t.slice(0),i=e.getMonitor(),a=e.getRegistry(),o=i.getItemType();return Bn(r,a,o),zn(r,i,a),Vn(r,i,a),{type:_n,payload:{targetIds:r,clientOffset:n||null}}}}function Rn(e){G(Array.isArray(e),`Expected targetIds to be an array.`)}function zn(e,t,n){G(t.isDragging(),`Cannot call hover while not dragging.`),G(!t.didDrop(),`Cannot call hover after drop.`);for(let t=0;t<e.length;t++){let r=e[t];G(e.lastIndexOf(r)===t,`Expected targetIds to be unique in the passed array.`);let i=n.getTarget(r);G(i,`Expected targetIds to be registered.`)}}function Bn(e,t,n){for(let r=e.length-1;r>=0;r--){let i=e[r],a=t.getTargetType(i);In(a,n)||e.splice(r,1)}}function Vn(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}function Hn(e){return function(){if(e.getMonitor().isDragging())return{type:gn}}}function Un(e){return{beginDrag:Sn(e),publishDragSource:Hn(e),hover:Ln(e),drop:kn(e),endDrag:Pn(e)}}var Wn=class{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){let e=this,{dispatch:t}=this.store;function n(n){return(...r)=>{let i=n.apply(e,r);i!==void 0&&t(i)}}let r=Un(this);return Object.keys(r).reduce((e,t)=>{let i=r[t];return e[t]=n(i),e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}};function Gn(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Kn(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qn(e){let{clientOffset:t,initialClientOffset:n,initialSourceClientOffset:r}=e;return!t||!n||!r?null:Kn(Gn(t,r),n)}function Jn(e){let{clientOffset:t,initialClientOffset:n}=e;return!t||!n?null:Kn(t,n)}const Yn=[],Xn=[];Yn.__IS_NONE__=!0,Xn.__IS_ALL__=!0;function Zn(e,t){return e===Yn?!1:e===Xn||t===void 0?!0:pn(t,e).length>0}var Qn=class{subscribeToStateChange(e,t={}){let{handlerIds:n}=t;G(typeof e==`function`,`listener must be a function.`),G(n===void 0||Array.isArray(n),`handlerIds, when specified, must be an array of strings.`);let r=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),i=t.stateId;try{i===r||i===r+1&&!Zn(t.dirtyHandlerIds,n)||e()}finally{r=i}})}subscribeToOffsetChange(e){G(typeof e==`function`,`listener must be a function.`);let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let n=this.store.getState().dragOffset;n!==t&&(t=n,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return G(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);if(G(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;let n=this.registry.getTargetType(e),r=this.getItemType();return In(n,r)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);if(G(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;let n=this.registry.getSourceType(e),r=this.getItemType();return n===r?t.isDragging(this,e):!1}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:n}=t;if(!this.isDragging())return!1;let r=this.registry.getTargetType(e),i=this.getItemType();if(i&&!In(r,i))return!1;let a=this.getTargetIds();if(!a.length)return!1;let o=a.indexOf(e);return n?o===a.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return qn(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Jn(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}},$n=typeof global<`u`?global:self,er=$n.MutationObserver||$n.WebKitMutationObserver;function tr(e){return function(){let t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}function nr(e){let t=1,n=new er(e),r=document.createTextNode(``);return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}const rr=typeof er==`function`?nr:tr;var ir=class{enqueueTask(e){let{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=rr(this.flush),this.requestErrorThrow=tr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},ar=class{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}},or=class{create(e){let t=this.freeTasks,n=t.length?t.pop():new ar(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}},sr=new ir,cr=new or(sr.registerPendingError);function lr(e){sr.enqueueTask(cr.create(e))}const ur=`dnd-core/ADD_SOURCE`,dr=`dnd-core/ADD_TARGET`,fr=`dnd-core/REMOVE_SOURCE`,pr=`dnd-core/REMOVE_TARGET`;function mr(e){return{type:ur,payload:{sourceId:e}}}function hr(e){return{type:dr,payload:{targetId:e}}}function gr(e){return{type:fr,payload:{sourceId:e}}}function _r(e){return{type:pr,payload:{targetId:e}}}function vr(e){G(typeof e.canDrag==`function`,`Expected canDrag to be a function.`),G(typeof e.beginDrag==`function`,`Expected beginDrag to be a function.`),G(typeof e.endDrag==`function`,`Expected endDrag to be a function.`)}function yr(e){G(typeof e.canDrop==`function`,`Expected canDrop to be a function.`),G(typeof e.hover==`function`,`Expected hover to be a function.`),G(typeof e.drop==`function`,`Expected beginDrag to be a function.`)}function br(e,t){if(t&&Array.isArray(e)){e.forEach(e=>br(e,!1));return}G(typeof e==`string`||typeof e==`symbol`,t?`Type can only be a string, a symbol, or an array of either.`:`Type can only be a string or a symbol.`)}var xr;(function(e){e.SOURCE=`SOURCE`,e.TARGET=`TARGET`})(xr||={});var Sr=0;function Cr(){return Sr++}function wr(e){let t=Cr().toString();switch(e){case xr.SOURCE:return`S${t}`;case xr.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}function Tr(e){switch(e[0]){case`S`:return xr.SOURCE;case`T`:return xr.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function Er(e,t){let n=e.entries(),r=!1;do{let{done:e,value:[,i]}=n.next();if(i===t)return!0;r=!!e}while(!r);return!1}var Dr=class{addSource(e,t){br(e),vr(t);let n=this.addHandler(xr.SOURCE,e,t);return this.store.dispatch(mr(n)),n}addTarget(e,t){br(e,!0),yr(t);let n=this.addHandler(xr.TARGET,e,t);return this.store.dispatch(hr(n)),n}containsHandler(e){return Er(this.dragSources,e)||Er(this.dropTargets,e)}getSource(e,t=!1){return G(this.isSourceId(e),`Expected a valid source ID.`),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return G(this.isTargetId(e),`Expected a valid target ID.`),this.dropTargets.get(e)}getSourceType(e){return G(this.isSourceId(e),`Expected a valid source ID.`),this.types.get(e)}getTargetType(e){return G(this.isTargetId(e),`Expected a valid target ID.`),this.types.get(e)}isSourceId(e){return Tr(e)===xr.SOURCE}isTargetId(e){return Tr(e)===xr.TARGET}removeSource(e){G(this.getSource(e),`Expected an existing source.`),this.store.dispatch(gr(e)),lr(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){G(this.getTarget(e),`Expected an existing target.`),this.store.dispatch(_r(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);G(t,`Expected an existing source.`),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){G(this.pinnedSource,`No source is pinned at the time.`),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){let r=wr(e);return this.types.set(r,t),e===xr.SOURCE?this.dragSources.set(r,n):e===xr.TARGET&&this.dropTargets.set(r,n),r}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}};const Or=(e,t)=>e===t;function kr(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Ar(e,t,n=Or){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}function jr(e=Yn,t){switch(t.type){case _n:break;case ur:case dr:case pr:case fr:return Yn;case hn:case gn:case yn:case vn:default:return Xn}let{targetIds:n=[],prevTargetIds:r=[]}=t.payload,i=fn(n,r);if(!(i.length>0||!Ar(n,r)))return Yn;let a=r[r.length-1],o=n[n.length-1];return a!==o&&(a&&i.push(a),o&&i.push(o)),i}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Mr(e,t,n[t])})}return e}var Pr={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Fr(e=Pr,t){let{payload:n}=t;switch(t.type){case mn:case hn:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case _n:return kr(e.clientOffset,n.clientOffset)?e:Nr({},e,{clientOffset:n.clientOffset});case yn:case vn:return Pr;default:return e}}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ir(e,t,n[t])})}return e}var Rr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function zr(e=Rr,t){let{payload:n}=t;switch(t.type){case hn:return Lr({},e,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case gn:return Lr({},e,{isSourcePublic:!0});case _n:return Lr({},e,{targetIds:n.targetIds});case pr:return e.targetIds.indexOf(n.targetId)===-1?e:Lr({},e,{targetIds:un(e.targetIds,n.targetId)});case vn:return Lr({},e,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case yn:return Lr({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function Br(e=0,t){switch(t.type){case ur:case dr:return e+1;case fr:case pr:return e-1;default:return e}}function Vr(e=0){return e+1}function Hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Hr(e,t,n[t])})}return e}function Wr(e={},t){return{dirtyHandlerIds:jr(e.dirtyHandlerIds,{type:t.type,payload:Ur({},t.payload,{prevTargetIds:ln(e,`dragOperation.targetIds`,[])})}),dragOffset:Fr(e.dragOffset,t),refCount:Br(e.refCount,t),dragOperation:zr(e.dragOperation,t),stateId:Vr(e.stateId)}}function Gr(e,t=void 0,n={},r=!1){let i=Kr(r),a=new Qn(i,new Dr(i)),o=new Wn(i,a),s=e(o,t,n);return o.receiveBackend(s),o}function Kr(e){let t=typeof window<`u`&&window.__REDUX_DEVTOOLS_EXTENSION__;return sn(Wr,e&&t&&t({name:`dnd-core`,instanceId:`dnd-core`}))}function qr(e,t){if(e==null)return{};var n=Jr(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jr(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Yr=0,Xr=Symbol.for(`__REACT_DND_CONTEXT_INSTANCE__`),Zr=(0,H.memo)(function(e){var{children:t}=e,n=qr(e,[`children`]);let[r,i]=Qr(n);return(0,H.useEffect)(()=>{if(i){let e=ei();return++Yr,()=>{--Yr===0&&(e[Xr]=null)}}},[]),(0,U.jsx)(en.Provider,{value:r,children:t})});function Qr(e){if(`manager`in e)return[{dragDropManager:e.manager},!1];let t=$r(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}function $r(e,t=ei(),n,r){let i=t;return i[Xr]||(i[Xr]={dragDropManager:Gr(e,t,n,r)}),i[Xr]}function ei(){return typeof global<`u`?global:window}var ti=me(((exports,t)=>{t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t==`object`&&typeof n==`object`){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;i--!==0;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}}));const ni=typeof window<`u`?H.useLayoutEffect:H.useEffect;var ri=ge(ti());function ii(e,t,n){let[r,i]=(0,H.useState)(()=>t(e)),a=(0,H.useCallback)(()=>{let a=t(e);(0,ri.default)(r,a)||(i(a),n&&n())},[r,e,n]);return ni(a),[r,a]}function ai(e,t,n){let[r,i]=ii(e,t,n);return ni(function(){let t=e.getHandlerId();if(t!=null)return e.subscribeToStateChange(i,{handlerIds:[t]})},[e,i]),r}function oi(e,t,n){return ai(t,e||(()=>({})),()=>n.reconnect())}function si(e,t){let n=[...t||[]];return t==null&&typeof e!=`function`&&n.push(e),(0,H.useMemo)(()=>typeof e==`function`?e():e,n)}function ci(e){return(0,H.useMemo)(()=>e.hooks.dragSource(),[e])}function li(e){return(0,H.useMemo)(()=>e.hooks.dragPreview(),[e])}var ui=!1,di=!1,fi=class{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){G(!ui,`You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return ui=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ui=!1}}isDragging(){if(!this.sourceId)return!1;G(!di,`You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor`);try{return di=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{di=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}},pi=!1,mi=class{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;G(!pi,`You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor`);try{return pi=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{pi=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}};function hi(e,t,n){let r=n.getRegistry(),i=r.addTarget(e,t);return[i,()=>r.removeTarget(i)]}function gi(e,t,n){let r=n.getRegistry(),i=r.addSource(e,t);return[i,()=>r.removeSource(i)]}function _i(e,t,n,r){let i=n?n.call(r,e,t):void 0;if(i!==void 0)return!!i;if(e===t)return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;let a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;let s=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<a.length;o++){let c=a[o];if(!s(c))return!1;let l=e[c],u=t[c];if(i=n?n.call(r,l,u,c):void 0,i===!1||i===void 0&&l!==u)return!1}return!0}function vi(e){return typeof e==`object`&&!!e&&Object.prototype.hasOwnProperty.call(e,`current`)}function yi(e){if(typeof e.type==`string`)return;let t=e.type.displayName||e.type.name||`the component`;throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}function bi(e){return(t=null,n=null)=>{if(!(0,H.isValidElement)(t)){let r=t;return e(r,n),r}let r=t;return yi(r),Ci(r,n?t=>e(t,n):e)}}function xi(e){let t={};return Object.keys(e).forEach(n=>{let r=e[n];if(n.endsWith(`Ref`))t[n]=e[n];else{let e=bi(r);t[n]=()=>e}}),t}function Si(e,t){typeof e==`function`?e(t):e.current=t}function Ci(e,t){let n=e.ref;return G(typeof n!=`string`,`Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs`),n?(0,H.cloneElement)(e,{ref:e=>{Si(n,e),Si(t,e)}}):(0,H.cloneElement)(e,{ref:t})}var wi=class{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){let t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!_i(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!_i(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&=(this.dragSourceUnsubscribe(),void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=xi({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,vi(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,vi(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}},Ti=class{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!_i(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&=(this.unsubscribeDropTarget(),void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=xi({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,vi(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}};function Ei(){let{dragDropManager:e}=(0,H.useContext)(en);return G(e!=null,`Expected drag drop context`),e}function Di(e,t){let n=Ei(),r=(0,H.useMemo)(()=>new wi(n.getBackend()),[n]);return ni(()=>(r.dragSourceOptions=e||null,r.reconnect(),()=>r.disconnectDragSource()),[r,e]),ni(()=>(r.dragPreviewOptions=t||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,t]),r}function Oi(){let e=Ei();return(0,H.useMemo)(()=>new fi(e),[e])}var ki=class{beginDrag(){let e=this.spec,t=this.monitor,n=null;return n=typeof e.item==`object`?e.item:typeof e.item==`function`?e.item(t):{},n??null}canDrag(){let e=this.spec,t=this.monitor;return typeof e.canDrag==`boolean`?e.canDrag:typeof e.canDrag==`function`?e.canDrag(t):!0}isDragging(e,t){let n=this.spec,r=this.monitor,{isDragging:i}=n;return i?i(r):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,n=this.connector,{end:r}=e;r&&r(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}};function Ai(e,t,n){let r=(0,H.useMemo)(()=>new ki(e,t,n),[t,n]);return(0,H.useEffect)(()=>{r.spec=e},[e]),r}function ji(e){return(0,H.useMemo)(()=>{let t=e.type;return G(t!=null,`spec.type must be defined`),t},[e])}function Mi(e,t,n){let r=Ei(),i=Ai(e,t,n),a=ji(e);ni(function(){if(a!=null){let[e,o]=gi(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o}},[r,t,n,i,a])}function Ni(e,t){let n=si(e,t);G(!n.begin,`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);let r=Oi(),i=Di(n.options,n.previewOptions);return Mi(n,r,i),[oi(n.collect,r,i),ci(i),li(i)]}function Pi(e){return(0,H.useMemo)(()=>e.hooks.dropTarget(),[e])}function Fi(e){let t=Ei(),n=(0,H.useMemo)(()=>new Ti(t.getBackend()),[t]);return ni(()=>(n.dropTargetOptions=e||null,n.reconnect(),()=>n.disconnectDropTarget()),[e]),n}function Ii(){let e=Ei();return(0,H.useMemo)(()=>new mi(e),[e])}function Li(e){let{accept:t}=e;return(0,H.useMemo)(()=>(G(e.accept!=null,`accept must be defined`),Array.isArray(t)?t:[t]),[t])}var Ri=class{canDrop(){let e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}};function zi(e,t){let n=(0,H.useMemo)(()=>new Ri(e,t),[t]);return(0,H.useEffect)(()=>{n.spec=e},[e]),n}function Bi(e,t,n){let r=Ei(),i=zi(e,t),a=Li(e);ni(function(){let[e,o]=hi(a,i,r);return t.receiveHandlerId(e),n.receiveHandlerId(e),o},[r,t,i,n,a.map(e=>e.toString()).join(`|`)])}function Vi(e,t){let n=si(e,t),r=Ii(),i=Fi(n.options);return Bi(n,r,i),[oi(n.collect,r,i),Pi(i)]}var Hi={display:`flex`,alignItems:`center`,p:`6px 8px`,cursor:`pointer`,borderRadius:1,transition:`background-color 0.2s, border 0.2s`,border:`2px dashed transparent`};function Ui({children:e,phaseId:t,subPhaseId:n=null,selected:r,isAncestor:i,onClick:a}){let o=Ie(),[{isOver:s,canDrop:c},l]=Vi(()=>({accept:`knowledge`,drop:e=>{o(Ee({knowledgeId:e.id,source:e.source,target:{phaseId:t,subPhaseId:n}}))},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),[t,n]);return(0,U.jsx)(B,{ref:l,onClick:a,sx:{...Hi,backgroundColor:r?`rgba(25, 118, 210, 0.08)`:i?`action.hover`:`transparent`,color:`text.primary`,borderColor:s?`primary.main`:c?`#ccc`:`transparent`,"&:hover":{backgroundColor:`action.hover`}},children:e})}function Wi(){let e=Ie(),{library:t,selectedPhaseId:n,selectedSubPhaseId:r}=oe(e=>e.knowledge);return(0,U.jsxs)(h,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,U.jsx)(s,{variant:`h6`,gutterBottom:!0,children:` `}),(0,U.jsx)(B,{sx:{overflow:`auto`,flexGrow:1,mt:1},children:(0,U.jsx)(B,{sx:{display:`flex`,flexDirection:`column`,gap:`2px`},children:t.map(t=>{let i=n===t.id&&!r,a=n===t.id&&!!r;return(0,U.jsxs)(H.Fragment,{children:[(0,U.jsx)(Ui,{phaseId:t.id,selected:i,isAncestor:a,onClick:()=>e(De(t.id)),children:(0,U.jsx)(s,{variant:`body2`,sx:{fontWeight:n===t.id?`bold`:`normal`},children:t.name})}),(t.subPhases||[]).map(n=>(0,U.jsx)(B,{sx:{pl:4},children:(0,U.jsx)(Ui,{phaseId:t.id,subPhaseId:n.id,selected:r===n.id,isAncestor:!1,onClick:()=>e(be(n.id)),children:(0,U.jsx)(s,{variant:`body2`,children:n.name})})},n.id))]},t.id)})})})]})}var Gi=Wi,Ki=C((0,U.jsx)(`path`,{d:`M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z`}),`Description`);function qi({knowledge:t,phaseId:r,subPhaseId:i}){let a=Ie(),{selectedKnowledgeId:o}=oe(e=>e.knowledge),[{isDragging:s},c]=Ni(()=>({type:`knowledge`,item:{id:t.id,source:{phaseId:r,subPhaseId:i}},collect:e=>({isDragging:!!e.isDragging()})}));return(0,U.jsx)(I,{ref:c,disablePadding:!0,sx:{cursor:`move`,opacity:s?.5:1,bgcolor:`background.paper`,borderRadius:1,mb:.5},children:(0,U.jsxs)(e,{selected:o===t.id,onClick:()=>a(ke(t.id)),sx:{borderRadius:1},children:[t.type===`task`?(0,U.jsx)(Ki,{sx:{mr:1}}):(0,U.jsx)(n,{sx:{mr:1}}),(0,U.jsx)(L,{primary:t.text}),(0,U.jsx)(u,{label:t.type,size:`small`})]})})}function Ji({onOpenAiModal:e}){let t=Ie(),{library:n,selectedPhaseId:r,selectedSubPhaseId:i}=oe(e=>e.knowledge),o=null;if(i)for(let e of n){let t=e.subPhases.find(e=>e.id===i);if(t){o=t;break}}else r&&(o=n.find(e=>e.id===r));return o?(0,U.jsxs)(h,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,U.jsxs)(B,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,U.jsxs)(s,{variant:`h6`,gutterBottom:!0,sx:{mb:0},children:[` : `,o.name]}),(0,U.jsx)(f,{variant:`outlined`,size:`small`,startIcon:(0,U.jsx)(a,{}),onClick:e,children:`AI`})]}),(0,U.jsx)(B,{sx:{overflow:`auto`,flexGrow:1},children:(0,U.jsx)(g,{dense:!0,children:(o.knowledges||[]).map(e=>(0,U.jsx)(qi,{knowledge:e,phaseId:r,subPhaseId:i},e.id))})}),(0,U.jsx)(f,{variant:`contained`,onClick:()=>{t(Ve())},sx:{mt:2},children:``})]}):(0,U.jsx)(h,{sx:{p:2,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})})}var Yi=Ji,Xi={id:null,text:``,details:``,type:`task`,options:[]};function Zi(){let e=Ie(),{library:t,selectedPhaseId:n,selectedSubPhaseId:r,selectedKnowledgeId:i,isAddingNewKnowledge:a}=oe(e=>e.knowledge),[o,c]=(0,H.useState)(Xi),[l,u]=(0,H.useState)(``),p=(0,H.useRef)(null),m=(t||[]).flatMap(e=>{if(!e)return[];let t=(e.subPhases||[]).flatMap(e=>e.knowledges||[]);return[...e.knowledges||[],...t]}).find(e=>e.id===i);(0,H.useEffect)(()=>{a?c(Xi):m&&c(m)},[m,i,a]),(0,H.useEffect)(()=>{if(p.current&&clearTimeout(p.current),!(!a&&!i))return p.current=setTimeout(()=>{if(!o.text.trim())return;let t={phaseId:n,subPhaseId:r,knowledge:o};o.id?e(Ce(t)):e(Se(t))},1500),()=>{p.current&&clearTimeout(p.current)}},[o,n,r,a,i,e]);let g=e=>{let{name:t,value:n}=e.target;c(e=>({...e,[t]:n}))},_=()=>{if(l.trim()===``)return;let e={id:`option-${ee()}`,label:l.trim()};c(t=>({...t,options:[...t.options,e]})),u(``)},v=(e,t)=>{c(n=>({...n,options:n.options.map(n=>n.id===e?{...n,label:t}:n)}))},y=e=>{c(t=>({...t,options:t.options.filter(t=>t.id!==e)}))},b=()=>{window.confirm(``)&&(e(we({phaseId:n,subPhaseId:r,knowledgeId:o.id})),e(Te()))};if(!n)return(0,U.jsx)(h,{sx:{p:2,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})});if(!a&&!i)return(0,U.jsxs)(h,{sx:{p:2,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`,flexDirection:`column`,gap:1},children:[(0,U.jsx)(s,{color:`text.secondary`,children:``}),(0,U.jsx)(s,{color:`text.secondary`,children:``})]});let S=a||!o.id?` `:` `;return(0,U.jsxs)(h,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,U.jsx)(s,{variant:`h6`,gutterBottom:!0,children:S}),(0,U.jsxs)(B,{sx:{overflow:`auto`,flexGrow:1,pt:1},children:[(0,U.jsx)(x,{label:``,fullWidth:!0,multiline:!0,rows:4,name:`text`,value:o.text,onChange:g,sx:{mb:2}}),(0,U.jsx)(x,{label:``,fullWidth:!0,multiline:!0,rows:3,name:`details`,value:o.details||``,onChange:g,sx:{mb:2}}),(0,U.jsxs)(D,{row:!0,name:`type`,value:o.type,onChange:g,children:[(0,U.jsx)(w,{value:`task`,control:(0,U.jsx)(T,{}),label:`Task`}),(0,U.jsx)(w,{value:`branch`,control:(0,U.jsx)(T,{}),label:`Branch`})]}),o.type===`branch`&&(0,U.jsxs)(B,{sx:{mt:2},children:[(0,U.jsx)(s,{variant:`subtitle2`,children:``}),o.options.map(e=>(0,U.jsxs)(B,{sx:{display:`flex`,alignItems:`center`,mb:1},children:[(0,U.jsx)(x,{value:e.label,fullWidth:!0,variant:`outlined`,size:`small`,onChange:t=>v(e.id,t.target.value)}),(0,U.jsx)(d,{onClick:()=>y(e.id),children:(0,U.jsx)(P,{})})]},e.id)),(0,U.jsxs)(B,{sx:{display:`flex`,alignItems:`center`,mt:1},children:[(0,U.jsx)(x,{label:``,fullWidth:!0,value:l,onChange:e=>u(e.target.value),size:`small`}),(0,U.jsx)(d,{onClick:_,children:(0,U.jsx)(j,{})})]})]})]}),(0,U.jsx)(B,{sx:{mt:2,display:`flex`,justifyContent:`flex-end`},children:o.id&&(0,U.jsx)(f,{color:`error`,onClick:b,children:``})})]})}var Qi=Zi,$i=ge(ae()),ea=!0,ta=`Invariant failed`;function na(e,t){if(!e){if(ea)throw Error(ta);var n=typeof t==`function`?t():t,r=n?`${ta}: ${n}`:ta;throw Error(r)}}var ra=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left,a=n-i,o=r-t;return{top:t,right:n,bottom:r,left:i,width:a,height:o,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},ia=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},aa=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},oa=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},sa={top:0,right:0,bottom:0,left:0},ca=function(e){var t=e.borderBox,n=e.margin,r=n===void 0?sa:n,i=e.border,a=i===void 0?sa:i,o=e.padding,s=o===void 0?sa:o,c=ra(ia(t,r)),l=ra(aa(t,a)),u=ra(aa(l,s));return{marginBox:c,borderBox:ra(t),paddingBox:l,contentBox:u,margin:r,border:a,padding:s}},la=function(e){var t=e.slice(0,-2);if(e.slice(-2)!==`px`)return 0;var n=Number(t);return isNaN(n)&&na(!1),n},ua=function(){return{x:window.pageXOffset,y:window.pageYOffset}},da=function(e,t){var n=e.borderBox,r=e.border,i=e.margin,a=e.padding,o=oa(n,t);return ca({borderBox:o,border:r,margin:i,padding:a})},fa=function(e,t){return t===void 0&&(t=ua()),da(e,t)},pa=function(e,t){var n={top:la(t.marginTop),right:la(t.marginRight),bottom:la(t.marginBottom),left:la(t.marginLeft)},r={top:la(t.paddingTop),right:la(t.paddingRight),bottom:la(t.paddingBottom),left:la(t.paddingLeft)},i={top:la(t.borderTopWidth),right:la(t.borderRightWidth),bottom:la(t.borderBottomWidth),left:la(t.borderLeftWidth)};return ca({borderBox:e,margin:n,padding:r,border:i})},ma=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return pa(t,n)},ha=function(e){var t=[],n=null,r=function(){t=[...arguments],!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&=(cancelAnimationFrame(n),null)},r};function ga(e,t){}ga.bind(null,`warn`),ga.bind(null,`error`);function _a(){}function va(e,t){return{...e,...t}}function ya(e,t,n){let r=t.map(t=>{let r=va(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(e=>{e()})}}var ba=`Invariant failed`,xa=class extends Error{};xa.prototype.toString=function(){return this.message};function K(e,t){throw new xa(ba)}var Sa=class extends H.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=_a,this.onWindowError=e=>{let t=this.getCallbacks();t.isDragging()&&t.tryAbort(),e.error instanceof xa&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw Error(`Unable to find AppCallbacks in <ErrorBoundary/>`);return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=ya(window,[{eventName:`error`,fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof xa){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}},Ca=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,wa=e=>e+1,Ta=e=>`
  You have lifted an item in position ${wa(e.source.index)}
`,Ea=(e,t)=>{let n=e.droppableId===t.droppableId,r=wa(e.index),i=wa(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},Da=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Oa=e=>{let t=e.destination;if(t)return Ea(e.source,t);let n=e.combine;return n?Da(e.draggableId,e.source,n):`You are over an area that cannot be dropped on`},ka=e=>`
  The item has returned to its starting position
  of ${wa(e.index)}
`,Aa={dragHandleUsageInstructions:Ca,onDragStart:Ta,onDragUpdate:Oa,onDragEnd:e=>{if(e.reason===`CANCEL`)return`
      Movement cancelled.
      ${ka(e.source)}
    `;let t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Ea(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Da(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${ka(e.source)}
  `}};function ja(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function Ma(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ja(e[n],t[n]))return!1;return!0}function q(e,t){let n=(0,H.useState)(()=>({inputs:t,result:e()}))[0],r=(0,H.useRef)(!0),i=(0,H.useRef)(n),a=r.current||t&&i.current.inputs&&Ma(t,i.current.inputs)?i.current:{inputs:t,result:e()};return(0,H.useEffect)(()=>{r.current=!1,i.current=a},[a]),a.result}function J(e,t){return q(()=>e,t)}var Na={x:0,y:0},Pa=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Fa=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ia=(e,t)=>e.x===t.x&&e.y===t.y,La=e=>({x:e.x===0?0:-e.x,y:e.y===0?0:-e.y}),Ra=(e,t,n=0)=>e===`x`?{x:t,y:n}:{x:n,y:t},za=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Ba=(e,t)=>Math.min(...t.map(t=>za(e,t))),Va=e=>t=>({x:e(t.x),y:e(t.y)}),Ha=(e,t)=>{let n=ra({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},Ua=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Wa=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Ga={top:0,right:0,bottom:0,left:0},Ka=(e,t)=>t?Ua(e,t.scroll.diff.displacement):e,qa=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Ja=(e,t)=>t&&t.shouldClipSubject?Ha(t.pageMarginBox,e):ra(e),Ya=({page:e,withPlaceholder:t,axis:n,frame:r})=>{let i=Ka(e.marginBox,r),a=qa(i,n,t),o=Ja(a,r);return{page:e,withPlaceholder:t,active:o}},Xa=(e,t)=>{!e.frame&&K();let n=e.frame,r=Fa(t,n.scroll.initial),i=La(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=Ya({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function Za(e,t=Ma){let n=null;function r(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;let i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}var Qa=Za(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),$a=Za(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),eo=Za(e=>Object.values(e)),to=Za(e=>Object.values(e)),no=Za((e,t)=>to(t).filter(t=>e===t.descriptor.droppableId).sort((e,t)=>e.descriptor.index-t.descriptor.index));function ro(e){return e.at&&e.at.type===`REORDER`?e.at.destination:null}function io(e){return e.at&&e.at.type===`COMBINE`?e.at.combine:null}var ao=Za((e,t)=>t.filter(t=>t.descriptor.id!==e.descriptor.id)),oo=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!ro(i))return null;function a(e){let t={type:`COMBINE`,combine:{draggableId:e,droppableId:n.descriptor.id}};return{...i,at:t}}let o=i.displaced.all,s=o.length?o[0]:null;if(e)return s?a(s):null;let c=ao(t,r);if(!s){if(!c.length)return null;let e=c[c.length-1];return a(e.descriptor.id)}let l=c.findIndex(e=>e.descriptor.id===s);l===-1&&K();let u=l-1;if(u<0)return null;let d=c[u];return a(d.descriptor.id)},so=(e,t)=>e.descriptor.droppableId===t.descriptor.id,co={point:Na,value:0},lo={invisible:{},visible:{},all:[]},uo={displaced:lo,displacedBy:co,at:null},fo=(e,t)=>n=>e<=n&&n<=t,po=e=>{let t=fo(e.top,e.bottom),n=fo(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;let i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;let o=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return o&&s?!0:o&&a||s&&i}},mo=e=>{let t=fo(e.top,e.bottom),n=fo(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)},ho={direction:`vertical`,line:`y`,crossAxisLine:`x`,start:`top`,end:`bottom`,size:`height`,crossAxisStart:`left`,crossAxisEnd:`right`,crossAxisSize:`width`},go={direction:`horizontal`,line:`x`,crossAxisLine:`y`,start:`left`,end:`right`,size:`width`,crossAxisStart:`top`,crossAxisEnd:`bottom`,crossAxisSize:`height`},_o=e=>t=>{let n=fo(t.top,t.bottom),r=fo(t.left,t.right);return t=>e===ho?n(t.top)&&n(t.bottom):r(t.left)&&r(t.right)},vo=(e,t)=>{let n=t.frame?t.frame.scroll.diff.displacement:Na;return Ua(e,n)},yo=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,bo=(e,t,n)=>n(t)(e),xo=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{let a=r?vo(e,t):e;return yo(a,t,i)&&bo(a,n,i)},So=e=>xo({...e,isVisibleThroughFrameFn:po}),Co=e=>xo({...e,isVisibleThroughFrameFn:mo}),wo=e=>xo({...e,isVisibleThroughFrameFn:_o(e.destination.axis)}),To=(e,t,n)=>{if(typeof n==`boolean`)return n;if(!t)return!0;let{invisible:r,visible:i}=t;if(r[e])return!1;let a=i[e];return a?a.shouldAnimate:!0};function Eo(e,t){let n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return ra(ia(n,r))}function Do({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(e,o){let s=Eo(o,n),c=o.descriptor.id;if(e.all.push(c),!So({target:s,destination:t,viewport:r,withDroppableDisplacement:!0}))return e.invisible[o.descriptor.id]=!0,e;let l=To(c,a,i),u={draggableId:c,shouldAnimate:l};return e.visible[c]=u,e},{all:[],visible:{},invisible:{}})}function Oo(e,t){if(!e.length)return 0;let n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function ko({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){let i=Oo(e,{inHomeList:t});return{displaced:lo,displacedBy:n,at:{type:`REORDER`,destination:{droppableId:r.descriptor.id,index:i}}}}function Ao({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:s}){let c=so(e,n);if(o==null)return ko({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});let l=t.find(e=>e.descriptor.index===o);if(!l)return ko({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});let u=ao(e,t),d=t.indexOf(l),f=u.slice(d);return{displaced:Do({afterDragging:f,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:s}),displacedBy:i,at:{type:`REORDER`,destination:{droppableId:n.descriptor.id,index:o}}}}function jo(e,t){return!!t.effected[e]}var Mo=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;let a=r.draggableId,o=n[a].descriptor.index;return jo(a,i)?e?o:o-1:e?o+1:o},No=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;let i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,c=t?s:s+1;return a<o||a>c?null:a},Po=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:s,afterCritical:c})=>{let l=o.at;if(!l&&K(),l.type===`REORDER`){let r=No({isMovingForward:e,isInHomeList:t,location:l.destination,insideDestination:a});return r==null?null:Ao({draggable:n,insideDestination:a,destination:i,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:r})}let u=Mo({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:l.combine,afterCritical:c});return u==null?null:Ao({draggable:n,insideDestination:a,destination:i,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:u})},Fo=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{let i=!!(e.visible[n]||e.invisible[n]);return jo(n,t)?i?Na:La(r.point):i?r.point:Na},Io=({afterCritical:e,impact:t,draggables:n})=>{let r=io(t);!r&&K();let i=r.draggableId,a=n[i].page.borderBox.center,o=Fo({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Pa(a,o)},Lo=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Ro=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,zo=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Bo=({axis:e,moveRelativeTo:t,isMoving:n})=>Ra(e.line,t.marginBox[e.end]+Lo(e,n),zo(e,t.marginBox,n)),Vo=({axis:e,moveRelativeTo:t,isMoving:n})=>Ra(e.line,t.marginBox[e.start]-Ro(e,n),zo(e,t.marginBox,n)),Ho=({axis:e,moveInto:t,isMoving:n})=>Ra(e.line,t.contentBox[e.start]+Lo(e,n),zo(e,t.contentBox,n)),Uo=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{let a=no(r.descriptor.id,n),o=t.page,s=r.axis;if(!a.length)return Ho({axis:s,moveInto:r.page,isMoving:o});let{displaced:c,displacedBy:l}=e,u=c.all[0];if(u){let e=n[u];if(jo(u,i))return Vo({axis:s,moveRelativeTo:e.page,isMoving:o});let t=da(e.page,l.point);return Vo({axis:s,moveRelativeTo:t,isMoving:o})}let d=a[a.length-1];if(d.descriptor.id===t.descriptor.id)return o.borderBox.center;if(jo(d.descriptor.id,i)){let e=da(d.page,La(i.displacedBy.point));return Bo({axis:s,moveRelativeTo:e,isMoving:o})}return Bo({axis:s,moveRelativeTo:d.page,isMoving:o})},Wo=(e,t)=>{let n=e.frame;return n?Pa(t,n.scroll.diff.displacement):t},Go=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{let a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type===`REORDER`?Uo({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):Io({impact:e,draggables:r,afterCritical:i})},Ko=e=>{let t=Go(e),n=e.droppable;return n?Wo(n,t):t},qo=(e,t)=>{let n=Fa(t,e.scroll.initial),r=La(n);return{frame:ra({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Jo(e,t){return e.map(e=>t[e])}function Yo(e,t){for(let n=0;n<t.length;n++){let r=t[n].visible[e];if(r)return r}return null}var Xo=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{let a=qo(t,Pa(t.scroll.current,i)),o=n.frame?Xa(n,Pa(n.frame.scroll.current,i)):n,s=e.displaced,c=Do({afterDragging:Jo(s.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),l=Do({afterDragging:Jo(s.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),u={},d={},f=[s,c,l];return s.all.forEach(e=>{let t=Yo(e,f);if(t){d[e]=t;return}u[e]=!0}),{...e,displaced:{all:s.all,invisible:u,visible:d}}},Zo=(e,t)=>Pa(e.scroll.diff.displacement,t),Qo=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{let r=Zo(n,e),i=Fa(r,t.page.borderBox.center);return Pa(t.client.borderBox.center,i)},$o=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{let o=Fa(n,e.page.borderBox.center),s={target:Ua(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?wo(s):Co(s)},es=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:s,afterCritical:c})=>{if(!n.isEnabled)return null;let l=no(n.descriptor.id,r),u=so(t,n),d=oo({isMovingForward:e,draggable:t,destination:n,insideDestination:l,previousImpact:i})||Po({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:l,previousImpact:i,viewport:a,afterCritical:c});if(!d)return null;let f=Ko({impact:d,draggable:t,droppable:n,draggables:r,afterCritical:c});if($o({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Qo({pageBorderBoxCenter:f,draggable:t,viewport:a}),impact:d,scrollJumpRequest:null};let p=Fa(f,o),m=Xo({impact:d,viewport:a,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:s,impact:m,scrollJumpRequest:p}},ts=e=>{let t=e.subject.active;return!t&&K(),t},ns=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{let a=n.subject.active;if(!a)return null;let o=n.axis,s=fo(a[o.start],a[o.end]),c=eo(r).filter(e=>e!==n).filter(e=>e.isEnabled).filter(e=>!!e.subject.active).filter(e=>po(i.frame)(ts(e))).filter(t=>{let n=ts(t);return e?a[o.crossAxisEnd]<n[o.crossAxisEnd]:n[o.crossAxisStart]<a[o.crossAxisStart]}).filter(e=>{let t=ts(e),n=fo(t[o.start],t[o.end]);return s(t[o.start])||s(t[o.end])||n(a[o.start])||n(a[o.end])}).sort((t,n)=>{let r=ts(t)[o.crossAxisStart],i=ts(n)[o.crossAxisStart];return e?r-i:i-r}).filter((e,t,n)=>ts(e)[o.crossAxisStart]===ts(n[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];let l=c.filter(e=>fo(ts(e)[o.start],ts(e)[o.end])(t[o.line]));return l.length===1?l[0]:l.length>1?l.sort((e,t)=>ts(e)[o.start]-ts(t)[o.start])[0]:c.sort((e,n)=>{let r=Ba(t,Wa(ts(e))),i=Ba(t,Wa(ts(n)));return r===i?ts(e)[o.start]-ts(n)[o.start]:r-i})[0]},rs=(e,t)=>{let n=e.page.borderBox.center;return jo(e.descriptor.id,t)?Fa(n,t.displacedBy.point):n},os=(e,t)=>{let n=e.page.borderBox;return jo(e.descriptor.id,t)?Ua(n,La(t.displacedBy.point)):n},ss=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(e=>Co({target:os(e,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((t,r)=>{let a=za(e,Wo(n,rs(t,i))),o=za(e,Wo(n,rs(r,i)));return a<o?-1:o<a?1:t.descriptor.index-r.descriptor.index})[0]||null,cs=Za(function(e,t){let n=t[e.line];return{value:n,point:Ra(e.line,n)}}),ls=(e,t,n)=>{let r=e.axis;if(e.descriptor.mode===`virtual`)return Ra(r.line,t[r.line]);let i=e.subject.page.contentBox[r.size],a=no(e.descriptor.id,n).reduce((e,t)=>e+t.client.marginBox[r.size],0)+t[r.line]-i;return a<=0?null:Ra(r.line,a)},us=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),ds=(e,t,n)=>{let r=e.frame;so(t,e)&&K(),e.subject.withPlaceholder&&K();let i=cs(e.axis,t.displaceBy).point,a=ls(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){let t=Ya({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:t}}let s=a?Pa(r.scroll.max,a):r.scroll.max,c=us(r,s),l=Ya({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:l,frame:c}},fs=e=>{let t=e.subject.withPlaceholder;!t&&K();let n=e.frame;if(!n){let t=Ya({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}let r=t.oldFrameMaxScroll;!r&&K();let i=us(n,r),a=Ya({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}},ps=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:s})=>{if(!t){if(n.length)return null;let e={displaced:lo,displacedBy:co,at:{type:`REORDER`,destination:{droppableId:a.descriptor.id,index:0}}},t=Ko({impact:e,draggable:r,droppable:a,draggables:i,afterCritical:s}),c=so(r,a)?a:ds(a,r,i);return $o({draggable:r,destination:c,newPageBorderBoxCenter:t,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}let c=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],l=(()=>{let e=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?e:e+1})(),u=cs(a.axis,r.displaceBy);return Ao({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:u,last:lo,index:l})},ms=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:s})=>{let c=ns({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!c)return null;let l=no(c.descriptor.id,i),u=ss({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:l,afterCritical:s}),d=ps({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:l,viewport:o,afterCritical:s});if(!d)return null;let f=Ko({impact:d,draggable:n,droppable:c,draggables:i,afterCritical:s});return{clientSelection:Qo({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},hs=e=>{let t=e.at;return t?t.type===`REORDER`?t.destination.droppableId:t.combine.droppableId:null},gs=(e,t)=>{let n=hs(e);return n?t[n]:null},_s=({state:e,type:t})=>{let n=gs(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,s=o===`vertical`&&(t===`MOVE_UP`||t===`MOVE_DOWN`)||o===`horizontal`&&(t===`MOVE_LEFT`||t===`MOVE_RIGHT`);if(s&&!r)return null;let c=t===`MOVE_DOWN`||t===`MOVE_RIGHT`,l=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:f}=e.dimensions;return s?es({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:l,destination:a,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):ms({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:l,isOver:a,draggables:d,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function vs(e){return e.phase===`DRAGGING`||e.phase===`COLLECTING`}function ys(e){let t=fo(e.top,e.bottom),n=fo(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function bs(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function xs({pageBorderBox:e,draggable:t,candidates:n}){let r=t.page.borderBox.center,i=n.map(t=>{let n=t.axis,i=Ra(t.axis.line,e.center[n.line],t.page.borderBox.center[n.crossAxisLine]);return{id:t.descriptor.id,distance:za(r,i)}}).sort((e,t)=>t.distance-e.distance);return i[0]?i[0].id:null}function Ss({pageBorderBox:e,draggable:t,droppables:n}){let r=eo(n).filter(t=>{if(!t.isEnabled)return!1;let n=t.subject.active;if(!n||!bs(e,n))return!1;if(ys(n)(e.center))return!0;let r=t.axis,i=n.center[r.crossAxisLine],a=e[r.crossAxisStart],o=e[r.crossAxisEnd],s=fo(n[r.crossAxisStart],n[r.crossAxisEnd]),c=s(a),l=s(o);return!c&&!l?!0:c?a<i:o>i});return r.length?r.length===1?r[0].descriptor.id:xs({pageBorderBox:e,draggable:t,candidates:r}):null}var Cs=(e,t)=>ra(Ua(e,t)),ws=(e,t)=>{let n=e.frame;return n?Cs(t,n.scroll.diff.value):t};function Ts({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Es({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Ds=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{let s=n.axis,c=cs(n.axis,t.displaceBy),l=c.value,u=e[s.start],d=e[s.end],f=ao(t,r).find(e=>{let t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=jo(t,o),a=Ts({displaced:i,id:t});return r?a?d<=n:u<n-l:a?d<=n+l:u<n})||null,p=Es({draggable:t,closest:f,inHomeList:so(t,n)});return Ao({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:c,index:p})},Os=4,ks=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;let o=r.axis,s=cs(r.axis,e.displaceBy),c=s.value,l=t[o.start],u=t[o.end],d=ao(e,i).find(e=>{let t=e.descriptor.id,r=e.page.borderBox,i=r[o.size]/Os,s=jo(t,a),d=Ts({displaced:n.displaced,id:t});return s?d?u>r[o.start]+i&&u<r[o.end]-i:l>r[o.start]-c+i&&l<r[o.end]-c-i:d?u>r[o.start]+c+i&&u<r[o.end]+c-i:l>r[o.start]+i&&l<r[o.end]-i});return d?{displacedBy:s,displaced:n.displaced,at:{type:`COMBINE`,combine:{draggableId:d.descriptor.id,droppableId:r.descriptor.id}}}:null},As=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{let s=Cs(t.page.borderBox,e),c=Ss({pageBorderBox:s,draggable:t,droppables:r});if(!c)return uo;let l=r[c],u=no(l.descriptor.id,n),d=ws(l,s);return ks({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:i,destination:l,insideDestination:u,afterCritical:o})||Ds({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:l,insideDestination:u,last:i.displaced,viewport:a,afterCritical:o})},js=(e,t)=>({...e,[t.descriptor.id]:t}),Ms=({previousImpact:e,impact:t,droppables:n})=>{let r=hs(e),i=hs(t);if(!r||r===i)return n;let a=n[r];if(!a.subject.withPlaceholder)return n;let o=fs(a);return js(n,o)},Ns=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{let a=Ms({previousImpact:r,impact:i,droppables:n}),o=hs(i);if(!o)return a;let s=n[o];if(so(e,s)||s.subject.withPlaceholder)return a;let c=ds(s,e,t);return js(a,c)},Ps=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{let o=r||e.viewport,s=n||e.dimensions,c=t||e.current.client.selection,l=Fa(c,e.initial.client.selection),u={offset:l,selection:c,borderBoxCenter:Pa(e.initial.client.borderBoxCenter,l)},d={selection:Pa(u.selection,o.scroll.current),borderBoxCenter:Pa(u.borderBoxCenter,o.scroll.current),offset:Pa(u.offset,o.scroll.diff.value)},f={client:u,page:d};if(e.phase===`COLLECTING`)return{...e,dimensions:s,viewport:o,current:f};let p=s.draggables[e.critical.draggable.id],m=i||As({pageOffset:d.offset,draggable:p,draggables:s.draggables,droppables:s.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),h=Ns({draggable:p,impact:m,previousImpact:e.impact,draggables:s.draggables,droppables:s.droppables});return{...e,current:f,dimensions:{draggables:s.draggables,droppables:h},impact:m,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function Fs(e,t){return e.map(e=>t[e])}var Is=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{let a=e.displaced,o=Fs(a.all,n),s=Do({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:s}},Ls=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{let o=Ko({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Qo({pageBorderBoxCenter:o,draggable:t,viewport:i})},Rs=({state:e,dimensions:t,viewport:n})=>{e.movementMode!==`SNAP`&&K();let r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:s}=a,c=o[e.critical.draggable.id],l=hs(r);!l&&K();let u=s[l],d=Is({impact:r,viewport:i,destination:u,draggables:o}),f=Ls({impact:d,draggable:c,droppable:u,draggables:o,viewport:i,afterCritical:e.afterCritical});return Ps({impact:d,clientSelection:f,state:e,dimensions:a,viewport:i})},zs=e=>({index:e.index,droppableId:e.droppableId}),Bs=({draggable:e,home:t,draggables:n,viewport:r})=>{let i=cs(t.axis,e.displaceBy),a=no(t.descriptor.id,n),o=a.indexOf(e);o===-1&&K();let s=a.slice(o+1),c=s.reduce((e,t)=>(e[t.descriptor.id]=!0,e),{}),l={inVirtualList:t.descriptor.mode===`virtual`,displacedBy:i,effected:c};return{impact:{displaced:Do({afterDragging:s,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:`REORDER`,destination:zs(e.descriptor)}},afterCritical:l}},Vs=(e,t)=>({draggables:e.draggables,droppables:js(e.droppables,t)}),Hs=({draggable:e,offset:t,initialWindowScroll:n})=>{let r=da(e.client,t),i=fa(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},Us=e=>{let t=e.frame;return!t&&K(),t},Ws=({additions:e,updatedDroppables:t,viewport:n})=>{let r=n.scroll.diff.value;return e.map(e=>{let i=e.descriptor.droppableId,a=t[i],o=Us(a).scroll.diff.value,s=Pa(r,o);return Hs({draggable:e,offset:s,initialWindowScroll:n.scroll.initial})})},Gs=({state:e,published:t})=>{let n=t.modified.map(t=>{let n=e.dimensions.droppables[t.droppableId];return Xa(n,t.scroll)}),r={...e.dimensions.droppables,...Qa(n)},i=$a(Ws({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(e=>{delete a[e]});let o={droppables:r,draggables:a},s=hs(e.impact),c=s?o.droppables[s]:null,l=o.draggables[e.critical.draggable.id],u=o.droppables[e.critical.droppable.id],{impact:d,afterCritical:f}=Bs({draggable:l,home:u,draggables:a,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:d,m=As({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:e.viewport,afterCritical:f}),h={...e,phase:`DRAGGING`,impact:m,onLiftImpact:d,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return e.phase===`COLLECTING`?h:{...h,phase:`DROP_PENDING`,reason:e.reason,isWaiting:!1}},Ks=e=>e.movementMode===`SNAP`,qs=(e,t,n)=>{let r=Vs(e.dimensions,t);return!Ks(e)||n?Ps({state:e,dimensions:r}):Rs({state:e,dimensions:r})};function Js(e){return e.isDragging&&e.movementMode===`SNAP`?{...e,scrollJumpRequest:null}:e}var Ys={phase:`IDLE`,completed:null,shouldFlush:!1},Xs=(e=Ys,t)=>{if(t.type===`FLUSH`)return{...Ys,shouldFlush:!0};if(t.type===`INITIAL_PUBLISH`){e.phase!==`IDLE`&&K();let{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,s=a.draggables[n.draggable.id],c=a.droppables[n.droppable.id],l={selection:r,borderBoxCenter:s.client.borderBox.center,offset:Na},u={client:l,page:{selection:Pa(l.selection,i.scroll.initial),borderBoxCenter:Pa(l.selection,i.scroll.initial),offset:Pa(l.selection,i.scroll.diff.value)}},d=eo(a.droppables).every(e=>!e.isFixedOnPage),{impact:f,afterCritical:p}=Bs({draggable:s,home:c,draggables:a.draggables,viewport:i});return{phase:`DRAGGING`,isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:u,current:u,isWindowScrollAllowed:d,impact:f,afterCritical:p,onLiftImpact:f,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type===`COLLECTION_STARTING`)return e.phase===`COLLECTING`||e.phase===`DROP_PENDING`?e:(e.phase!==`DRAGGING`&&K(),{...e,phase:`COLLECTING`});if(t.type===`PUBLISH_WHILE_DRAGGING`)return!(e.phase===`COLLECTING`||e.phase===`DROP_PENDING`)&&K(),Gs({state:e,published:t.payload});if(t.type===`MOVE`){if(e.phase===`DROP_PENDING`)return e;!vs(e)&&K();let{client:n}=t.payload;return Ia(n,e.current.client.selection)?e:Ps({state:e,clientSelection:n,impact:Ks(e)?e.impact:null})}if(t.type===`UPDATE_DROPPABLE_SCROLL`){if(e.phase===`DROP_PENDING`||e.phase===`COLLECTING`)return Js(e);!vs(e)&&K();let{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;let a=Xa(i,r);return qs(e,a,!1)}if(t.type===`UPDATE_DROPPABLE_IS_ENABLED`){if(e.phase===`DROP_PENDING`)return e;!vs(e)&&K();let{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];!i&&K(),i.isEnabled===r&&K();let a={...i,isEnabled:r};return qs(e,a,!0)}if(t.type===`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`){if(e.phase===`DROP_PENDING`)return e;!vs(e)&&K();let{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];!i&&K(),i.isCombineEnabled===r&&K();let a={...i,isCombineEnabled:r};return qs(e,a,!0)}if(t.type===`MOVE_BY_WINDOW_SCROLL`){if(e.phase===`DROP_PENDING`||e.phase===`DROP_ANIMATING`)return e;!vs(e)&&K(),!e.isWindowScrollAllowed&&K();let n=t.payload.newScroll;if(Ia(e.viewport.scroll.current,n))return Js(e);let r=qo(e.viewport,n);return Ks(e)?Rs({state:e,viewport:r}):Ps({state:e,viewport:r})}if(t.type===`UPDATE_VIEWPORT_MAX_SCROLL`){if(!vs(e))return e;let n=t.payload.maxScroll;if(Ia(n,e.viewport.scroll.max))return e;let r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type===`MOVE_UP`||t.type===`MOVE_DOWN`||t.type===`MOVE_LEFT`||t.type===`MOVE_RIGHT`){if(e.phase===`COLLECTING`||e.phase===`DROP_PENDING`)return e;e.phase!==`DRAGGING`&&K();let n=_s({state:e,type:t.type});return n?Ps({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type===`DROP_PENDING`){let n=t.payload.reason;return e.phase!==`COLLECTING`&&K(),{...e,phase:`DROP_PENDING`,isWaiting:!0,reason:n}}if(t.type===`DROP_ANIMATE`){let{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return!(e.phase===`DRAGGING`||e.phase===`DROP_PENDING`)&&K(),{phase:`DROP_ANIMATING`,completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type===`DROP_COMPLETE`){let{completed:e}=t.payload;return{phase:`IDLE`,completed:e,shouldFlush:!1}}return e};function Y(e,t){return e instanceof Object&&`type`in e&&e.type===t}var Zs=e=>({type:`BEFORE_INITIAL_CAPTURE`,payload:e}),Qs=e=>({type:`LIFT`,payload:e}),$s=e=>({type:`INITIAL_PUBLISH`,payload:e}),ec=e=>({type:`PUBLISH_WHILE_DRAGGING`,payload:e}),tc=()=>({type:`COLLECTION_STARTING`,payload:null}),nc=e=>({type:`UPDATE_DROPPABLE_SCROLL`,payload:e}),rc=e=>({type:`UPDATE_DROPPABLE_IS_ENABLED`,payload:e}),ic=e=>({type:`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`,payload:e}),ac=e=>({type:`MOVE`,payload:e}),oc=e=>({type:`MOVE_BY_WINDOW_SCROLL`,payload:e}),sc=e=>({type:`UPDATE_VIEWPORT_MAX_SCROLL`,payload:e}),cc=()=>({type:`MOVE_UP`,payload:null}),lc=()=>({type:`MOVE_DOWN`,payload:null}),uc=()=>({type:`MOVE_RIGHT`,payload:null}),dc=()=>({type:`MOVE_LEFT`,payload:null}),fc=()=>({type:`FLUSH`,payload:null}),pc=e=>({type:`DROP_ANIMATE`,payload:e}),mc=e=>({type:`DROP_COMPLETE`,payload:e}),hc=e=>({type:`DROP`,payload:e}),gc=e=>({type:`DROP_PENDING`,payload:e}),_c=()=>({type:`DROP_ANIMATION_FINISHED`,payload:null}),vc=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Y(i,`LIFT`)){r(i);return}let{id:a,clientSelection:o,movementMode:s}=i.payload,c=t();c.phase===`DROP_ANIMATING`&&n(mc({completed:c.completed})),t().phase!==`IDLE`&&K(),n(fc()),n(Zs({draggableId:a,movementMode:s}));let l={draggableId:a,scrollOptions:{shouldPublishImmediately:s===`SNAP`}},{critical:u,dimensions:d,viewport:f}=e.startPublishing(l);n($s({critical:u,dimensions:d,clientSelection:o,movementMode:s,viewport:f}))},yc=e=>()=>t=>n=>{Y(n,`INITIAL_PUBLISH`)&&e.dragging(),Y(n,`DROP_ANIMATE`)&&e.dropping(n.payload.completed.result.reason),(Y(n,`FLUSH`)||Y(n,`DROP_COMPLETE`))&&e.resting(),t(n)},bc={outOfTheWay:`cubic-bezier(0.2, 0, 0, 1)`,drop:`cubic-bezier(.2,1,.1,1)`},xc={opacity:{drop:0,combining:.7},scale:{drop:.75}},Sc={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Cc=`${Sc.outOfTheWay}s ${bc.outOfTheWay}`,wc={fluid:`opacity ${Cc}`,snap:`transform ${Cc}, opacity ${Cc}`,drop:e=>{let t=`${e}s ${bc.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Cc}`,placeholder:`height ${Cc}, width ${Cc}, margin ${Cc}`},Tc=e=>Ia(e,Na)?void 0:`translate(${e.x}px, ${e.y}px)`,Ec={moveTo:Tc,drop:(e,t)=>{let n=Tc(e);if(n)return t?`${n} scale(${xc.scale.drop})`:n}},{minDropTime:Dc,maxDropTime:Oc}=Sc,kc=Oc-Dc,Ac=1500,jc=.6,Mc=({current:e,destination:t,reason:n})=>{let r=za(e,t);if(r<=0)return Dc;if(r>=Ac)return Oc;let i=r/Ac,a=Dc+kc*i,o=n===`CANCEL`?a*jc:a;return Number(o.toFixed(2))},Nc=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{let{draggables:a,droppables:o}=n,s=hs(e),c=s?o[s]:null,l=o[t.descriptor.droppableId],u=Ls({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:c||l,viewport:r});return Fa(u,t.client.borderBox.center)},Pc=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!==`DROP`?{impact:Is({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type===`REORDER`?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:lo},didDropInsideDroppable:!0},Fc=({getState:e,dispatch:t})=>n=>r=>{if(!Y(r,`DROP`)){n(r);return}let i=e(),a=r.payload.reason;if(i.phase===`COLLECTING`){t(gc({reason:a}));return}if(i.phase===`IDLE`)return;i.phase===`DROP_PENDING`&&i.isWaiting&&K(),!(i.phase===`DRAGGING`||i.phase===`DROP_PENDING`)&&K();let o=i.critical,s=i.dimensions,c=s.draggables[i.critical.draggable.id],{impact:l,didDropInsideDroppable:u}=Pc({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u?ro(l):null,f=u?io(l):null,p={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:c.descriptor.id,type:c.descriptor.type,source:p,reason:a,mode:i.movementMode,destination:d,combine:f},h=Nc({impact:l,draggable:c,dimensions:s,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:l};if(!(!Ia(i.current.client.offset,h)||m.combine)){t(mc({completed:g}));return}let _=Mc({current:i.current.client.offset,destination:h,reason:a});t(pc({newHomeClientOffset:h,dropDuration:_,completed:g}))},Ic=()=>({x:window.pageXOffset,y:window.pageYOffset});function Lc(e){return{eventName:`scroll`,options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Rc({onWindowScroll:e}){function t(){e(Ic())}let n=ha(t),r=Lc(n),i=_a;function a(){return i!==_a}function o(){a()&&K(),i=ya(window,[r])}function s(){!a()&&K(),n.cancel(),i(),i=_a}return{start:o,stop:s,isActive:a}}var zc=e=>Y(e,`DROP_COMPLETE`)||Y(e,`DROP_ANIMATE`)||Y(e,`FLUSH`),Bc=e=>{let t=Rc({onWindowScroll:t=>{e.dispatch(oc({newScroll:t}))}});return e=>n=>{!t.isActive()&&Y(n,`INITIAL_PUBLISH`)&&t.start(),t.isActive()&&zc(n)&&t.stop(),e(n)}},Vc=e=>{let t=!1,n=!1,r=setTimeout(()=>{n=!0}),i=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=()=>t,i},Hc=()=>{let e=[],t=t=>{let n=e.findIndex(e=>e.timerId===t);n===-1&&K();let[r]=e.splice(n,1);r.callback()};return{add:n=>{let r=setTimeout(()=>t(r)),i={timerId:r,callback:n};e.push(i)},flush:()=>{if(!e.length)return;let t=[...e];e.length=0,t.forEach(e=>{clearTimeout(e.timerId),e.callback()})}}},Uc=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Wc=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Gc=(e,t)=>{if(e===t)return!0;let n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Kc=(e,t)=>{t()},qc=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Jc(e,t,n,r){if(!e){n(r(t));return}let i=Vc(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var Yc=(e,t)=>{let n=Hc(),r=null,i=(t,n)=>{r&&K(),Kc(`onBeforeCapture`,()=>{let r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},a=(t,n)=>{r&&K(),Kc(`onBeforeDragStart`,()=>{let r=e().onBeforeDragStart;r&&r(qc(t,n))})},o=(i,a)=>{r&&K();let o=qc(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add(()=>{Kc(`onDragStart`,()=>Jc(e().onDragStart,o,t,Aa.onDragStart))})},s=(i,a)=>{let o=ro(a),s=io(a);!r&&K();let c=!Gc(i,r.lastCritical);c&&(r.lastCritical=i);let l=!Uc(r.lastLocation,o);l&&(r.lastLocation=o);let u=!Wc(r.lastCombine,s);if(u&&(r.lastCombine=s),!c&&!l&&!u)return;let d={...qc(i,r.mode),combine:s,destination:o};n.add(()=>{Kc(`onDragUpdate`,()=>Jc(e().onDragUpdate,d,t,Aa.onDragUpdate))})},c=()=>{!r&&K(),n.flush()},l=n=>{!r&&K(),r=null,Kc(`onDragEnd`,()=>Jc(e().onDragEnd,n,t,Aa.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:s,flush:c,drop:l,abort:()=>{if(!r)return;let e={...qc(r.lastCritical,r.mode),combine:null,destination:null,reason:`CANCEL`};l(e)}}},Xc=(e,t)=>{let n=Yc(e,t);return e=>t=>r=>{if(Y(r,`BEFORE_INITIAL_CAPTURE`)){n.beforeCapture(r.payload.draggableId,r.payload.movementMode);return}if(Y(r,`INITIAL_PUBLISH`)){let e=r.payload.critical;n.beforeStart(e,r.payload.movementMode),t(r),n.start(e,r.payload.movementMode);return}if(Y(r,`DROP_COMPLETE`)){let e=r.payload.completed.result;n.flush(),t(r),n.drop(e);return}if(t(r),Y(r,`FLUSH`)){n.abort();return}let i=e.getState();i.phase===`DRAGGING`&&n.update(i.critical,i.impact)}},Zc=e=>t=>n=>{if(!Y(n,`DROP_ANIMATION_FINISHED`)){t(n);return}let r=e.getState();r.phase!==`DROP_ANIMATING`&&K(),e.dispatch(mc({completed:r.completed}))},Qc=e=>{let t=null,n=null;function r(){n&&=(cancelAnimationFrame(n),null),t&&=(t(),null)}return i=>a=>{if((Y(a,`FLUSH`)||Y(a,`DROP_COMPLETE`)||Y(a,`DROP_ANIMATION_FINISHED`))&&r(),i(a),!Y(a,`DROP_ANIMATE`))return;let o={eventName:`scroll`,options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase===`DROP_ANIMATING`&&e.dispatch(_c())}};n=requestAnimationFrame(()=>{n=null,t=ya(window,[o])})}},$c=e=>()=>t=>n=>{(Y(n,`DROP_COMPLETE`)||Y(n,`FLUSH`)||Y(n,`DROP_ANIMATE`))&&e.stopPublishing(),t(n)},el=e=>{let t=!1;return()=>n=>r=>{if(Y(r,`INITIAL_PUBLISH`)){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),t){if(Y(r,`FLUSH`)){t=!1,e.tryRestoreFocusRecorded();return}if(Y(r,`DROP_COMPLETE`)){t=!1;let n=r.payload.completed.result;n.combine&&e.tryShiftRecord(n.draggableId,n.combine.draggableId),e.tryRestoreFocusRecorded()}}}},tl=e=>Y(e,`DROP_COMPLETE`)||Y(e,`DROP_ANIMATE`)||Y(e,`FLUSH`),nl=e=>t=>n=>r=>{if(tl(r)){e.stop(),n(r);return}if(Y(r,`INITIAL_PUBLISH`)){n(r);let i=t.getState();i.phase!==`DRAGGING`&&K(),e.start(i);return}n(r),e.scroll(t.getState())},rl=e=>t=>n=>{if(t(n),!Y(n,`PUBLISH_WHILE_DRAGGING`))return;let r=e.getState();r.phase===`DROP_PENDING`&&(r.isWaiting||e.dispatch(hc({reason:r.reason})))},il=z,al=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>_e(Xs,il(he(yc(n),$c(e),vc(e),Fc,Zc,Qc,rl,nl(a),Bc,el(t),Xc(r,i)))),ol=()=>({additions:{},removals:{},modified:{}});function sl({registry:e,callbacks:t}){let n=ol(),r=null,i=()=>{r||=(t.collectionStarting(),requestAnimationFrame(()=>{r=null;let{additions:i,removals:a,modified:o}=n,s=Object.keys(i).map(t=>e.draggable.getById(t).getDimension(Na)).sort((e,t)=>e.descriptor.index-t.descriptor.index),c=Object.keys(o).map(t=>{let n=e.droppable.getById(t).callbacks.getScrollWhileDragging();return{droppableId:t,scroll:n}}),l={additions:s,removals:Object.keys(a),modified:c};n=ol(),t.publish(l)}))};return{add:e=>{let t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],i()},remove:e=>{let t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=ol())}}}var cl=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{let i=Fa({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},ll=()=>{let e=document.documentElement;return!e&&K(),e},ul=()=>{let e=ll();return cl({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},dl=()=>{let e=Ic(),t=ul(),n=e.y,r=e.x,i=ll(),a=i.clientWidth,o=i.clientHeight,s=r+a,c=n+o;return{frame:ra({top:n,left:r,right:s,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:Na,displacement:Na}}}},fl=({critical:e,scrollOptions:t,registry:n})=>{let r=dl(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(e=>e.callbacks.getDimensionAndWatchScroll(i,t)),s=n.draggable.getAllByType(e.draggable.type).map(e=>e.getDimension(i));return{dimensions:{draggables:$a(s),droppables:Qa(o)},critical:e,viewport:r}};function pl(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!==`virtual`)}var ml=(e,t)=>{let n=null,r=sl({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(r,i)=>{!e.droppable.exists(r)&&K(),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},a=(r,i)=>{n&&(!e.droppable.exists(r)&&K(),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},o=(r,i)=>{n&&(!e.droppable.exists(r)&&K(),t.updateDroppableScroll({id:r,newScroll:i}))},s=(t,r)=>{n&&e.droppable.getById(t).callbacks.scroll(r)},c=()=>{if(!n)return;r.stop();let t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(e=>e.callbacks.dragStopped()),n.unsubscribe(),n=null},l=t=>{!n&&K();let i=n.critical.draggable;t.type===`ADDITION`&&pl(e,i,t.value)&&r.add(t.value),t.type===`REMOVAL`&&pl(e,i,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:s,updateDroppableScroll:o,startPublishing:t=>{n&&K();let r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},o=e.subscribe(l);return n={critical:a,unsubscribe:o},fl({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:c}},hl=(e,t)=>e.phase===`IDLE`?!0:e.phase!==`DROP_ANIMATING`||e.completed.result.draggableId===t?!1:e.completed.result.reason===`DROP`,gl=e=>{window.scrollBy(e.x,e.y)},_l=Za(e=>eo(e).filter(e=>!(!e.isEnabled||!e.frame))),vl=(e,t)=>_l(t).find(t=>(!t.frame&&K(),ys(t.frame.pageMarginBox)(e)))||null,yl=({center:e,destination:t,droppables:n})=>{if(t){let e=n[t];return e.frame?e:null}return vl(e,n)},bl={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1},xl=(e,t,n=()=>bl)=>{let r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},Sl=({startOfRange:e,endOfRange:t,current:n})=>{let r=t-e;return r===0?0:(n-e)/r},Cl=1,wl=(e,t,n=()=>bl)=>{let r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Cl;let i=1-Sl({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=r.maxPixelScroll*r.ease(i);return Math.ceil(a)},Tl=(e,t,n)=>{let r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,s=a,c=Date.now()-o;if(c>=a)return e;if(c<i)return Cl;let l=Sl({startOfRange:i,endOfRange:s,current:c}),u=e*r.ease(l);return Math.ceil(u)},El=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{let a=wl(e,t,i);return a===0?0:r?Math.max(Tl(a,n,i),Cl):a},Dl=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=xl(e,r,a);return t[r.end]<t[r.start]?El({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*El({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},Ol=({container:e,subject:t,proposedScroll:n})=>{let r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}},kl=Va(e=>e===0?0:e),Al=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},s=Dl({container:t,distanceToEdges:o,dragStartTime:e,axis:ho,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),c=Dl({container:t,distanceToEdges:o,dragStartTime:e,axis:go,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),l=kl({x:c,y:s});if(Ia(l,Na))return null;let u=Ol({container:t,subject:n,proposedScroll:l});return u?Ia(u,Na)?null:u:null},jl=Va(e=>e===0?0:e>0?1:-1),Ml=(()=>{let e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:n,change:r})=>{let i=Pa(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return Ia(a,Na)?null:a}})(),Nl=({max:e,current:t,change:n})=>{let r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=jl(n),a=Ml({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},Pl=(e,t)=>Nl({current:e.scroll.current,max:e.scroll.max,change:t}),Fl=(e,t)=>{if(!Pl(e,t))return null;let n=e.scroll.max,r=e.scroll.current;return Ml({current:r,max:n,change:t})},Il=(e,t)=>{let n=e.frame;return n?Nl({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Ll=(e,t)=>{let n=e.frame;return!n||!Il(e,t)?null:Ml({current:n.scroll.current,max:n.scroll.max,change:t})},Rl=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=Al({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&Pl(e,o)?o:null},zl=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=e.frame;if(!o)return null;let s=Al({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return s&&Il(e,s)?s:null},Bl=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{let o=e.current.page.borderBoxCenter,s=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){let i=e.viewport,c=Rl({dragStartTime:t,viewport:i,subject:s,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(c){r(c);return}}let c=yl({center:o,destination:hs(e.impact),droppables:e.dimensions.droppables});if(!c)return;let l=zl({dragStartTime:t,droppable:c,subject:s,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});l&&i(c.descriptor.id,l)},Vl=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>bl})=>{let r=ha(e),i=ha(t),a=null,o=e=>{!a&&K();let{shouldUseTimeDampening:t,dragStartTime:o}=a;Bl({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:t,getAutoScrollerOptions:n})};return{start:e=>{a&&K();let t=Date.now(),r=!1,i=()=>{r=!0};Bl({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:i,scrollDroppable:i,getAutoScrollerOptions:n}),a={dragStartTime:t,shouldUseTimeDampening:r},r&&o(e)},stop:()=>{a&&=(r.cancel(),i.cancel(),null)},scroll:o}},Hl=({move:e,scrollDroppable:t,scrollWindow:n})=>{let r=(t,n)=>{let r=Pa(t.current.client.selection,n);e({client:r})},i=(e,n)=>{if(!Il(e,n))return n;let r=Ll(e,n);if(!r)return t(e.descriptor.id,n),null;let i=Fa(n,r);return t(e.descriptor.id,i),Fa(n,i)},a=(e,t,r)=>{if(!e||!Pl(t,r))return r;let i=Fl(t,r);if(!i)return n(r),null;let a=Fa(r,i);return n(a),Fa(r,a)};return e=>{let t=e.scrollJumpRequest;if(!t)return;let n=hs(e.impact);!n&&K();let o=i(e.dimensions.droppables[n],t);if(!o)return;let s=e.viewport,c=a(e.isWindowScrollAllowed,s,o);c&&r(e,c)}},Ul=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{let i=Vl({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=Hl({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{if(!(r().disabled||e.phase!==`DRAGGING`)){if(e.movementMode===`FLUID`){i.scroll(e);return}e.scrollJumpRequest&&a(e)}},start:i.start,stop:i.stop}},Wl=`data-rfd`,Gl=(()=>{let e=`${Wl}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Kl=(()=>{let e=`${Wl}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ql=(()=>{let e=`${Wl}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Jl={contextId:`${Wl}-scroll-container-context-id`},Yl=e=>t=>`[${t}="${e}"]`,Xl=(e,t)=>e.map(e=>{let n=e.styles[t];return n?`${e.selector} { ${n} }`:``}).join(` `),Zl=`pointer-events: none;`,Ql=e=>{let t=Yl(e),n=(()=>{let e=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Gl.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:e,dragging:Zl,dropAnimating:e}}})(),r=(()=>{let e=`
      transition: ${wc.outOfTheWay};
    `;return{selector:t(Kl.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),i={selector:t(ql.contextId),styles:{always:`overflow-anchor: none;`}},a=[r,n,i,{selector:`body`,styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Xl(a,`always`),resting:Xl(a,`resting`),dragging:Xl(a,`dragging`),dropAnimating:Xl(a,`dropAnimating`),userCancel:Xl(a,`userCancel`)}},$l=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0?H.useLayoutEffect:H.useEffect,eu=()=>{let e=document.querySelector(`head`);return!e&&K(),e},tu=e=>{let t=document.createElement(`style`);return e&&t.setAttribute(`nonce`,e),t.type=`text/css`,t};function nu(e,t){let n=q(()=>Ql(e),[e]),r=(0,H.useRef)(null),i=(0,H.useRef)(null),a=J(Za(e=>{let t=i.current;!t&&K(),t.textContent=e}),[]),o=J(e=>{let t=r.current;!t&&K(),t.textContent=e},[]);$l(()=>{!(!r.current&&!i.current)&&K();let s=tu(t),c=tu(t);return r.current=s,i.current=c,s.setAttribute(`${Wl}-always`,e),c.setAttribute(`${Wl}-dynamic`,e),eu().appendChild(s),eu().appendChild(c),o(n.always),a(n.resting),()=>{let e=e=>{let t=e.current;!t&&K(),eu().removeChild(t),e.current=null};e(r),e(i)}},[t,o,a,n.always,n.resting,e]);let s=J(()=>a(n.dragging),[a,n.dragging]),c=J(e=>{if(e===`DROP`){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),l=J(()=>{i.current&&a(n.resting)},[a,n.resting]);return q(()=>({dragging:s,dropping:c,resting:l}),[s,c,l])}function ru(e,t){return Array.from(e.querySelectorAll(t))}var iu=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function au(e){return e instanceof iu(e).HTMLElement}function ou(e,t){let n=`[${Gl.contextId}="${e}"]`,r=ru(document,n);if(!r.length)return null;let i=r.find(e=>e.getAttribute(Gl.draggableId)===t);return!i||!au(i)?null:i}function su(e){let t=(0,H.useRef)({}),n=(0,H.useRef)(null),r=(0,H.useRef)(null),i=(0,H.useRef)(!1),a=J(function(e,n){let r={id:e,focus:n};return t.current[e]=r,function(){let n=t.current;n[e]!==r&&delete n[e]}},[]),o=J(function(t){let n=ou(e,t);n&&n!==document.activeElement&&n.focus()},[e]),s=J(function(e,t){n.current===e&&(n.current=t)},[]),c=J(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;let e=n.current;e&&o(e)}))},[o]),l=J(function(e){n.current=null;let t=document.activeElement;t&&t.getAttribute(Gl.draggableId)===e&&(n.current=e)},[]);return $l(()=>(i.current=!0,function(){i.current=!1;let e=r.current;e&&cancelAnimationFrame(e)}),[]),q(()=>({register:a,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:s}),[a,l,c,s])}function cu(){let e={draggables:{},droppables:{}},t=[];function n(e){return t.push(e),function(){let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}function r(e){t.length&&t.forEach(t=>t(e))}function i(t){return e.draggables[t]||null}function a(e){let t=i(e);return!t&&K(),t}let o={register:t=>{e.draggables[t.descriptor.id]=t,r({type:`ADDITION`,value:t})},update:(t,n)=>{let r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{let n=t.descriptor.id,a=i(n);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[n],e.droppables[t.descriptor.droppableId]&&r({type:`REMOVAL`,value:t}))},getById:a,findById:i,exists:e=>!!i(e),getAllByType:t=>Object.values(e.draggables).filter(e=>e.descriptor.type===t)};function s(t){return e.droppables[t]||null}function c(e){let t=s(e);return!t&&K(),t}let l={register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{let n=s(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:c,findById:s,exists:e=>!!s(e),getAllByType:t=>Object.values(e.droppables).filter(e=>e.descriptor.type===t)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:l,subscribe:n,clean:u}}function lu(){let e=q(cu,[]);return(0,H.useEffect)(()=>function(){e.clean()},[e]),e}var uu=H.createContext(null),du=()=>{let e=document.body;return!e&&K(),e},fu={position:`absolute`,width:`1px`,height:`1px`,margin:`-1px`,border:`0`,padding:`0`,overflow:`hidden`,clip:`rect(0 0 0 0)`,"clip-path":`inset(100%)`},pu=e=>`rfd-announcement-${e}`;function mu(e){let t=q(()=>pu(e),[e]),n=(0,H.useRef)(null);return(0,H.useEffect)(function(){let e=document.createElement(`div`);return n.current=e,e.id=t,e.setAttribute(`aria-live`,`assertive`),e.setAttribute(`aria-atomic`,`true`),ue(e.style,fu),du().appendChild(e),function(){setTimeout(function(){let t=du();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),J(e=>{let t=n.current;if(t){t.textContent=e;return}},[])}var hu={separator:`::`};function gu(e,t=hu){let n=H.useId();return q(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function _u({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function vu({contextId:e,text:t}){let n=gu(`hidden-text`,{separator:`-`}),r=q(()=>_u({contextId:e,uniqueId:n}),[n,e]);return(0,H.useEffect)(function(){let e=document.createElement(`div`);return e.id=r,e.textContent=t,e.style.display=`none`,du().appendChild(e),function(){let t=du();t.contains(e)&&t.removeChild(e)}},[r,t]),r}var yu=H.createContext(null);function bu(e){let t=(0,H.useRef)(e);return(0,H.useEffect)(()=>{t.current=e}),t}function xu(){let e=null;function t(){return!!e}function n(t){return t===e}function r(t){e&&K();let n={abandon:t};return e=n,n}function i(){!e&&K(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function Su(e){return e.phase===`IDLE`||e.phase===`DROP_ANIMATING`?!1:e.isDragging}var Cu=9,wu=13,Tu=27,Eu=32,Du=33,Ou=34,ku=35,Au=36,ju=37,Mu=38,Nu=39,Pu=40,Fu={[wu]:!0,[Cu]:!0},Iu=e=>{Fu[e.keyCode]&&e.preventDefault()},Lu=(()=>{let e=`visibilitychange`;return typeof document>`u`?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(e=>`on${e}`in document)||e})(),Ru=0,zu=5;function Bu(e,t){return Math.abs(t.x-e.x)>=zu||Math.abs(t.y-e.y)>=zu}var Vu={type:`IDLE`};function Hu({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:`mousemove`,fn:e=>{let{button:t,clientX:i,clientY:a}=e;if(t!==Ru)return;let o={x:i,y:a},s=n();if(s.type===`DRAGGING`){e.preventDefault(),s.actions.move(o);return}s.type!==`PENDING`&&K();let c=s.point;if(!Bu(c,o))return;e.preventDefault();let l=s.actions.fluidLift(o);r({type:`DRAGGING`,actions:l})}},{eventName:`mouseup`,fn:r=>{let i=n();if(i.type!==`DRAGGING`){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:`mousedown`,fn:t=>{n().type===`DRAGGING`&&t.preventDefault(),e()}},{eventName:`keydown`,fn:t=>{if(n().type===`PENDING`){e();return}if(t.keyCode===Tu){t.preventDefault(),e();return}Iu(t)}},{eventName:`resize`,fn:e},{eventName:`scroll`,options:{passive:!0,capture:!1},fn:()=>{n().type===`PENDING`&&e()}},{eventName:`webkitmouseforcedown`,fn:t=>{let r=n();if(r.type===`IDLE`&&K(),r.actions.shouldRespectForcePress()){e();return}t.preventDefault()}},{eventName:Lu,fn:e}]}function Uu(e){let t=(0,H.useRef)(Vu),n=(0,H.useRef)(_a),r=q(()=>({eventName:`mousedown`,fn:function(t){if(t.defaultPrevented||t.button!==Ru||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;let r=e.findClosestDraggableId(t);if(!r)return;let i=e.tryGetLock(r,o,{sourceEvent:t});if(!i)return;t.preventDefault();let a={x:t.clientX,y:t.clientY};n.current(),l(i,a)}}),[e]),i=q(()=>({eventName:`webkitmouseforcewillbegin`,fn:t=>{if(t.defaultPrevented)return;let n=e.findClosestDraggableId(t);if(!n)return;let r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}),[e]),a=J(function(){n.current=ya(window,[i,r],{passive:!1,capture:!0})},[i,r]),o=J(()=>{t.current.type!==`IDLE`&&(t.current=Vu,n.current(),a())},[a]),s=J(()=>{let e=t.current;o(),e.type===`DRAGGING`&&e.actions.cancel({shouldBlockNextClick:!0}),e.type===`PENDING`&&e.actions.abort()},[o]),c=J(function(){let e={capture:!0,passive:!1},r=Hu({cancel:s,completed:o,getPhase:()=>t.current,setPhase:e=>{t.current=e}});n.current=ya(window,r,e)},[s,o]),l=J(function(e,n){t.current.type!==`IDLE`&&K(),t.current={type:`PENDING`,point:n,actions:e},c()},[c]);$l(function(){return a(),function(){n.current()}},[a])}function Wu(){}var Gu={[Ou]:!0,[Du]:!0,[Au]:!0,[ku]:!0};function Ku(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:`keydown`,fn:t=>{if(t.keyCode===Tu){t.preventDefault(),n();return}if(t.keyCode===Eu){t.preventDefault(),r();return}if(t.keyCode===Pu){t.preventDefault(),e.moveDown();return}if(t.keyCode===Mu){t.preventDefault(),e.moveUp();return}if(t.keyCode===Nu){t.preventDefault(),e.moveRight();return}if(t.keyCode===ju){t.preventDefault(),e.moveLeft();return}if(Gu[t.keyCode]){t.preventDefault();return}Iu(t)}},{eventName:`mousedown`,fn:n},{eventName:`mouseup`,fn:n},{eventName:`click`,fn:n},{eventName:`touchstart`,fn:n},{eventName:`resize`,fn:n},{eventName:`wheel`,fn:n,options:{passive:!0}},{eventName:Lu,fn:n}]}function qu(e){let t=(0,H.useRef)(Wu),n=q(()=>({eventName:`keydown`,fn:function(n){if(n.defaultPrevented||n.keyCode!==Eu)return;let i=e.findClosestDraggableId(n);if(!i)return;let a=e.tryGetLock(i,c,{sourceEvent:n});if(!a)return;n.preventDefault();let o=!0,s=a.snapLift();t.current();function c(){!o&&K(),o=!1,t.current(),r()}t.current=ya(window,Ku(s,c),{capture:!0,passive:!1})}}),[e]),r=J(function(){t.current=ya(window,[n],{passive:!1,capture:!0})},[n]);$l(function(){return r(),function(){t.current()}},[r])}var Ju={type:`IDLE`},Yu=120,Xu=.15;function Zu({cancel:e,getPhase:t}){return[{eventName:`orientationchange`,fn:e},{eventName:`resize`,fn:e},{eventName:`contextmenu`,fn:e=>{e.preventDefault()}},{eventName:`keydown`,fn:n=>{if(t().type!==`DRAGGING`){e();return}n.keyCode===Tu&&n.preventDefault(),e()}},{eventName:Lu,fn:e}]}function Qu({cancel:e,completed:t,getPhase:n}){return[{eventName:`touchmove`,options:{capture:!1},fn:t=>{let r=n();if(r.type!==`DRAGGING`){e();return}r.hasMoved=!0;let{clientX:i,clientY:a}=t.touches[0],o={x:i,y:a};t.preventDefault(),r.actions.move(o)}},{eventName:`touchend`,fn:r=>{let i=n();if(i.type!==`DRAGGING`){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:`touchcancel`,fn:t=>{if(n().type!==`DRAGGING`){e();return}t.preventDefault(),e()}},{eventName:`touchforcechange`,fn:t=>{let r=n();r.type===`IDLE`&&K();let i=t.touches[0];if(!i||!(i.force>=Xu))return;let a=r.actions.shouldRespectForcePress();if(r.type===`PENDING`){a&&e();return}if(a){if(r.hasMoved){t.preventDefault();return}e();return}t.preventDefault()}},{eventName:Lu,fn:e}]}function $u(e){let t=(0,H.useRef)(Ju),n=(0,H.useRef)(_a),r=J(function(){return t.current},[]),i=J(function(e){t.current=e},[]),a=q(()=>({eventName:`touchstart`,fn:function(t){if(t.defaultPrevented)return;let r=e.findClosestDraggableId(t);if(!r)return;let i=e.tryGetLock(r,s,{sourceEvent:t});if(!i)return;let{clientX:a,clientY:o}=t.touches[0],c={x:a,y:o};n.current(),d(i,c)}}),[e]),o=J(function(){n.current=ya(window,[a],{capture:!0,passive:!1})},[a]),s=J(()=>{let e=t.current;e.type!==`IDLE`&&(e.type===`PENDING`&&clearTimeout(e.longPressTimerId),i(Ju),n.current(),o())},[o,i]),c=J(()=>{let e=t.current;s(),e.type===`DRAGGING`&&e.actions.cancel({shouldBlockNextClick:!0}),e.type===`PENDING`&&e.actions.abort()},[s]),l=J(function(){let e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:r},i=ya(window,Qu(t),e),a=ya(window,Zu(t),e);n.current=function(){i(),a()}},[c,r,s]),u=J(function(){let e=r();e.type!==`PENDING`&&K();let t=e.actions.fluidLift(e.point);i({type:`DRAGGING`,actions:t,hasMoved:!1})},[r,i]),d=J(function(e,t){r().type!==`IDLE`&&K();let n=setTimeout(u,Yu);i({type:`PENDING`,point:t,actions:e,longPressTimerId:n}),l()},[l,r,i,u]);$l(function(){return o(),function(){n.current();let e=r();e.type===`PENDING`&&(clearTimeout(e.longPressTimerId),i(Ju))}},[r,o,i]),$l(function(){return ya(window,[{eventName:`touchmove`,fn:()=>{},options:{capture:!1,passive:!1}}])},[])}var ed=[`input`,`button`,`textarea`,`select`,`option`,`optgroup`,`video`,`audio`];function td(e,t){if(t==null)return!1;if(ed.includes(t.tagName.toLowerCase()))return!0;let n=t.getAttribute(`contenteditable`);return n===`true`||n===``?!0:t===e?!1:td(e,t.parentElement)}function nd(e,t){let n=t.target;return au(n)?td(e,n):!1}var rd=e=>ra(e.getBoundingClientRect()).center;function id(e){return e instanceof iu(e).Element}var ad=(()=>{let e=`matches`;return typeof document>`u`?e:[e,`msMatchesSelector`,`webkitMatchesSelector`].find(e=>e in Element.prototype)||e})();function od(e,t){return e==null?null:e[ad](t)?e:od(e.parentElement,t)}function sd(e,t){return e.closest?e.closest(t):od(e,t)}function cd(e){return`[${Gl.contextId}="${e}"]`}function ld(e,t){let n=t.target;if(!id(n))return null;let r=cd(e),i=sd(n,r);return!i||!au(i)?null:i}function ud(e,t){let n=ld(e,t);return n?n.getAttribute(Gl.draggableId):null}function dd(e,t){let n=`[${Kl.contextId}="${e}"]`,r=ru(document,n).find(e=>e.getAttribute(Kl.id)===t);return!r||!au(r)?null:r}function fd(e){e.preventDefault()}function pd({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function md({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;let i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!hl(t.getState(),r))}function hd({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!md({lockAPI:e,store:n,registry:r,draggableId:i}))return null;let s=r.draggable.getById(i),c=dd(t,s.descriptor.id);if(!c||o&&!s.options.canDragInteractiveElements&&nd(c,o))return null;let l=e.claim(a||_a),u=`PRE_DRAG`;function d(){return s.options.shouldRespectForcePress}function f(){return e.isActive(l)}function p(e,t){pd({expected:e,phase:u,isLockActive:f,shouldWarn:!0})&&n.dispatch(t())}let m=p.bind(null,`DRAGGING`);function h(t){function r(){e.release(),u=`COMPLETED`}u!==`PRE_DRAG`&&(r(),K()),n.dispatch(Qs(t.liftActionArgs)),u=`DRAGGING`;function i(e,i={shouldBlockNextClick:!1}){if(t.cleanup(),i.shouldBlockNextClick){let e=ya(window,[{eventName:`click`,fn:fd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}r(),n.dispatch(hc({reason:e}))}return{isActive:()=>pd({expected:`DRAGGING`,phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,drop:e=>i(`DROP`,e),cancel:e=>i(`CANCEL`,e),...t.actions}}function g(e){let t=ha(e=>{m(()=>ac({client:e}))});return{...h({liftActionArgs:{id:i,clientSelection:e,movementMode:`FLUID`},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}}function _(){return h({liftActionArgs:{id:i,clientSelection:rd(c),movementMode:`SNAP`},cleanup:_a,actions:{moveUp:()=>m(cc),moveRight:()=>m(uc),moveDown:()=>m(lc),moveLeft:()=>m(dc)}})}function v(){pd({expected:`PRE_DRAG`,phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>pd({expected:`PRE_DRAG`,phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:g,snapLift:_,abort:v}}var gd=[Uu,qu,$u];function _d({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){let a=[...i?gd:[],...r||[]],o=(0,H.useState)(()=>xu())[0],s=J(function(e,t){Su(e)&&!Su(t)&&o.tryAbandon()},[o]);$l(function(){let e=t.getState();return t.subscribe(()=>{let n=t.getState();s(e,n),e=n})},[o,t,s]),$l(()=>o.tryAbandon,[o.tryAbandon]);let c=J(e=>md({lockAPI:o,registry:n,store:t,draggableId:e}),[o,n,t]),l=J((r,i,a)=>hd({lockAPI:o,registry:n,contextId:e,store:t,draggableId:r,forceSensorStop:i||null,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null}),[e,o,n,t]),u=J(t=>ud(e,t),[e]),d=J(e=>{let t=n.draggable.findById(e);return t?t.options:null},[n.draggable]),f=J(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!==`IDLE`&&t.dispatch(fc()))},[o,t]),p=J(()=>o.isClaimed(),[o]),m=q(()=>({canGetLock:c,tryGetLock:l,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:p}),[c,l,u,d,f,p]);for(let e=0;e<a.length;e++)a[e](m)}var vd=e=>({onBeforeCapture:t=>{(0,$i.flushSync)(()=>{e.onBeforeCapture&&e.onBeforeCapture(t)})},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),yd=e=>({...bl,...e.autoScrollerOptions,durationDampening:{...bl.durationDampening,...e.autoScrollerOptions}});function bd(e){return!e.current&&K(),e.current}function xd(e){let{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=(0,H.useRef)(null),s=bu(e),c=J(()=>vd(s.current),[s]),l=J(()=>yd(s.current),[s]),u=mu(t),d=vu({contextId:t,text:a}),f=nu(t,i),p=J(e=>{bd(o).dispatch(e)},[]),m=q(()=>re({publishWhileDragging:ec,updateDroppableScroll:nc,updateDroppableIsEnabled:rc,updateDroppableIsCombineEnabled:ic,collectionStarting:tc},p),[p]),h=lu(),g=q(()=>ml(h,m),[h,m]),_=q(()=>Ul({scrollWindow:gl,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:l,...re({move:ac},p)}),[g.scrollDroppable,p,l]),v=su(t),y=q(()=>al({announce:u,autoScroller:_,dimensionMarshal:g,focusMarshal:v,getResponders:c,styleMarshal:f}),[u,_,g,v,c,f]);o.current=y;let b=J(()=>{let e=bd(o);e.getState().phase!==`IDLE`&&e.dispatch(fc())},[]),x=J(()=>{let e=bd(o).getState();return e.phase===`DROP_ANIMATING`?!0:e.phase===`IDLE`?!1:e.isDragging},[]),S=q(()=>({isDragging:x,tryAbort:b}),[x,b]);n(S);let C=J(e=>hl(bd(o).getState(),e),[]),w=J(()=>vs(bd(o).getState()),[]),T=q(()=>({marshal:g,focus:v,contextId:t,canLift:C,isMovementAllowed:w,dragHandleUsageInstructionsId:d,registry:h}),[t,g,d,v,C,w,h]);return _d({contextId:t,store:y,registry:h,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),(0,H.useEffect)(()=>b,[b]),H.createElement(yu.Provider,{value:T},H.createElement(ne,{context:uu,store:y},e.children))}function Sd(){return H.useId()}function Cd(e){let t=Sd(),n=e.dragHandleUsageInstructions||Aa.dragHandleUsageInstructions;return H.createElement(Sa,null,r=>H.createElement(xd,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}var wd={dragging:5e3,dropAnimating:4500},Td=(e,t)=>t?wc.drop(t.duration):e?wc.snap:wc.fluid,Ed=(e,t)=>{if(e)return t?xc.opacity.drop:xc.opacity.combining},Dd=e=>e.forceShouldAnimate==null?e.mode===`SNAP`:e.forceShouldAnimate;function Od(e){let t=e.dimension.client,{offset:n,combineWith:r,dropping:i}=e,a=!!r,o=Dd(e),s=!!i,c=s?Ec.drop(n,a):Ec.moveTo(n);return{position:`fixed`,top:t.marginBox.top,left:t.marginBox.left,boxSizing:`border-box`,width:t.borderBox.width,height:t.borderBox.height,transition:Td(o,i),transform:c,opacity:Ed(a,s),zIndex:s?wd.dropAnimating:wd.dragging,pointerEvents:`none`}}function kd(e){return{transform:Ec.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:`none`}}function Ad(e){return e.type===`DRAGGING`?Od(e):kd(e)}function jd(e,t,n=Na){let r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=pa(i,r),o=fa(a,n),s={client:a,tagName:t.tagName.toLowerCase(),display:r.display},c={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:s,displaceBy:c,client:a,page:o}}function Md(e){let t=gu(`draggable`),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:s}=e,c=q(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:s}),[a,s,o]),l=J(e=>{let t=i();return!t&&K(),jd(n,t,e)},[n,i]),u=q(()=>({uniqueId:t,descriptor:n,options:c,getDimension:l}),[n,l,c,t]),d=(0,H.useRef)(u),f=(0,H.useRef)(!0);$l(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),$l(()=>{if(f.current){f.current=!1;return}let e=d.current;d.current=u,r.draggable.update(u,e)},[u,r.draggable])}var Nd=H.createContext(null);function Pd(e){let t=(0,H.useContext)(e);return!t&&K(),t}function Fd(e){e.preventDefault()}var Id=e=>{let t=(0,H.useRef)(null),n=J((e=null)=>{t.current=e},[]),r=J(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=Pd(yu),{type:s,droppableId:c}=Pd(Nd),l=q(()=>({id:e.draggableId,index:e.index,type:s,droppableId:c}),[e.draggableId,e.index,s,c]),{children:u,draggableId:d,isEnabled:f,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:h,mapped:g,dropAnimationFinished:_}=e;if(!h){let e=q(()=>({descriptor:l,registry:o,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:f}),[l,o,r,m,p,f]);Md(e)}let v=q(()=>f?{tabIndex:0,role:`button`,"aria-describedby":a,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Fd}:null,[i,a,d,f]),y=J(e=>{g.type===`DRAGGING`&&g.dropping&&e.propertyName===`transform`&&(0,$i.flushSync)(_)},[_,g]),b=q(()=>{let e=Ad(g),t=g.type===`DRAGGING`&&g.dropping?y:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:e,onTransitionEnd:t},dragHandleProps:v}},[i,v,d,g,y,n]),x=q(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return H.createElement(H.Fragment,null,u(b,g.snapshot,x))},Ld=(e,t)=>e===t,Rd=e=>{let{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null},zd=e=>e.combine?e.combine.draggableId:null,Bd=e=>e.at&&e.at.type===`COMBINE`?e.at.combine.draggableId:null;function Vd(){let e=Za((e,t)=>({x:e,y:t})),t=Za((e,t,n=null,r=null,i=null)=>({isDragging:!0,isClone:t,isDropAnimating:!!i,dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null})),n=Za((e,n,r,i,a=null,o=null,s=null)=>({mapped:{type:`DRAGGING`,dropping:null,draggingOver:a,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,i,a,o,null)}}));return(r,i)=>{if(Su(r)){if(r.critical.draggable.id!==i.draggableId)return null;let t=r.current.client.offset,a=r.dimensions.draggables[i.draggableId],o=hs(r.impact),s=Bd(r.impact),c=r.forceShouldAnimate;return n(e(t.x,t.y),r.movementMode,a,i.isClone,o,s,c)}if(r.phase===`DROP_ANIMATING`){let e=r.completed;if(e.result.draggableId!==i.draggableId)return null;let n=i.isClone,a=r.dimensions.draggables[i.draggableId],o=e.result,s=o.mode,c=Rd(o),l=zd(o),u={duration:r.dropDuration,curve:bc.drop,moveTo:r.newHomeClientOffset,opacity:l?xc.opacity.drop:null,scale:l?xc.scale.drop:null};return{mapped:{type:`DRAGGING`,offset:r.newHomeClientOffset,dimension:a,dropping:u,draggingOver:c,combineWith:l,mode:s,forceShouldAnimate:null,snapshot:t(s,n,c,l,u)}}}return null}}function Hd(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Ud={mapped:{type:`SECONDARY`,offset:Na,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Hd(null)}};function Wd(){let e=Za((e,t)=>({x:e,y:t})),t=Za(Hd),n=Za((e,n=null,r)=>({mapped:{type:`SECONDARY`,offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}})),r=e=>e?n(Na,e,!0):null,i=(t,i,a,o)=>{let s=a.displaced.visible[t],c=!!(o.inVirtualList&&o.effected[t]),l=io(a),u=l&&l.draggableId===t?i:null;if(!s){if(!c)return r(u);if(a.displaced.invisible[t])return null;let i=La(o.displacedBy.point),s=e(i.x,i.y);return n(s,u,!0)}if(c)return r(u);let d=a.displacedBy.point,f=e(d.x,d.y);return n(f,u,s.shouldAnimate)};return(e,t)=>{if(Su(e))return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if(e.phase===`DROP_ANIMATING`){let n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}var Gd=se(()=>{let e=Vd(),t=Wd();return(n,r)=>e(n,r)||t(n,r)||Ud},{dropAnimationFinished:_c},null,{context:uu,areStatePropsEqual:Ld})(Id);function Kd(e){return Pd(Nd).isUsingCloneFor===e.draggableId&&!e.isClone?null:H.createElement(Gd,e)}function qd(e){let t=typeof e.isDragDisabled==`boolean`?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return H.createElement(Kd,ue({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var Jd=e=>t=>e===t,Yd=Jd(`scroll`),Xd=Jd(`auto`),Zd=(e,t)=>t(e.overflowX)||t(e.overflowY),Qd=e=>{let t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Zd(n,Yd)||Zd(n,Xd)},$d=()=>!1,ef=e=>e==null?null:e===document.body?$d()?e:null:e===document.documentElement?null:Qd(e)?e:ef(e.parentElement),tf=e=>({x:e.scrollLeft,y:e.scrollTop}),nf=e=>e?window.getComputedStyle(e).position===`fixed`?!0:nf(e.parentElement):!1,rf=e=>{let t=ef(e),n=nf(e);return{closestScrollable:t,isFixedOnPage:n}},af=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:s})=>{let c=(()=>{if(!s)return null;let{scrollSize:e,client:t}=s,n=cl({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:Na,displacement:Na}}}})(),l=i===`vertical`?ho:go,u=Ya({page:o,withPlaceholder:null,axis:l,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:t,client:a,page:o,frame:c,subject:u}},sf=(e,t)=>{let n=ma(e);if(!t||e!==t)return n;let r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,s=ia({top:r,right:o,bottom:a,left:i},n.border);return ca({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})},cf=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:s})=>{let c=n.closestScrollable,l=sf(e,c),u=fa(l,r),d=(()=>{if(!c)return null;let e=ma(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:fa(e,r),scroll:tf(c),scrollSize:t,shouldClipSubject:s}})();return af({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:l,page:u,closest:d})},lf={passive:!1},uf={passive:!0},df=e=>e.shouldPublishImmediately?lf:uf,ff=e=>e&&e.env.closestScrollable||null;function pf(e){let t=(0,H.useRef)(null),n=Pd(yu),r=gu(`droppable`),{registry:i,marshal:a}=n,o=bu(e),s=q(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=(0,H.useRef)(s),l=q(()=>Za((e,n)=>{!t.current&&K();let r={x:e,y:n};a.updateDroppableScroll(s.id,r)}),[s.id,a]),u=J(()=>{let e=t.current;return!e||!e.env.closestScrollable?Na:tf(e.env.closestScrollable)},[]),d=J(()=>{let e=u();l(e.x,e.y)},[u,l]),f=q(()=>ha(d),[d]),p=J(()=>{let e=t.current,n=ff(e);if(!(e&&n)&&K(),e.scrollOptions.shouldPublishImmediately){d();return}f()},[f,d]),m=J((e,r)=>{t.current&&K();let i=o.current,a=i.getDroppableRef();!a&&K();let c=rf(a),l={ref:a,descriptor:s,env:c,scrollOptions:r};t.current=l;let u=cf({ref:a,descriptor:s,env:c,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=c.closestScrollable;return d&&(d.setAttribute(Jl.contextId,n.contextId),d.addEventListener(`scroll`,p,df(l.scrollOptions))),u},[n.contextId,s,p,o]),h=J(()=>{let e=t.current,n=ff(e);return!(e&&n)&&K(),tf(n)},[]),g=J(()=>{let e=t.current;!e&&K();let n=ff(e);t.current=null,n&&(f.cancel(),n.removeAttribute(Jl.contextId),n.removeEventListener(`scroll`,p,df(e.scrollOptions)))},[p,f]),_=J(e=>{let n=t.current;!n&&K();let r=ff(n);!r&&K(),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),v=q(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:h,dragStopped:g,scroll:_}),[g,m,h,_]),y=q(()=>({uniqueId:r,descriptor:s,callbacks:v}),[v,s,r]);$l(()=>(c.current=y.descriptor,i.droppable.register(y),()=>{t.current&&g(),i.droppable.unregister(y)}),[v,s,g,y,a,i.droppable]),$l(()=>{t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),$l(()=>{t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function mf(){}var hf={width:0,height:0,margin:Ga},gf=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n===`close`?hf:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},_f=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{let r=gf({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:`border-box`,width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:`0`,flexGrow:`0`,pointerEvents:`none`,transition:n===`none`?null:wc.placeholder}},vf=H.memo(e=>{let t=(0,H.useRef)(null),n=J(()=>{t.current&&=(clearTimeout(t.current),null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[s,c]=(0,H.useState)(e.animate===`open`);(0,H.useEffect)(()=>s?r===`open`?t.current?mf:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):(n(),c(!1),mf):mf,[r,s,n]);let l=J(e=>{e.propertyName===`height`&&(i(),r===`close`&&a())},[r,a,i]),u=_f({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return H.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:l,ref:e.innerRef})}),yf=class extends H.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?`open`:`none`},this.onClose=()=>{this.state.animate===`close`&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:`open`}:t.isVisible?{isVisible:!0,data:t.data,animate:`close`}:{isVisible:!1,animate:`close`,data:null}:{isVisible:!!e.on,data:e.on,animate:`none`}}render(){if(!this.state.isVisible)return null;let e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}},bf=e=>{let t=(0,H.useContext)(yu);!t&&K();let{contextId:n,isMovementAllowed:r}=t,i=(0,H.useRef)(null),a=(0,H.useRef)(null),{children:o,droppableId:s,type:c,mode:l,direction:u,ignoreContainerClipping:d,isDropDisabled:f,isCombineEnabled:p,snapshot:m,useClone:h,updateViewportMaxScroll:g,getContainerForClone:_}=e,v=J(()=>i.current,[]),y=J((e=null)=>{i.current=e},[]);J(()=>a.current,[]);let b=J((e=null)=>{a.current=e},[]),x=J(()=>{r()&&g({maxScroll:ul()})},[r,g]);pf({droppableId:s,type:c,mode:l,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});let S=q(()=>H.createElement(yf,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:e,data:t,animate:r})=>H.createElement(vf,{placeholder:t,onClose:e,innerRef:b,animate:r,contextId:n,onTransitionEnd:x})),[n,x,e.placeholder,e.shouldAnimatePlaceholder,b]),C=q(()=>({innerRef:y,placeholder:S,droppableProps:{"data-rfd-droppable-id":s,"data-rfd-droppable-context-id":n}}),[n,s,S,y]),w=h?h.dragging.draggableId:null,T=q(()=>({droppableId:s,type:c,isUsingCloneFor:w}),[s,w,c]);function E(){if(!h)return null;let{dragging:e,render:t}=h,n=H.createElement(Kd,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(n,r)=>t(n,r,e));return $i.createPortal(n,_())}return H.createElement(Nd.Provider,{value:T},o(C,m),E())};function xf(){return!document.body&&K(),document.body}var Sf={mode:`standard`,type:`DEFAULT`,direction:`vertical`,isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:xf},Cf=e=>{let t={...e},n;for(n in Sf)e[n]===void 0&&(t={...t,[n]:Sf[n]});return t},wf=(e,t)=>e===t.droppable.type,Tf=(e,t)=>t.draggables[e.draggable.id],Ef=se(()=>{let e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Za(e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}})),r=Za((r,i,a,o,s,c)=>{let l=s.descriptor.id;if(s.descriptor.droppableId===r){let e=c?{render:c,dragging:n(s.descriptor)}:null,t={isDraggingOver:a,draggingOverWith:a?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!i)return t;if(!o)return e;let u={isDraggingOver:a,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}});return(n,i)=>{let a=Cf(i),o=a.droppableId,s=a.type,c=!a.isDropDisabled,l=a.renderClone;if(Su(n)){let e=n.critical;if(!wf(s,e))return t;let i=Tf(e,n.dimensions),a=hs(n.impact)===o;return r(o,c,a,a,i,l)}if(n.phase===`DROP_ANIMATING`){let e=n.completed;if(!wf(s,e.critical))return t;let i=Tf(e.critical,n.dimensions);return r(o,c,Rd(e.result)===o,hs(e.impact)===o,i,l)}if(n.phase===`IDLE`&&n.completed&&!n.shouldFlush){let r=n.completed;if(!wf(s,r.critical))return t;let i=hs(r.impact)===o,a=!!(r.impact.at&&r.impact.at.type===`COMBINE`),c=r.critical.droppable.id===o;return i?a?e:t:c?e:t}return t}},{updateViewportMaxScroll:sc},(e,t,n)=>({...Cf(n),...e,...t}),{context:uu,areStatePropsEqual:Ld})(bf),Df=C((0,U.jsx)(`path`,{d:`M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2m-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2`}),`DragIndicator`),Of={position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:`90%`,maxWidth:`800px`,bgcolor:`background.paper`,border:`2px solid #000`,boxShadow:24,p:4,display:`flex`,flexDirection:`column`,maxHeight:`90vh`};function kf({open:e,onClose:t}){let n=Ie(),{library:r}=oe(e=>e.knowledge),{isApiCommunicating:i}=oe(e=>e.case),[a,o]=(0,H.useState)(``),[c,l]=(0,H.useState)(``),[u,p]=(0,H.useState)([]);(0,H.useEffect)(()=>{e||(o(``),l(``),p([]))},[e]);let h=async()=>{if(!a.trim()||!c.trim()){alert(``);return}n(de(!0)),p([]);let e=`

# 
${JSON.stringify(r,null,2)}

# 
${c}

# 
- ****
- ID: 'k-001'\`refId\`
- 
- JSON

# JSON
[
  {
    "id": "ID",
    "text": "text",
    "details": "details",
    "refId": "ID (: 'k-001')",
    "type": "type",
    "options": "options"
  }
]
`;try{let t=new O;if(!t.isAvailable)throw alert(`Gemini APIID`),Error(`API not available`);let n=(await t.generateContent(e)).replace(/```json/g,``).replace(/```/g,``).trim(),r=JSON.parse(n).map(e=>({...e,id:He(),completed:!1,memo:``}));p(r)}catch(e){console.error(`AI-based flow generation failed:`,e),alert(`: ${e.message}`)}finally{n(de(!1))}},_=()=>{if(!a.trim()||u.length===0){alert(`1`);return}let e={id:`flow-${He()}`,name:a,description:`AI${c}`,tasks:u};n(te(e)),alert(`${a}`),t()},v=(e,t)=>{let n=[...u];n[e].text=t,p(n)},y=()=>{let e={id:He(),text:``,details:``,completed:!1,memo:``};p([...u,e])},b=e=>{let t=u.filter((t,n)=>n!==e);p(t)};return(0,U.jsx)(m,{open:e,onClose:t,children:(0,U.jsxs)(B,{sx:Of,children:[(0,U.jsx)(s,{variant:`h6`,component:`h2`,gutterBottom:!0,children:`AI`}),(0,U.jsxs)(B,{sx:{display:`flex`,flexDirection:`column`,gap:2,mb:2},children:[(0,U.jsx)(x,{label:``,variant:`outlined`,fullWidth:!0,value:a,onChange:e=>o(e.target.value)}),(0,U.jsx)(x,{label:` ()`,variant:`outlined`,fullWidth:!0,multiline:!0,rows:4,value:c,onChange:e=>l(e.target.value),placeholder:`: , `})]}),(0,U.jsxs)(B,{sx:{mb:2},children:[(0,U.jsx)(f,{variant:`contained`,onClick:h,disabled:i,children:i?(0,U.jsx)(ve,{size:24}):``}),(0,U.jsx)(f,{onClick:t,sx:{ml:1},children:``})]}),(0,U.jsx)(s,{variant:`subtitle1`,gutterBottom:!0,children:``}),(0,U.jsxs)(B,{sx:{flexGrow:1,overflow:`auto`,border:`1px solid #ccc`,p:1,borderRadius:1,minHeight:`200px`},children:[i&&(0,U.jsx)(B,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,height:`100%`},children:(0,U.jsx)(ve,{})}),!i&&u.length===0&&(0,U.jsx)(B,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,height:`100%`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})}),!i&&u.length>0&&(0,U.jsx)(Cd,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(u),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n),p(t)},children:(0,U.jsx)(Ef,{droppableId:`tasks`,children:e=>(0,U.jsxs)(g,{...e.droppableProps,ref:e.innerRef,dense:!0,children:[u.map((e,t)=>(0,U.jsx)(qd,{draggableId:String(e.id),index:t,children:n=>(0,U.jsxs)(I,{ref:n.innerRef,...n.draggableProps,secondaryAction:(0,U.jsx)(d,{edge:`end`,onClick:()=>b(t),children:(0,U.jsx)(P,{})}),children:[(0,U.jsx)(B,{...n.dragHandleProps,sx:{display:`flex`,alignItems:`center`,cursor:`grab`,mr:1.5},children:(0,U.jsx)(Df,{})}),(0,U.jsx)(x,{variant:`standard`,fullWidth:!0,value:e.text,onChange:e=>v(t,e.target.value)})]})},e.id)),e.placeholder]})})})]}),(0,U.jsx)(f,{onClick:y,sx:{mt:1},children:``}),(0,U.jsx)(B,{sx:{mt:`auto`,pt:2,display:`flex`,justifyContent:`flex-end`},children:(0,U.jsx)(f,{variant:`contained`,color:`primary`,onClick:_,disabled:i||u.length===0,children:``})})]})})}var Af=kf;function jf(e){let t=null;return()=>(t??=e(),t)}function Mf(e,t){return e.filter(e=>e!==t)}function Nf(e,t){let n=new Set,r=e=>n.add(e);e.forEach(r),t.forEach(r);let i=[];return n.forEach(e=>i.push(e)),i}var Pf=class{enter(e){let t=this.entered.length;return this.entered=Nf(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),t===0&&this.entered.length>0}leave(e){let t=this.entered.length;return this.entered=Mf(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}},Ff=class{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(n=>{let r=this.config.exposeProperties[n];r!=null&&(t[n]={value:r(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}},If=Ue({FILE:()=>Lf,HTML:()=>Bf,TEXT:()=>zf,URL:()=>Rf});const Lf=`__NATIVE_FILE__`,Rf=`__NATIVE_URL__`,zf=`__NATIVE_TEXT__`,Bf=`__NATIVE_HTML__`;function Vf(e,t,n){return t.reduce((t,n)=>t||e.getData(n),``)??n}const Hf={[Lf]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:[`Files`]},[Bf]:{exposeProperties:{html:(e,t)=>Vf(e,t,``),dataTransfer:e=>e},matchesTypes:[`Html`,`text/html`]},[Rf]:{exposeProperties:{urls:(e,t)=>Vf(e,t,``).split(`
`),dataTransfer:e=>e},matchesTypes:[`Url`,`text/uri-list`]},[zf]:{exposeProperties:{text:(e,t)=>Vf(e,t,``),dataTransfer:e=>e},matchesTypes:[`Text`,`text/plain`]}};function Uf(e,t){let n=Hf[e];if(!n)throw Error(`native type ${e} has no configuration`);let r=new Ff(n);return r.loadDataTransfer(t),r}function Wf(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(Hf).filter(e=>{let n=Hf[e];return n?.matchesTypes?n.matchesTypes.some(e=>t.indexOf(e)>-1):!1})[0]||null}const Gf=jf(()=>/firefox/i.test(navigator.userAgent)),Kf=jf(()=>!!window.safari);var qf=class{interpolate(e){let{xs:t,ys:n,c1s:r,c2s:i,c3s:a}=this,o=t.length-1;if(e===t[o])return n[o];let s=0,c=a.length-1,l;for(;s<=c;){l=Math.floor(.5*(s+c));let r=t[l];if(r<e)s=l+1;else if(r>e)c=l-1;else return n[l]}o=Math.max(0,c);let u=e-t[o],d=u*u;return n[o]+r[o]*u+i[o]*d+a[o]*u*d}constructor(e,t){let{length:n}=e,r=[];for(let e=0;e<n;e++)r.push(e);r.sort((t,n)=>e[t]<e[n]?-1:1);let i=[],a=[],o=[],s,c;for(let r=0;r<n-1;r++)s=e[r+1]-e[r],c=t[r+1]-t[r],a.push(s),i.push(c),o.push(c/s);let l=[o[0]];for(let e=0;e<a.length-1;e++){let t=o[e],n=o[e+1];if(t*n<=0)l.push(0);else{s=a[e];let r=a[e+1],i=s+r;l.push(3*i/((i+r)/t+(i+s)/n))}}l.push(o[o.length-1]);let u=[],d=[],f;for(let e=0;e<l.length-1;e++){f=o[e];let t=l[e],n=1/a[e],r=t+l[e+1]-f-f;u.push((f-t-r)*n),d.push(r*n*n)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=u,this.c3s=d}},Jf=1;function Yf(e){let t=e.nodeType===Jf?e:e.parentElement;if(!t)return null;let{top:n,left:r}=t.getBoundingClientRect();return{x:r,y:n}}function Xf(e){return{x:e.clientX,y:e.clientY}}function Zf(e){return e.nodeName===`IMG`&&(Gf()||!document.documentElement?.contains(e))}function Qf(e,t,n,r){let i=e?t.width:n,a=e?t.height:r;return Kf()&&e&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function $f(e,t,n,r,i){let a=Zf(t),o=Yf(a?e:t),s={x:n.x-o.x,y:n.y-o.y},{offsetWidth:c,offsetHeight:l}=e,{anchorX:u,anchorY:d}=r,{dragPreviewWidth:f,dragPreviewHeight:p}=Qf(a,t,c,l),m=()=>{let e=new qf([0,.5,1],[s.y,s.y/l*p,s.y+p-l]).interpolate(d);return Kf()&&a&&(e+=(window.devicePixelRatio-1)*p),e},h=()=>new qf([0,.5,1],[s.x,s.x/c*f,s.x+f-c]).interpolate(u),{offsetX:g,offsetY:_}=i,v=g===0||g,y=_===0||_;return{x:v?g:h(),y:y?_:m()}}var ep=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<`u`)return window}get document(){if(this.globalContext?.document)return this.globalContext.document;if(this.window)return this.window.document}get rootElement(){return this.optionsArgs?.rootElement||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function tp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t],r=Object.keys(n);typeof Object.getOwnPropertySymbols==`function`&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){tp(e,t,n[t])})}return e}var rp=class{profile(){return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:this.dragStartSourceIds?.length||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:this.dragOverTargetIds?.length||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw Error(`Cannot have two HTML5 backends at the same time.`);e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)==null||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);let r=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute(`draggable`,`true`),t.addEventListener(`dragstart`,r),t.addEventListener(`selectstart`,i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener(`dragstart`,r),t.removeEventListener(`selectstart`,i),t.setAttribute(`draggable`,`false`)}}connectDropTarget(e,t){let n=t=>this.handleDragEnter(t,e),r=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener(`dragenter`,n),t.addEventListener(`dragover`,r),t.addEventListener(`drop`,i),()=>{t.removeEventListener(`dragenter`,n),t.removeEventListener(`dragover`,r),t.removeEventListener(`drop`,i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener(`dragstart`,this.handleTopDragStart),e.addEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.addEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.addEventListener(`dragenter`,this.handleTopDragEnter),e.addEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.addEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.addEventListener(`dragover`,this.handleTopDragOver),e.addEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.addEventListener(`drop`,this.handleTopDrop),e.addEventListener(`drop`,this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener(`dragstart`,this.handleTopDragStart),e.removeEventListener(`dragstart`,this.handleTopDragStartCapture,!0),e.removeEventListener(`dragend`,this.handleTopDragEndCapture,!0),e.removeEventListener(`dragenter`,this.handleTopDragEnter),e.removeEventListener(`dragenter`,this.handleTopDragEnterCapture,!0),e.removeEventListener(`dragleave`,this.handleTopDragLeaveCapture,!0),e.removeEventListener(`dragover`,this.handleTopDragOver),e.removeEventListener(`dragover`,this.handleTopDragOverCapture,!0),e.removeEventListener(`drop`,this.handleTopDrop),e.removeEventListener(`drop`,this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return np({dropEffect:this.altKeyPressed?`copy`:`move`},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?`copy`:this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return np({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(If).some(t=>If[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Uf(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>this.rootElement?.addEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)==null||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(`mousemove`,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||=[],this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&Yf(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;e==null||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{this.hoverRafId===null&&typeof requestAnimationFrame<`u`&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<`u`&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let n=Xf(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:n});let{dataTransfer:r}=e,i=Wf(r);if(this.monitor.isDragging()){if(r&&typeof r.setDragImage==`function`){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){let{anchorX:e,anchorY:a,offsetX:o,offsetY:s}=this.getCurrentSourcePreviewNodeOptions(),c=$f(t,i,n,{anchorX:e,anchorY:a},{offsetX:o,offsetY:s});r.setDragImage(i,c.x,c.y)}}try{r?.setData(`application/json`,{})}catch{}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute(`draggable`)))return;else e.preventDefault()},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:n}=e,r=Wf(n);r&&this.beginDragNativeItem(r,n)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Xf(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var t;(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`);return}this.altKeyPressed=e.altKey,this.lastClientOffset=Xf(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=`none`))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var t;e.preventDefault(),(t=this.currentNativeSource)==null||t.loadDataTransfer(e.dataTransfer)}else Wf(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Xf(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;typeof t.dragDrop==`function`&&(t.tagName===`INPUT`||t.tagName===`SELECT`||t.tagName===`TEXTAREA`||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new ep(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Pf(this.isNodeInDocument)}};const ip=function(e,t,n){return new rp(e,t,n)};var ap=C((0,U.jsx)(`path`,{d:`M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z`}),`EditNote`),op=C([(0,U.jsx)(`path`,{d:`M3 6H1v13c0 1.1.9 2 2 2h17v-2H3z`},`0`),(0,U.jsx)(`path`,{d:`M21 4h-7l-2-2H7c-1.1 0-1.99.9-1.99 2L5 15c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2`},`1`)],`FolderCopy`),sp=C((0,U.jsx)(`path`,{d:`m5.2494 8.0688 2.83-2.8269 14.1343 14.15-2.83 2.8269zm4.2363-4.2415 2.828-2.8289 5.6577 5.656-2.828 2.8289zM.9989 12.3147l2.8284-2.8285 5.6569 5.6569-2.8285 2.8284zM1 21h12v2H1z`}),`Gavel`),cp=C((0,U.jsx)(`path`,{d:`M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8`}),`AddCircleOutline`),lp=C((0,U.jsx)(`path`,{d:`M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z`}),`DeleteOutline`),up={type:`direct`,prompt:``,nextFlowId:``,branches:[{id:ee(),label:``,nextFlowId:``}]};function dp(){let t=Ie(),{flowLibrary:n}=oe(e=>e.case),[r,i]=(0,H.useState)(null),[a,o]=(0,H.useState)(!1),[c,l]=(0,H.useState)(up),u=n.find(e=>e.id===r);(0,H.useEffect)(()=>{u?u.joint?(l({...up,...u.joint,branches:u.joint.branches?.length>0?u.joint.branches:up.branches}),o(!0)):(l(up),o(!1)):(i(null),o(!1),l(up))},[r,u]);let m=()=>{let e={type:c.type};c.type===`direct`?e.nextFlowId=c.nextFlowId:(e.prompt=c.prompt,e.branches=c.branches),t(ce({flowId:r,joint:e}))},v=()=>{t(ce({flowId:r,joint:null}))},S=()=>{l(e=>({...e,branches:[...e.branches,{id:ee(),label:``,nextFlowId:``}]}))},C=e=>{l(t=>({...t,branches:t.branches.filter(t=>t.id!==e)}))},O=(e,t,n)=>{l(r=>({...r,branches:r.branches.map(r=>r.id===e?{...r,[t]:n}:r)}))},k=n.filter(e=>e.id!==r);return(0,U.jsxs)(B,{sx:{display:`flex`,gap:2,height:`100%`,minHeight:0},children:[(0,U.jsxs)(h,{sx:{flex:`0 1 320px`,minWidth:280,p:2,overflow:`auto`},children:[(0,U.jsx)(s,{variant:`h6`,gutterBottom:!0,children:``}),(0,U.jsx)(g,{children:n.map(t=>(0,U.jsx)(e,{selected:r===t.id,onClick:()=>i(t.id),children:(0,U.jsx)(L,{primary:t.name,secondary:t.joint?`[${t.joint.type===`direct`?``:``}]`:``})},t.id))})]}),(0,U.jsx)(h,{sx:{flex:`1 1 auto`,p:3,overflow:`auto`},children:u?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(s,{variant:`h6`,gutterBottom:!0,children:[``,u.name,``]}),(0,U.jsx)(s,{variant:`body2`,color:`text.secondary`,sx:{mb:2},children:``}),(0,U.jsx)(_,{sx:{my:2}}),(()=>a?(0,U.jsxs)(B,{children:[(0,U.jsx)(b,{component:`fieldset`,sx:{mb:2},children:(0,U.jsxs)(D,{row:!0,value:c.type,onChange:e=>l({...up,type:e.target.value}),children:[(0,U.jsx)(w,{value:`direct`,control:(0,U.jsx)(T,{}),label:``}),(0,U.jsx)(w,{value:`branching`,control:(0,U.jsx)(T,{}),label:``})]})}),c.type===`direct`&&(0,U.jsxs)(b,{fullWidth:!0,children:[(0,U.jsx)(p,{id:`next-flow-select-label`,children:``}),(0,U.jsx)(y,{labelId:`next-flow-select-label`,value:c.nextFlowId,label:``,onChange:e=>l(t=>({...t,nextFlowId:e.target.value})),children:k.map(e=>(0,U.jsx)(E,{value:e.id,children:e.name},e.id))})]}),c.type===`branching`&&(0,U.jsxs)(B,{sx:{display:`flex`,flexDirection:`column`,gap:2},children:[(0,U.jsx)(x,{label:` (Prompt)`,fullWidth:!0,value:c.prompt,onChange:e=>l(t=>({...t,prompt:e.target.value}))}),(0,U.jsx)(s,{variant:`subtitle2`,children:``}),c.branches.map((e,t)=>(0,U.jsxs)(h,{variant:`outlined`,sx:{p:2,display:`flex`,alignItems:`center`,gap:2},children:[(0,U.jsx)(x,{label:` ${t+1}`,value:e.label,onChange:t=>O(e.id,`label`,t.target.value),sx:{flexGrow:1}}),(0,U.jsxs)(b,{sx:{minWidth:200},children:[(0,U.jsx)(p,{id:`branch-flow-select-label-${e.id}`,children:``}),(0,U.jsx)(y,{labelId:`branch-flow-select-label-${e.id}`,value:e.nextFlowId,label:``,onChange:t=>O(e.id,`nextFlowId`,t.target.value),children:k.map(e=>(0,U.jsx)(E,{value:e.id,children:e.name},e.id))})]}),(0,U.jsx)(d,{onClick:()=>C(e.id),disabled:c.branches.length<=1,children:(0,U.jsx)(lp,{})})]},e.id)),(0,U.jsx)(f,{startIcon:(0,U.jsx)(cp,{}),onClick:S,children:``})]}),(0,U.jsxs)(B,{sx:{mt:3,display:`flex`,justifyContent:`space-between`},children:[(0,U.jsx)(f,{color:`error`,onClick:v,children:``}),(0,U.jsx)(f,{variant:`contained`,onClick:m,children:``})]})]}):(0,U.jsx)(B,{sx:{textAlign:`center`},children:(0,U.jsx)(f,{variant:`contained`,onClick:()=>o(!0),children:``})}))()]}):(0,U.jsx)(B,{sx:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100%`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})})})]})}var fp=dp;function pp(){let e=Ie(),{categories:t,selectedCategoryId:n}=oe(e=>e.flowCategory),[r,i]=(0,H.useState)({open:!1,mode:`add`,category:null}),[a,o]=(0,H.useState)(``),[{isOver:c,canDrop:l},u]=Vi(()=>({accept:`flow`,drop:(e,t)=>{t.didDrop()},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),[]),d=(e,t=null)=>{i({open:!0,mode:e,category:t}),o(t?t.name:``)},p=()=>{i({open:!1,mode:`add`,category:null}),o(``)},m=()=>{a.trim()&&(r.mode===`add`?e(Re({name:a})):e(Ae({id:r.category.id,name:a})),p())},_=t=>{t!==`cat-uncategorized`&&window.confirm(``)&&e(Pe(t))};return(0,U.jsxs)(h,{ref:u,sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,U.jsxs)(B,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,U.jsx)(s,{variant:`h6`,children:``}),(0,U.jsx)(f,{startIcon:(0,U.jsx)(j,{}),onClick:()=>d(`add`),size:`small`,children:``})]}),(0,U.jsx)(B,{sx:{overflow:`auto`,flexGrow:1},children:(0,U.jsx)(g,{dense:!0,children:t.map(t=>(0,U.jsx)(mp,{category:t,isSelected:n===t.id,onSelect:()=>e(Le(t.id)),onEdit:()=>d(`edit`,t),onDelete:()=>_(t.id)},t.id))})}),(0,U.jsxs)(A,{open:r.open,onClose:p,children:[(0,U.jsx)(k,{children:r.mode===`add`?``:``}),(0,U.jsx)(N,{children:(0,U.jsx)(x,{autoFocus:!0,margin:`dense`,label:``,type:`text`,fullWidth:!0,variant:`standard`,value:a,onChange:e=>o(e.target.value)})}),(0,U.jsxs)(F,{children:[(0,U.jsx)(f,{onClick:p,children:``}),(0,U.jsx)(f,{onClick:m,children:``})]})]})]})}function mp({category:t,isSelected:n,onSelect:r,onEdit:i,onDelete:a}){let o=Ie(),[{isOver:s,canDrop:c},l]=Vi(()=>({accept:`flow`,drop:e=>{o(ie({flowId:e.id,newCategoryId:t.id}))},collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),[t.id]);return(0,U.jsx)(I,{disablePadding:!0,sx:{mb:.5},children:(0,U.jsxs)(e,{ref:l,selected:n,onClick:r,sx:{borderRadius:1,border:c?s?`2px dashed #1976d2`:`2px dashed #ccc`:`none`,backgroundColor:s&&c?`action.hover`:void 0,display:`flex`,justifyContent:`space-between`},children:[(0,U.jsx)(L,{primary:t.name}),t.id!==`cat-uncategorized`&&(0,U.jsxs)(B,{children:[(0,U.jsx)(d,{size:`small`,onClick:e=>{e.stopPropagation(),i()},children:(0,U.jsx)(M,{fontSize:`small`})}),(0,U.jsx)(d,{size:`small`,onClick:e=>{e.stopPropagation(),a()},children:(0,U.jsx)(P,{fontSize:`small`})})]})]})})}var hp=pp,gp=C((0,U.jsx)(`path`,{d:`M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z`}),`Article`);function _p({flow:e}){let[{isDragging:t},n]=Ni(()=>({type:`flow`,item:{id:e.id},collect:e=>({isDragging:!!e.isDragging()})}));return(0,U.jsxs)(I,{ref:n,sx:{cursor:`move`,opacity:t?.5:1,border:`1px solid #ddd`,borderRadius:1,mb:1,bgcolor:`background.paper`},children:[(0,U.jsx)(gp,{sx:{mr:1.5},color:`action`}),(0,U.jsx)(L,{primary:e.name,secondary:e.description})]})}function vp({onStartAiDesign:e}){let{flowLibrary:t}=oe(e=>e.case),{categories:n,selectedCategoryId:r}=oe(e=>e.flowCategory),i=t.filter(e=>e.categoryId===r),o=n.find(e=>e.id===r);return o?(0,U.jsxs)(h,{sx:{p:2,height:`100%`,display:`flex`,flexDirection:`column`},children:[(0,U.jsxs)(B,{sx:{display:`flex`,justifyContent:`space-between`,alignItems:`center`,mb:1},children:[(0,U.jsxs)(s,{variant:`h6`,children:[`: `,o.name]}),(0,U.jsx)(f,{variant:`outlined`,size:`small`,startIcon:(0,U.jsx)(a,{}),onClick:e,children:`AI`})]}),(0,U.jsx)(B,{sx:{overflow:`auto`,flexGrow:1,p:1,bgcolor:`action.hover`,borderRadius:1},children:i.length>0?(0,U.jsx)(g,{children:i.map(e=>(0,U.jsx)(_p,{flow:e},e.id))}):(0,U.jsx)(B,{sx:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100%`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})})})]}):(0,U.jsx)(h,{sx:{p:2,height:`100%`,display:`flex`,alignItems:`center`,justifyContent:`center`},children:(0,U.jsx)(s,{color:`text.secondary`,children:``})})}var yp=vp;function bp({onStartAiDesign:e}){return(0,U.jsxs)(B,{sx:{height:`100%`,display:`flex`,flexDirection:`column`,gap:2},children:[(0,U.jsx)(B,{sx:{flex:`0 1 40%`,minHeight:200},children:(0,U.jsx)(hp,{})}),(0,U.jsx)(B,{sx:{flex:`1 1 60%`},children:(0,U.jsx)(yp,{onStartAiDesign:e})})]})}var xp=bp,Sp=C((0,U.jsx)(`path`,{d:`M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3M7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5M16 17H8v-2h8zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13`}),`SmartToy`),Cp=C([(0,U.jsx)(`path`,{d:`M12 5.99 19.53 19H4.47zM12 2 1 21h22z`},`0`),(0,U.jsx)(`path`,{d:`M13 16h-2v2h2zm0-6h-2v5h2z`},`1`)],`WarningAmber`),wp=V(h)(({theme:e})=>({display:`flex`,flexDirection:`column`,height:`100%`,padding:e.spacing(2)})),Tp=V(B)({flexGrow:1,overflowY:`auto`,padding:`8px`}),Ep=V(B)(({theme:e,sender:t})=>({display:`flex`,flexDirection:`row`,alignItems:`flex-start`,marginBottom:e.spacing(2),justifyContent:t===`user`?`flex-end`:`flex-start`})),Dp=V(h)(({theme:e,sender:t})=>({padding:e.spacing(1,2),borderRadius:`20px`,maxWidth:`85%`,backgroundColor:t===`user`?e.palette.primary.main:e.palette.background.paper,color:t===`user`?e.palette.primary.contrastText:e.palette.text.primary,border:t===`ai`?`1px solid ${e.palette.divider}`:`none`}));function Op({chatHistory:e,onSendMessage:t,onOptionSelect:n,isWaitingForUserInput:a,isWaitingForAiResponse:o}){let[c,l]=H.useState(``),d=(0,H.useRef)(null);(0,H.useEffect)(()=>{d.current?.scrollIntoView({behavior:`smooth`})},[e,o]);let p=()=>{c.trim()&&(t(c),l(``))};return(0,U.jsxs)(wp,{children:[(0,U.jsx)(s,{variant:`h6`,gutterBottom:!0,children:`AI`}),(0,U.jsxs)(Tp,{children:[e.map((e,n)=>{let o=e.text.startsWith(`[WARNING]`),c=o?e.text.replace(`[WARNING]`,``).trim():e.text;return(0,U.jsxs)(Ep,{sender:e.sender,children:[(0,U.jsx)(tt,{sx:{mr:1,bgcolor:e.sender===`ai`?`secondary.main`:`primary.main`},children:e.sender===`ai`?(0,U.jsx)(Sp,{}):(0,U.jsx)(v,{})}),(0,U.jsxs)(B,{children:[o?(0,U.jsxs)(r,{severity:`warning`,icon:(0,U.jsx)(Cp,{fontSize:`inherit`}),sx:{borderRadius:`20px`,maxWidth:`85%`,bgcolor:`#fff4e5`},children:[(0,U.jsx)(qe,{sx:{fontWeight:`bold`},children:``}),c]}):(0,U.jsx)(Dp,{sender:e.sender,children:(0,U.jsx)(s,{variant:`body2`,sx:{whiteSpace:`pre-wrap`},children:c})}),e.options&&e.options.length>0&&(0,U.jsx)(i,{direction:`row`,spacing:1,sx:{mt:1,flexWrap:`wrap`,justifyContent:`flex-start`,ml:1},children:e.options.filter(e=>e&&e.label&&e.label.trim()!==``).map(e=>(0,U.jsx)(u,{label:e.label,onClick:()=>t(e.label),color:`info`,clickable:a,disabled:!a,variant:`outlined`},e.value||e.label))})]})]},n)}),o&&(0,U.jsxs)(Ep,{sender:`ai`,children:[(0,U.jsx)(tt,{sx:{mr:1,bgcolor:`secondary.main`},children:(0,U.jsx)(Sp,{})}),(0,U.jsx)(B,{children:(0,U.jsx)(Dp,{sender:`ai`,children:(0,U.jsx)(ve,{size:20})})})]}),(0,U.jsx)(`div`,{ref:d})]}),(0,U.jsxs)(B,{sx:{display:`flex`,pt:2},children:[(0,U.jsx)(x,{fullWidth:!0,variant:`outlined`,placeholder:`...`,value:c,onChange:e=>l(e.target.value),onKeyPress:e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),p())},disabled:!a}),(0,U.jsx)(f,{variant:`contained`,onClick:p,sx:{ml:1},disabled:!a,children:``})]})]})}var kp=Op;function Ap(e){if(typeof e==`string`||typeof e==`number`)return``+e;let t=``;if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ap(e[n]))!==``&&(t+=(t&&` `)+r);else for(let n in e)e[n]&&(t+=(t&&` `)+n);return t}var jp=me((exports=>{var t=le();function n(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var r=typeof Object.is==`function`?Object.is:n,i=t.useState,a=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function c(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),c=r[0].inst,u=r[1];return o(function(){c.value=n,c.getSnapshot=t,l(c)&&u({inst:c})},[e,n,t]),a(function(){return l(c)&&u({inst:c}),e(function(){l(c)&&u({inst:c})})},[e]),s(n),n}function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch{return!0}}function u(e,t){return t()}var d=typeof window>`u`||window.document===void 0||window.document.createElement===void 0?u:c;exports.useSyncExternalStore=t.useSyncExternalStore===void 0?d:t.useSyncExternalStore})),Mp=me(((exports,t)=>{t.exports=jp()})),Np=me((exports=>{var t=le(),n=Mp();function r(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var i=typeof Object.is==`function`?Object.is:r,a=n.useSyncExternalStore,o=t.useRef,s=t.useEffect,c=t.useMemo,l=t.useDebugValue;exports.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=o(null);if(d.current===null){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=c(function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),u!==void 0&&f.hasValue){var t=f.value;if(u(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return u!==void 0&&u(t,n)?(o=e,t):(o=e,s=n)}var a=!1,o,s,c=n===void 0?null:n;return[function(){return e(t())},c===null?void 0:function(){return e(c())}]},[t,n,r,u]);var p=a(e,d[0],d[1]);return s(function(){f.hasValue=!0,f.value=p},[p]),l(p),p}})),Pp=me(((exports,t)=>{t.exports=Np()})),Fp=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{n.clear()}},o=t=e(r,i,a);return a},Ip=e=>e?Fp(e):Fp,Lp=ge(Pp(),1),{useDebugValue:Rp}=H.default,{useSyncExternalStoreWithSelector:zp}=Lp.default,Bp=e=>e;function Vp(e,t=Bp,n){let r=zp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Rp(r),r}var Hp=(e,t)=>{let n=Ip(e),r=(e,r=t)=>Vp(n,e,r);return Object.assign(r,n),r},Up=(e,t)=>e?Hp(e,t):Hp;function Wp(e,t){if(Object.is(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Gp={value:()=>{}};function Kp(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new qp(n)}function qp(e){this._=e}function Jp(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}qp.prototype=Kp.prototype={constructor:qp,on:function(e,t){var n=this._,r=Jp(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Yp(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Xp(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xp(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Yp(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Xp(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Gp,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Zp=Kp,Qp={svg:`http://www.w3.org/2000/svg`,xhtml:`http://www.w3.org/1999/xhtml`,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function $p(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),Qp.hasOwnProperty(t)?{space:Qp[t],local:e}:e}function em(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===`http://www.w3.org/1999/xhtml`&&t.documentElement.namespaceURI===`http://www.w3.org/1999/xhtml`?t.createElement(e):t.createElementNS(n,e)}}function tm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function nm(e){var t=$p(e);return(t.local?tm:em)(t)}function rm(){}function im(e){return e==null?rm:function(){return this.querySelector(e)}}function am(e){typeof e!=`function`&&(e=im(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new qh(r,this._parents)}function om(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sm(){return[]}function cm(e){return e==null?sm:function(){return this.querySelectorAll(e)}}function lm(e){return function(){return om(e.apply(this,arguments))}}function um(e){e=typeof e==`function`?lm(e):cm(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new qh(r,i)}function dm(e){return function(){return this.matches(e)}}function fm(e){return function(t){return t.matches(e)}}var pm=Array.prototype.find;function mm(e){return function(){return pm.call(this.children,e)}}function hm(){return this.firstElementChild}function gm(e){return this.select(e==null?hm:mm(typeof e==`function`?e:fm(e)))}var _m=Array.prototype.filter;function vm(){return Array.from(this.children)}function ym(e){return function(){return _m.call(this.children,e)}}function bm(e){return this.selectAll(e==null?vm:ym(typeof e==`function`?e:fm(e)))}function xm(e){typeof e!=`function`&&(e=dm(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new qh(r,this._parents)}function Sm(e){return Array(e.length)}function Cm(){return new qh(this._enter||this._groups.map(Sm),this._parents)}function wm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}wm.prototype={constructor:wm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Tm(e){return function(){return e}}function Em(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new wm(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function Dm(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new wm(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function Om(e){return e.__data__}function km(e,t){if(!arguments.length)return Array.from(this,Om);var n=t?Dm:Em,r=this._parents,i=this._groups;typeof e!=`function`&&(e=Tm(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=Am(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m),_=c[l]=Array(f);n(u,d,h,g,_,p,t);for(var v=0,y=0,b,x;v<m;++v)if(b=h[v]){for(v>=y&&(y=v+1);!(x=g[y])&&++y<m;);b._next=x||null}}return o=new qh(o,r),o._enter=s,o._exit=c,o}function Am(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function jm(){return new qh(this._exit||this._groups.map(Sm),this._parents)}function Mm(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Nm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new qh(s,this._parents)}function Pm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Fm(e){e||=Im;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new qh(i,this._parents).order()}function Im(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Rm(){return Array.from(this)}function zm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function Bm(){let e=0;for(let t of this)++e;return e}function Vm(){return!this.node()}function Hm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Um(e){return function(){this.removeAttribute(e)}}function Wm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gm(e,t){return function(){this.setAttribute(e,t)}}function Km(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ym(e,t){var n=$p(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Wm:Um:typeof t==`function`?n.local?Jm:qm:n.local?Km:Gm)(n,t))}function Xm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zm(e){return function(){this.style.removeProperty(e)}}function Qm(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $m(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function eh(e,t,n){return arguments.length>1?this.each((t==null?Zm:typeof t==`function`?$m:Qm)(e,t,n??``)):th(this.node(),e)}function th(e,t){return e.style.getPropertyValue(t)||Xm(e).getComputedStyle(e,null).getPropertyValue(t)}function nh(e){return function(){delete this[e]}}function rh(e,t){return function(){this[e]=t}}function ih(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ah(e,t){return arguments.length>1?this.each((t==null?nh:typeof t==`function`?ih:rh)(e,t)):this.node()[e]}function oh(e){return e.trim().split(/^|\s+/)}function sh(e){return e.classList||new ch(e)}function ch(e){this._node=e,this._names=oh(e.getAttribute(`class`)||``)}ch.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function lh(e,t){for(var n=sh(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function uh(e,t){for(var n=sh(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function dh(e){return function(){lh(this,e)}}function fh(e){return function(){uh(this,e)}}function ph(e,t){return function(){(t.apply(this,arguments)?lh:uh)(this,e)}}function mh(e,t){var n=oh(e+``);if(arguments.length<2){for(var r=sh(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?ph:t?dh:fh)(n,t))}function hh(){this.textContent=``}function gh(e){return function(){this.textContent=e}}function _h(e){return function(){this.textContent=e.apply(this,arguments)??``}}function vh(e){return arguments.length?this.each(e==null?hh:(typeof e==`function`?_h:gh)(e)):this.node().textContent}function yh(){this.innerHTML=``}function bh(e){return function(){this.innerHTML=e}}function xh(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function Sh(e){return arguments.length?this.each(e==null?yh:(typeof e==`function`?xh:bh)(e)):this.node().innerHTML}function Ch(){this.nextSibling&&this.parentNode.appendChild(this)}function wh(){return this.each(Ch)}function Th(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Eh(){return this.each(Th)}function Dh(e){var t=typeof e==`function`?e:nm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Oh(){return null}function kh(e,t){var n=typeof e==`function`?e:nm(e),r=t==null?Oh:typeof t==`function`?t:im(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ah(){var e=this.parentNode;e&&e.removeChild(this)}function jh(){return this.each(Ah)}function Mh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ph(e){return this.select(e?Nh:Mh)}function Fh(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function Ih(e){return function(t){e.call(this,t,this.__data__)}}function Lh(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function Rh(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function zh(e,t,n){return function(){var r=this.__on,i,a=Ih(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Bh(e,t,n){var r=Lh(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?zh:Rh,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function Vh(e,t,n){var r=Xm(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Hh(e,t){return function(){return Vh(this,e,t)}}function Uh(e,t){return function(){return Vh(this,e,t.apply(this,arguments))}}function Wh(e,t){return this.each((typeof t==`function`?Uh:Hh)(e,t))}function*Gh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Kh=[null];function qh(e,t){this._groups=e,this._parents=t}function Jh(){return new qh([[document.documentElement]],Kh)}function Yh(){return this}qh.prototype=Jh.prototype={constructor:qh,select:am,selectAll:um,selectChild:gm,selectChildren:bm,filter:xm,data:km,enter:Cm,exit:jm,join:Mm,merge:Nm,selection:Yh,order:Pm,sort:Fm,call:Lm,nodes:Rm,node:zm,size:Bm,empty:Vm,each:Hm,attr:Ym,style:eh,property:ah,classed:mh,text:vh,html:Sh,raise:wh,lower:Eh,append:Dh,insert:kh,remove:jh,clone:Ph,datum:Fh,on:Bh,dispatch:Wh,[Symbol.iterator]:Gh};var Xh=Jh;function Zh(e){return typeof e==`string`?new qh([[document.querySelector(e)]],[document.documentElement]):new qh([[e]],Kh)}function Qh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $h(e,t){if(e=Qh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const eg={passive:!1},tg={capture:!0,passive:!1};function ng(e){e.stopImmediatePropagation()}function rg(e){e.preventDefault(),e.stopImmediatePropagation()}function ig(e){var t=e.document.documentElement,n=Zh(e).on(`dragstart.drag`,rg,tg);`onselectstart`in t?n.on(`selectstart.drag`,rg,tg):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function ag(e,t){var n=e.document.documentElement,r=Zh(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,rg,tg),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var og=e=>()=>e;function sg(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}sg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cg(e){return!e.ctrlKey&&!e.button}function lg(){return this.parentNode}function ug(e,t){return t??{x:e.x,y:e.y}}function dg(){return navigator.maxTouchPoints||`ontouchstart`in this}function fg(){var e=cg,t=lg,n=ug,r=dg,i={},a=Zp(`start`,`drag`,`end`),o=0,s,c,l,u,d=0;function f(e){e.on(`mousedown.drag`,p).filter(r).on(`touchstart.drag`,g).on(`touchmove.drag`,_,eg).on(`touchend.drag touchcancel.drag`,v).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function p(n,r){if(!(u||!e.call(this,n,r))){var i=y(this,t.call(this,n,r),n,r,`mouse`);i&&(Zh(n.view).on(`mousemove.drag`,m,tg).on(`mouseup.drag`,h,tg),ig(n.view),ng(n),l=!1,s=n.clientX,c=n.clientY,i(`start`,n))}}function m(e){if(rg(e),!l){var t=e.clientX-s,n=e.clientY-c;l=t*t+n*n>d}i.mouse(`drag`,e)}function h(e){Zh(e.view).on(`mousemove.drag mouseup.drag`,null),ag(e.view,l),rg(e),i.mouse(`end`,e)}function g(n,r){if(e.call(this,n,r)){var i=n.changedTouches,a=t.call(this,n,r),o=i.length,s,c;for(s=0;s<o;++s)(c=y(this,a,n,r,i[s].identifier,i[s]))&&(ng(n),c(`start`,n,i[s]))}}function _(e){var t=e.changedTouches,n=t.length,r,a;for(r=0;r<n;++r)(a=i[t[r].identifier])&&(rg(e),a(`drag`,e,t[r]))}function v(e){var t=e.changedTouches,n=t.length,r,a;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),r=0;r<n;++r)(a=i[t[r].identifier])&&(ng(e),a(`end`,e,t[r]))}function y(e,t,r,s,c,l){var u=a.copy(),d=$h(l||r,t),p,m,h;if((h=n.call(e,new sg(`beforestart`,{sourceEvent:r,target:f,identifier:c,active:o,x:d[0],y:d[1],dx:0,dy:0,dispatch:u}),s))!=null)return p=h.x-d[0]||0,m=h.y-d[1]||0,function n(r,a,l){var g=d,_;switch(r){case`start`:i[c]=n,_=o++;break;case`end`:delete i[c],--o;case`drag`:d=$h(l||a,t),_=o;break}u.call(r,e,new sg(r,{sourceEvent:a,subject:h,target:f,identifier:c,active:_,x:d[0]+p,y:d[1]+m,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:u}),s)}}return f.filter=function(t){return arguments.length?(e=typeof t==`function`?t:og(!!t),f):e},f.container=function(e){return arguments.length?(t=typeof e==`function`?e:og(e),f):t},f.subject=function(e){return arguments.length?(n=typeof e==`function`?e:og(e),f):n},f.touchable=function(e){return arguments.length?(r=typeof e==`function`?e:og(!!e),f):r},f.on=function(){var e=a.on.apply(a,arguments);return e===a?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function pg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function mg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hg(){}var gg=.7,_g=1/gg,vg=`\\s*([+-]?\\d+)\\s*`,yg=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,bg=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,xg=/^#([0-9a-f]{3,8})$/,Sg=RegExp(`^rgb\\(${vg},${vg},${vg}\\)$`),Cg=RegExp(`^rgb\\(${bg},${bg},${bg}\\)$`),wg=RegExp(`^rgba\\(${vg},${vg},${vg},${yg}\\)$`),Tg=RegExp(`^rgba\\(${bg},${bg},${bg},${yg}\\)$`),Eg=RegExp(`^hsl\\(${yg},${bg},${bg}\\)$`),Dg=RegExp(`^hsla\\(${yg},${bg},${bg},${yg}\\)$`),Og={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pg(hg,Ng,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kg,formatHex:kg,formatHex8:Ag,formatHsl:jg,formatRgb:Mg,toString:Mg});function kg(){return this.rgb().formatHex()}function Ag(){return this.rgb().formatHex8()}function jg(){return Kg(this).formatHsl()}function Mg(){return this.rgb().formatRgb()}function Ng(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=xg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Pg(t):n===3?new Rg(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Fg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Fg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sg.exec(e))?new Rg(t[1],t[2],t[3],1):(t=Cg.exec(e))?new Rg(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=wg.exec(e))?Fg(t[1],t[2],t[3],t[4]):(t=Tg.exec(e))?Fg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Eg.exec(e))?Gg(t[1],t[2]/100,t[3]/100,1):(t=Dg.exec(e))?Gg(t[1],t[2]/100,t[3]/100,t[4]):Og.hasOwnProperty(e)?Pg(Og[e]):e===`transparent`?new Rg(NaN,NaN,NaN,0):null}function Pg(e){return new Rg(e>>16&255,e>>8&255,e&255,1)}function Fg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rg(e,t,n,r)}function Ig(e){return e instanceof hg||(e=Ng(e)),e?(e=e.rgb(),new Rg(e.r,e.g,e.b,e.opacity)):new Rg}function Lg(e,t,n,r){return arguments.length===1?Ig(e):new Rg(e,t,n,r??1)}function Rg(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pg(Rg,Lg,mg(hg,{brighter(e){return e=e==null?_g:_g**+e,new Rg(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gg:gg**+e,new Rg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rg(Ug(this.r),Ug(this.g),Ug(this.b),Hg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zg,formatHex:zg,formatHex8:Bg,formatRgb:Vg,toString:Vg}));function zg(){return`#${Wg(this.r)}${Wg(this.g)}${Wg(this.b)}`}function Bg(){return`#${Wg(this.r)}${Wg(this.g)}${Wg(this.b)}${Wg((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vg(){let e=Hg(this.opacity);return`${e===1?`rgb(`:`rgba(`}${Ug(this.r)}, ${Ug(this.g)}, ${Ug(this.b)}${e===1?`)`:`, ${e})`}`}function Hg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ug(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wg(e){return e=Ug(e),(e<16?`0`:``)+e.toString(16)}function Gg(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jg(e,t,n,r)}function Kg(e){if(e instanceof Jg)return new Jg(e.h,e.s,e.l,e.opacity);if(e instanceof hg||(e=Ng(e)),!e)return new Jg;if(e instanceof Jg)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Jg(o,s,c,e.opacity)}function qg(e,t,n,r){return arguments.length===1?Kg(e):new Jg(e,t,n,r??1)}function Jg(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pg(Jg,qg,mg(hg,{brighter(e){return e=e==null?_g:_g**+e,new Jg(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gg:gg**+e,new Jg(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rg(Zg(e>=240?e-240:e+120,i,r),Zg(e,i,r),Zg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Jg(Yg(this.h),Xg(this.s),Xg(this.l),Hg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Hg(this.opacity);return`${e===1?`hsl(`:`hsla(`}${Yg(this.h)}, ${Xg(this.s)*100}%, ${Xg(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function Yg(e){return e=(e||0)%360,e<0?e+360:e}function Xg(e){return Math.max(0,Math.min(1,e||0))}function Zg(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Qg=e=>()=>e;function $g(e,t){return function(n){return e+n*t}}function e_(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function t_(e){return(e=+e)==1?n_:function(t,n){return n-t?e_(t,n,e):Qg(isNaN(t)?n:t)}}function n_(e,t){var n=t-e;return n?$g(e,n):Qg(isNaN(e)?t:e)}var r_=(function e(t){var n=t_(t);function r(e,t){var r=n((e=Lg(e)).r,(t=Lg(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=n_(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r})(1);function i_(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var a_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o_=new RegExp(a_.source,`g`);function s_(e){return function(){return e}}function c_(e){return function(t){return e(t)+``}}function l_(e,t){var n=a_.lastIndex=o_.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=a_.exec(e))&&(i=o_.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:i_(r,i)})),n=o_.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?c_(c[0].x):s_(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}var u_=180/Math.PI,d_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function f_(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*u_,skewX:Math.atan(c)*u_,scaleX:o,scaleY:s}}var p_;function m_(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?d_:f_(t.a,t.b,t.c,t.d,t.e,t.f)}function h_(e){return e==null||(p_||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),p_.setAttribute(`transform`,e),!(e=p_.transform.baseVal.consolidate()))?d_:(e=e.matrix,f_(e.a,e.b,e.c,e.d,e.e,e.f))}function g_(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:i_(e,i)},{i:c-2,x:i_(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:i_(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:i_(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:i_(e,n)},{i:s-2,x:i_(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var __=g_(m_,`px, `,`px)`,`deg)`),v_=g_(h_,`, `,`)`,`)`),y_=1e-12;function b_(e){return((e=Math.exp(e))+1/e)/2}function x_(e){return((e=Math.exp(e))-1/e)/2}function S_(e){return((e=Math.exp(2*e))-1)/(e+1)}var C_=(function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<y_)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=b_(y),c=s/(n*g)*(i*S_(t*r+y)-x_(y));return[a+c*d,o+c*f,s*i/b_(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n,i=r*r;return e(n,r,i)},i})(Math.SQRT2,2,4),w_=0,T_=0,E_=0,D_=1e3,O_,k_,A_=0,j_=0,M_=0,N_=typeof performance==`object`&&performance.now?performance:Date,P_=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function F_(){return j_||=(P_(I_),N_.now()+M_)}function I_(){j_=0}function L_(){this._call=this._time=this._next=null}L_.prototype=R_.prototype={constructor:L_,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?F_():+n)+(t==null?0:+t),!this._next&&k_!==this&&(k_?k_._next=this:O_=this,k_=this),this._call=e,this._time=n,U_()},stop:function(){this._call&&(this._call=null,this._time=1/0,U_())}};function R_(e,t,n){var r=new L_;return r.restart(e,t,n),r}function z_(){F_(),++w_;for(var e=O_,t;e;)(t=j_-e._time)>=0&&e._call.call(void 0,t),e=e._next;--w_}function B_(){j_=(A_=N_.now())+M_,w_=T_=0;try{z_()}finally{w_=0,H_(),j_=0}}function V_(){var e=N_.now(),t=e-A_;t>D_&&(M_-=t,A_=e)}function H_(){for(var e,t=O_,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:O_=n);k_=e,U_(r)}function U_(e){w_||(T_&&=clearTimeout(T_),e-j_>24?(e<1/0&&(T_=setTimeout(B_,e-N_.now()-M_)),E_&&=clearInterval(E_)):(E_||=(A_=N_.now(),setInterval(V_,D_)),w_=1,P_(B_)))}function W_(e,t,n){var r=new L_;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var G_=Zp(`start`,`end`,`cancel`,`interrupt`),K_=[];function q_(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Z_(e,n,{name:t,index:r,group:i,on:G_,tween:K_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function J_(e,t){var n=X_(e,t);if(n.state>0)throw Error(`too late; already scheduled`);return n}function Y_(e,t){var n=X_(e,t);if(n.state>3)throw Error(`too late; already running`);return n}function X_(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function Z_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=R_(a,0,n.time);function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==1)return c();for(l in r){if(f=r[l],f.name!==n.name)continue;if(f.state===3)return W_(o);f.state===4?(f.state=6,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(W_(function(){n.state===3&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===2){for(n.state=3,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===5&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function Q_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function $_(e){return this.each(function(){Q_(this,e)})}function ev(e,t){var n,r;return function(){var i=Y_(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function tv(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=Y_(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function nv(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=X_(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?ev:tv)(n,e,t))}function rv(e,t,n){var r=e._id;return e.each(function(){var e=Y_(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return X_(e,r).value[t]}}function iv(e,t){var n;return(typeof t==`number`?i_:t instanceof Ng?r_:(n=Ng(t))?(t=n,r_):l_)(e,t)}function av(e){return function(){this.removeAttribute(e)}}function ov(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sv(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function cv(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function lv(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function uv(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function dv(e,t){var n=$p(e),r=n===`transform`?v_:iv;return this.attrTween(e,typeof t==`function`?(n.local?uv:lv)(n,r,rv(this,`attr.`+e,t)):t==null?(n.local?ov:av)(n):(n.local?cv:sv)(n,r,t))}function fv(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pv(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mv(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&pv(e,i)),n}return i._value=t,i}function hv(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&fv(e,i)),n}return i._value=t,i}function gv(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=$p(e);return this.tween(n,(r.local?mv:hv)(r,t))}function _v(e,t){return function(){J_(this,e).delay=+t.apply(this,arguments)}}function vv(e,t){return t=+t,function(){J_(this,e).delay=t}}function yv(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?_v:vv)(t,e)):X_(this.node(),t).delay}function bv(e,t){return function(){Y_(this,e).duration=+t.apply(this,arguments)}}function xv(e,t){return t=+t,function(){Y_(this,e).duration=t}}function Sv(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?bv:xv)(t,e)):X_(this.node(),t).duration}function Cv(e,t){if(typeof t!=`function`)throw Error();return function(){Y_(this,e).ease=t}}function wv(e){var t=this._id;return arguments.length?this.each(Cv(t,e)):X_(this.node(),t).ease}function Tv(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();Y_(this,e).ease=n}}function Ev(e){if(typeof e!=`function`)throw Error();return this.each(Tv(this._id,e))}function Dv(e){typeof e!=`function`&&(e=dm(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new ny(r,this._parents,this._name,this._id)}function Ov(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new ny(o,this._parents,this._name,this._id)}function kv(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function Av(e,t,n){var r,i,a=kv(t)?J_:Y_;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function jv(e,t){var n=this._id;return arguments.length<2?X_(this.node(),n).on.on(e):this.each(Av(n,e,t))}function Mv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nv(){return this.on(`end.remove`,Mv(this._id))}function Pv(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=im(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,q_(l[f],t,n,f,l,X_(u,n)));return new ny(a,this._parents,t,n)}function Fv(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=cm(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=X_(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&q_(p,t,n,h,f,m);a.push(f),o.push(u)}return new ny(a,o,t,n)}var Iv=Xh.prototype.constructor;function Lv(){return new Iv(this._groups,this._parents)}function Rv(e,t){var n,r,i;return function(){var a=th(this,e),o=(this.style.removeProperty(e),th(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function zv(e){return function(){this.style.removeProperty(e)}}function Bv(e,t,n){var r,i=n+``,a;return function(){var o=th(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Vv(e,t,n){var r,i,a;return function(){var o=th(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),th(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function Hv(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=Y_(this,e),l=c.on,u=c.value[a]==null?s||=zv(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Uv(e,t,n){var r=(e+=``)==`transform`?__:iv;return t==null?this.styleTween(e,Rv(e,r)).on(`end.style.`+e,zv(e)):typeof t==`function`?this.styleTween(e,Vv(e,r,rv(this,`style.`+e,t))).each(Hv(this._id,e)):this.styleTween(e,Bv(e,r,t),n).on(`end.style.`+e,null)}function Wv(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Gv(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Wv(e,a,n)),r}return a._value=t,a}function Kv(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,Gv(e,t,n??``))}function qv(e){return function(){this.textContent=e}}function Jv(e){return function(){this.textContent=e(this)??``}}function Yv(e){return this.tween(`text`,typeof e==`function`?Jv(rv(this,`text`,e)):qv(e==null?``:e+``))}function Xv(e){return function(t){this.textContent=e.call(this,t)}}function Zv(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Xv(r)),t}return r._value=e,r}function Qv(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,Zv(e))}function $v(){for(var e=this._name,t=this._id,n=iy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=X_(c,t);q_(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ny(r,this._parents,e,n)}function ey(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=Y_(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var ty=0;function ny(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ry(e){return Xh().transition(e)}function iy(){return++ty}var ay=Xh.prototype;ny.prototype=ry.prototype={constructor:ny,select:Pv,selectAll:Fv,selectChild:ay.selectChild,selectChildren:ay.selectChildren,filter:Dv,merge:Ov,selection:Lv,transition:$v,call:ay.call,nodes:ay.nodes,node:ay.node,size:ay.size,empty:ay.empty,each:ay.each,on:jv,attr:dv,attrTween:gv,style:Uv,styleTween:Kv,text:Yv,textTween:Qv,remove:Nv,tween:nv,delay:yv,duration:Sv,ease:wv,easeVarying:Ev,end:ey,[Symbol.iterator]:ay[Symbol.iterator]};function oy(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var sy={time:null,delay:0,duration:250,ease:oy};function cy(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function ly(e){var t,n;e instanceof ny?(t=e._id,e=e._name):(t=iy(),(n=sy).time=F_(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&q_(c,e,t,l,o,n||cy(c,t));return new ny(r,this._parents,e,t)}Xh.prototype.interrupt=$_,Xh.prototype.transition=ly;var uy=e=>()=>e;function dy(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function fy(e,t,n){this.k=e,this.x=t,this.y=n}fy.prototype={constructor:fy,scale:function(e){return e===1?this:new fy(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fy(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var py=new fy(1,0,0);my.prototype=fy.prototype;function my(e){for(;!e.__zoom;)if(!(e=e.parentNode))return py;return e.__zoom}function hy(e){e.stopImmediatePropagation()}function gy(e){e.preventDefault(),e.stopImmediatePropagation()}function _y(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function vy(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function yy(){return this.__zoom||py}function by(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xy(){return navigator.maxTouchPoints||`ontouchstart`in this}function Sy(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function Cy(){var e=_y,t=vy,n=Sy,r=by,i=xy,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=C_,l=Zp(`start`,`zoom`,`end`),u,d,f,p=500,m=150,h=0,g=10;function _(e){e.property(`__zoom`,yy).on(`wheel.zoom`,w,{passive:!1}).on(`mousedown.zoom`,T).on(`dblclick.zoom`,E).filter(i).on(`touchstart.zoom`,D).on(`touchmove.zoom`,O).on(`touchend.zoom touchcancel.zoom`,k).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}_.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,yy),e===i?i.interrupt().each(function(){S(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):x(e,t,n,r)},_.scaleBy=function(e,t,n,r){_.scaleTo(e,function(){var e=this.__zoom.k,n=typeof t==`function`?t.apply(this,arguments):t;return e*n},n,r)},_.scaleTo=function(e,r,i,a){_.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?b(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(y(v(a,l),s,c),e,o)},i,a)},_.translateBy=function(e,r,i,a){_.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},_.translateTo=function(e,r,i,a,s){_.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?b(e):typeof a==`function`?a.apply(this,arguments):a;return n(py.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function v(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new fy(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new fy(e.k,r,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,n,r,i){e.on(`start.zoom`,function(){S(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){S(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=S(e,a).event(i),s=t.apply(e,a),l=r==null?b(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new fy(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function S(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=Zh(this.that).datum();l.call(e,this.that,new dy(e,{sourceEvent:this.sourceEvent,target:_,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function w(t,...i){if(!e.apply(this,arguments))return;var s=S(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=$h(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],Q_(this),s.start();gy(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(y(v(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function T(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=S(this,r,!0).event(t),s=Zh(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=$h(t,i),l=t.clientX,u=t.clientY;ig(t.view),hy(t),a.mouse=[c,this.__zoom.invert(c)],Q_(this),a.start();function d(e){if(gy(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>h}a.event(e).zoom(`mouse`,n(y(a.that.__zoom,a.mouse[0]=$h(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),ag(e.view,a.moved),gy(e),a.event(e).end()}}function E(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=$h(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(y(v(a,u),c,l),t.apply(this,i),o);gy(r),s>0?Zh(this).transition().duration(s).call(x,d,c,r):Zh(this).call(_.transform,d,c,r)}}function D(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=S(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(hy(t),s=0;s<i;++s)c=r[s],l=$h(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),Q_(this),a.start())}}function O(e,...t){if(this.__zooming){var r=S(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(gy(e),s=0;s<a;++s)c=i[s],l=$h(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=v(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(y(c,l,u),r.extent,o))}}function k(e,...t){if(this.__zooming){var n=S(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(hy(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=$h(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<g)){var s=Zh(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return _.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:uy(+e),_):r},_.filter=function(t){return arguments.length?(e=typeof t==`function`?t:uy(!!t),_):e},_.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:uy(!!e),_):i},_.extent=function(e){return arguments.length?(t=typeof e==`function`?e:uy([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),_):t},_.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],_):[a[0],a[1]]},_.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(e){return arguments.length?(n=e,_):n},_.duration=function(e){return arguments.length?(s=+e,_):s},_.interpolate=function(e){return arguments.length?(c=e,_):c},_.on=function(){var e=l.on.apply(l,arguments);return e===l?_:e},_.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,_):Math.sqrt(h)},_.tapDistance=function(e){return arguments.length?(g=+e,_):g},_}ae();var wy=(0,H.createContext)(null),Ty=wy.Provider,Ey={error001:()=>`[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001`,error002:()=>`It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.`,error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>`The React Flow parent container needs a width and a height to render the graph.`,error005:()=>`Only child nodes can use a parent extent.`,error006:()=>`Can't create edge. An edge needs a source and a target.`,error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?`target`:`source`} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>`Handle: No node id found. Make sure to only use a Handle inside a custom Node.`,error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Dy=Ey.error001();function X(e,t){let n=(0,H.useContext)(wy);if(n===null)throw Error(Dy);return Vp(n,e,t)}var Oy=()=>{let e=(0,H.useContext)(wy);if(e===null)throw Error(Dy);return(0,H.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ky=e=>e.userSelectionActive?`none`:`all`;function Ay({position:e,children:t,className:n,style:r,...i}){let a=X(ky),o=`${e}`.split(`-`);return H.createElement(`div`,{className:Ap([`react-flow__panel`,n,...o]),style:{...r,pointerEvents:a},...i},t)}function jy({proOptions:e,position:t=`bottom-right`}){return e?.hideAttribution?null:H.createElement(Ay,{position:t,className:`react-flow__attribution`,"data-message":`Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro`},H.createElement(`a`,{href:`https://reactflow.dev`,target:`_blank`,rel:`noopener noreferrer`,"aria-label":`React Flow attribution`},`React Flow`))}var My=(0,H.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{let d=(0,H.useRef)(null),[f,p]=(0,H.useState)({x:0,y:0,width:0,height:0}),m=Ap([`react-flow__edge-textwrapper`,l]);return(0,H.useEffect)(()=>{if(d.current){let e=d.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n===void 0||!n?null:H.createElement(`g`,{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:m,visibility:f.width?`visible`:`hidden`,...u},i&&H.createElement(`rect`,{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:`react-flow__edge-textbg`,style:a,rx:s,ry:s}),H.createElement(`text`,{className:`react-flow__edge-text`,y:f.height/2,dy:`0.3em`,ref:d,style:r},n),c)}),Ny=e=>({width:e.offsetWidth,height:e.offsetHeight}),Py=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Fy=(e={x:0,y:0},t)=>({x:Py(e.x,t[0][0],t[1][0]),y:Py(e.y,t[0][1],t[1][1])}),Iy=(e,t,n)=>e<t?Py(Math.abs(e-t),1,50)/50:e>n?-Py(Math.abs(e-n),1,50)/50:0,Ly=(e,t)=>{let n=Iy(e.x,35,t.width-35)*20,r=Iy(e.y,35,t.height-35)*20;return[n,r]},Ry=e=>e.getRootNode?.()||window?.document,zy=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),By=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Vy=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Hy=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Uy=(e,t)=>Vy(zy(By(e),By(t))),Wy=(e,t)=>{let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Gy=e=>Ky(e.width)&&Ky(e.height)&&Ky(e.x)&&Ky(e.y),Ky=e=>!isNaN(e)&&isFinite(e),Z=Symbol.for(`internals`),qy=[`Enter`,` `,`Escape`],Jy=(e,t)=>{},Yy=e=>`nativeEvent`in e;function Xy(e){let t=(Yy(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return[`INPUT`,`SELECT`,`TEXTAREA`].includes(t?.nodeName)||t?.hasAttribute(`contenteditable`)||!!t?.closest(`.nokey`)}var Zy=e=>`clientX`in e,Qy=(e,t)=>{let n=Zy(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},$y=()=>typeof navigator<`u`&&navigator?.userAgent?.indexOf(`Mac`)>=0,eb=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p=20})=>H.createElement(H.Fragment,null,H.createElement(`path`,{id:e,style:u,d:t,fill:`none`,className:`react-flow__edge-path`,markerEnd:d,markerStart:f}),p&&H.createElement(`path`,{d:t,fill:`none`,strokeOpacity:0,strokeWidth:p,className:`react-flow__edge-interaction`}),i&&Ky(n)&&Ky(r)?H.createElement(My,{x:n,y:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null);eb.displayName=`BaseEdge`;function tb(e,t,n){return n===void 0?n:r=>{let i=t().edges.find(t=>t.id===e);i&&n(r,{...i})}}function nb({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=n<e?n+i:n-i,o=Math.abs(r-t)/2,s=r<t?r+o:r-o;return[a,s,i,o]}function rb({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let c=e*.125+i*.375+o*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}var ib;(function(e){e.Strict=`strict`,e.Loose=`loose`})(ib||={});var ab;(function(e){e.Free=`free`,e.Vertical=`vertical`,e.Horizontal=`horizontal`})(ab||={});var ob;(function(e){e.Partial=`partial`,e.Full=`full`})(ob||={});var sb;(function(e){e.Bezier=`default`,e.Straight=`straight`,e.Step=`step`,e.SmoothStep=`smoothstep`,e.SimpleBezier=`simplebezier`})(sb||={});var cb;(function(e){e.Arrow=`arrow`,e.ArrowClosed=`arrowclosed`})(cb||={});var Q;(function(e){e.Left=`left`,e.Top=`top`,e.Right=`right`,e.Bottom=`bottom`})(Q||={});function lb({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Q.Left||e===Q.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function ub({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:i,targetPosition:a=Q.Top}){let[o,s]=lb({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,l]=lb({pos:a,x1:r,y1:i,x2:e,y2:t}),[u,d,f,p]=rb({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${o},${s} ${c},${l} ${r},${i}`,u,d,f,p]}var db=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Q.Bottom,targetPosition:a=Q.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})=>{let[g,_,v]=ub({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a});return H.createElement(eb,{path:g,labelX:_,labelY:v,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:h})});db.displayName=`SimpleBezierEdge`;var fb={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}},pb=({source:e,sourcePosition:t=Q.Bottom,target:n})=>t===Q.Left||t===Q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},mb=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function hb({source:e,sourcePosition:t=Q.Bottom,target:n,targetPosition:r=Q.Top,center:i,offset:a}){let o=fb[t],s=fb[r],c={x:e.x+o.x*a,y:e.y+o.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=pb({source:c,sourcePosition:t,target:l}),d=u.x===0?`y`:`x`,f=u[d],p=[],m,h,g={x:0,y:0},_={x:0,y:0},[v,y,b,x]=nb({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){m=i.x??v,h=i.y??y;let e=[{x:m,y:c.y},{x:m,y:l.y}],t=[{x:c.x,y:h},{x:l.x,y:h}];p=o[d]===f?d===`x`?e:t:d===`x`?t:e}else{let i=[{x:c.x,y:l.y}],u=[{x:l.x,y:c.y}];if(p=d===`x`?o.x===f?u:i:o.y===f?i:u,t===r){let t=Math.abs(e[d]-n[d]);if(t<=a){let r=Math.min(a-1,a-t);o[d]===f?g[d]=(c[d]>e[d]?-1:1)*r:_[d]=(l[d]>n[d]?-1:1)*r}}if(t!==r){let e=d===`x`?`y`:`x`,t=o[d]===s[e],n=c[e]>l[e],r=c[e]<l[e];(o[d]===1&&(!t&&n||t&&r)||o[d]!==1&&(!t&&r||t&&n))&&(p=d===`x`?i:u)}let v={x:c.x+g.x,y:c.y+g.y},y={x:l.x+_.x,y:l.y+_.y},b=Math.max(Math.abs(v.x-p[0].x),Math.abs(y.x-p[0].x)),x=Math.max(Math.abs(v.y-p[0].y),Math.abs(y.y-p[0].y));b>=x?(m=(v.x+y.x)/2,h=p[0].y):(m=p[0].x,h=(v.y+y.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...p,{x:l.x+_.x,y:l.y+_.y},n],m,h,b,x]}function gb(e,t,n,r){let i=Math.min(mb(e,t)/2,mb(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${o+i*c}Q ${a},${o} ${a+i*s},${o}`}function _b({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:i,targetPosition:a=Q.Top,borderRadius:o=5,centerX:s,centerY:c,offset:l=20}){let[u,d,f,p,m]=hb({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((e,t,n)=>{let r=``;return r=n>0&&n<u.length-1?gb(u[n-1],t,u[n+1],o):`${n===0?`M`:`L`}${t.x} ${t.y}`,e+=r,e},``),d,f,p,m]}var vb=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:d=Q.Bottom,targetPosition:f=Q.Top,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=_b({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:h?.borderRadius,offset:h?.offset});return H.createElement(eb,{path:_,labelX:v,labelY:y,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:m,interactionWidth:g})});vb.displayName=`SmoothStepEdge`;var yb=(0,H.memo)(e=>H.createElement(vb,{...e,pathOptions:(0,H.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));yb.displayName=`StepEdge`;function bb({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[i,a,o,s]=nb({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,o,s]}var xb=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})=>{let[m,h,g]=bb({sourceX:e,sourceY:t,targetX:n,targetY:r});return H.createElement(eb,{path:m,labelX:h,labelY:g,label:i,labelStyle:a,labelShowBg:o,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,interactionWidth:p})});xb.displayName=`StraightEdge`;function Sb(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cb({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Q.Left:return[t-Sb(t-r,a),n];case Q.Right:return[t+Sb(r-t,a),n];case Q.Top:return[t,n-Sb(n-i,a)];case Q.Bottom:return[t,n+Sb(i-n,a)]}}function wb({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:i,targetPosition:a=Q.Top,curvature:o=.25}){let[s,c]=Cb({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[l,u]=Cb({pos:a,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,p,m]=rb({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${i}`,d,f,p,m]}var Tb=(0,H.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Q.Bottom,targetPosition:a=Q.Top,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,pathOptions:h,interactionWidth:g})=>{let[_,v,y]=wb({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:a,curvature:h?.curvature});return H.createElement(eb,{path:_,labelX:v,labelY:y,label:o,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:m,interactionWidth:g})});Tb.displayName=`BezierEdge`;var Eb=(0,H.createContext)(null),Db=Eb.Provider;Eb.Consumer;var Ob=()=>(0,H.useContext)(Eb),kb=e=>`id`in e&&`source`in e&&`target`in e,Ab=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||``}-${n}${r||``}`,jb=(e,t)=>e===void 0?``:typeof e==`string`?e:`${t?`${t}__`:``}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join(`&`)}`,Mb=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),Nb=(e,t)=>{if(!e.source||!e.target)return Ey.error006(),t;let n;return n=kb(e)?{...e}:{...e,id:Ab(e)},Mb(n,t)?t:t.concat(n)},Pb=({x:e,y:t},[n,r,i],a,[o,s])=>{let c={x:(e-n)/i,y:(t-r)/i};return a?{x:o*Math.round(c.x/o),y:s*Math.round(c.y/s)}:c},Fb=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Ib=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Lb=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};let n=e.reduce((e,n)=>{let{x:r,y:i}=Ib(n,t).positionAbsolute;return zy(e,By({x:r,y:i,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vy(n)},Rb=(e,t,[n,r,i]=[0,0,1],a=!1,o=!1,s=[0,0])=>{let c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:i=!1}=e;if(o&&!r||i)return!1;let{positionAbsolute:u}=Ib(e,s),d={x:u.x,y:u.y,width:t||0,height:n||0},f=Wy(c,d),p=t===void 0||n===void 0||t===null||n===null,m=a&&f>0,h=(t||0)*(n||0);(p||m||f>=h||e.dragging)&&l.push(e)}),l},zb=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},Bb=(e,t,n,r,i,a=.1)=>{let o=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Py(Math.min(o,s),r,i),l=e.x+e.width/2,u=e.y+e.height/2,d=t/2-l*c,f=n/2-u*c;return{x:d,y:f,zoom:c}},Vb=(e,t=0)=>e.transition().duration(t);function Hb(e,t,n,r){return(t[n]||[]).reduce((t,i)=>(`${e.id}-${i.id}-${n}`!==r&&t.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),t),[])}function Ub(e,t,n,r,i,a){let{x:o,y:s}=Qy(e),c=t.elementsFromPoint(o,s).find(e=>e.classList.contains(`react-flow__handle`));if(c){let e=c.getAttribute(`data-nodeid`);if(e){let t=Jb(void 0,c),r=c.getAttribute(`data-handleid`),o=a({nodeId:e,id:r,type:t});if(o){let a=i.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:a?.x||n.x,y:a?.y||n.y},validHandleResult:o}}}}let l=[],u=1/0;if(i.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=a(e);t<=u&&(t<u?l=[{handle:e,validHandleResult:n}]:t===u&&l.push({handle:e,validHandleResult:n}),u=t)}}),!l.length)return{handle:null,validHandleResult:Gb()};if(l.length===1)return l[0];let d=l.some(({validHandleResult:e})=>e.isValid),f=l.some(({handle:e})=>e.type===`target`);return l.find(({handle:e,validHandleResult:t})=>f?e.type===`target`:d?t.isValid:!0)||l[0]}var Wb={source:null,target:null,sourceHandle:null,targetHandle:null},Gb=()=>({handleDomNode:null,isValid:!1,connection:Wb,endHandle:null});function Kb(e,t,n,r,i,a,o){let s=i===`target`,c=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),l={...Gb(),handleDomNode:c};if(c){let e=Jb(void 0,c),i=c.getAttribute(`data-nodeid`),o=c.getAttribute(`data-handleid`),u=c.classList.contains(`connectable`),d=c.classList.contains(`connectableend`),f={source:s?i:n,sourceHandle:s?o:r,target:s?n:i,targetHandle:s?r:o};l.connection=f,u&&d&&(t===ib.Strict?s&&e===`source`||!s&&e===`target`:i!==n||o!==r)&&(l.endHandle={nodeId:i,handleId:o,type:e},l.isValid=a(f))}return l}function qb({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,i)=>{if(i[Z]){let{handleBounds:a}=i[Z],o=[],s=[];a&&(o=Hb(i,a,`source`,`${t}-${n}-${r}`),s=Hb(i,a,`target`,`${t}-${n}-${r}`)),e.push(...o,...s)}return e},[])}function Jb(e,t){return e||(t?.classList.contains(`target`)?`target`:t?.classList.contains(`source`)?`source`:null)}function Yb(e){e?.classList.remove(`valid`,`connecting`,`react-flow__handle-valid`,`react-flow__handle-connecting`)}function Xb(e,t){let n=null;return t?n=`valid`:e&&!t&&(n=`invalid`),n}function Zb({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:a,setState:o,isValidConnection:s,edgeUpdaterType:c,onReconnectEnd:l}){let u=Ry(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:p,connectionRadius:m,onConnectStart:h,panBy:g,getNodes:_,cancelConnection:v}=a(),y=0,b,{x,y:S}=Qy(e),C=u?.elementFromPoint(x,S),w=Jb(c,C),T=f?.getBoundingClientRect();if(!T||!w)return;let E,D=Qy(e,T),O=!1,k=null,A=!1,j=null,M=qb({nodes:_(),nodeId:n,handleId:t,handleType:w}),N=()=>{if(!p)return;let[e,t]=Ly(D,T);g({x:e,y:t}),y=requestAnimationFrame(N)};o({connectionPosition:D,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:w,connectionStartHandle:{nodeId:n,handleId:t,type:w},connectionEndHandle:null}),h?.(e,{nodeId:n,handleId:t,handleType:w});function P(e){let{transform:r}=a();D=Qy(e,T);let{handle:c,validHandleResult:l}=Ub(e,u,Pb(D,r,!1,[1,1]),m,M,e=>Kb(e,d,n,t,i?`target`:`source`,s,u));if(b=c,O||=(N(),!0),j=l.handleDomNode,k=l.connection,A=l.isValid,o({connectionPosition:b&&A?Fb({x:b.x,y:b.y},r):D,connectionStatus:Xb(!!b,A),connectionEndHandle:l.endHandle}),!b&&!A&&!j)return Yb(E);k.source!==k.target&&j&&(Yb(E),E=j,j.classList.add(`connecting`,`react-flow__handle-connecting`),j.classList.toggle(`valid`,A),j.classList.toggle(`react-flow__handle-valid`,A))}function F(e){(b||j)&&k&&A&&r?.(k),a().onConnectEnd?.(e),c&&l?.(e),Yb(E),v(),cancelAnimationFrame(y),O=!1,A=!1,k=null,j=null,u.removeEventListener(`mousemove`,P),u.removeEventListener(`mouseup`,F),u.removeEventListener(`touchmove`,P),u.removeEventListener(`touchend`,F)}u.addEventListener(`mousemove`,P),u.addEventListener(`mouseup`,F),u.addEventListener(`touchmove`,P),u.addEventListener(`touchend`,F)}var Qb=()=>!0,$b=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),ex=(e,t,n)=>r=>{let{connectionStartHandle:i,connectionEndHandle:a,connectionClickStartHandle:o}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n}},tx=(0,H.forwardRef)(({type:e=`source`,position:t=Q.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:o,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p)=>{let m=o||null,h=e===`target`,g=Oy(),_=Ob(),{connectOnClick:v,noPanClassName:y}=X($b,Wp),{connecting:b,clickConnecting:x}=X(ex(_,m,e),Wp);_||g.getState().onError?.(`010`,Ey.error010());let S=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),i={...t,...e};if(r){let{edges:e,setEdges:t}=g.getState();t(Nb(i,e))}n?.(i),s?.(i)},C=e=>{if(!_)return;let t=Zy(e);i&&(t&&e.button===0||!t)&&Zb({event:e,handleId:m,nodeId:_,onConnect:S,isTarget:h,getState:g.getState,setState:g.setState,isValidConnection:n||g.getState().isValidConnection||Qb}),t?u?.(e):d?.(e)},w=t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:o,connectionMode:s,isValidConnection:c}=g.getState();if(!_||!o&&!i)return;if(!o){r?.(t,{nodeId:_,handleId:m,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:m}});return}let l=Ry(t.target),u=n||c||Qb,{connection:d,isValid:f}=Kb({nodeId:_,id:m,type:e},s,o.nodeId,o.handleId||null,o.type,u,l);f&&S(d),a?.(t),g.setState({connectionClickStartHandle:null})};return H.createElement(`div`,{"data-handleid":m,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${m}-${e}`,className:Ap([`react-flow__handle`,`react-flow__handle-${t}`,`nodrag`,y,l,{source:!h,target:h,connectable:r,connectablestart:i,connectableend:a,connecting:x,connectionindicator:r&&(i&&!b||a&&b)}]),onMouseDown:C,onTouchStart:C,onClick:v?w:void 0,ref:p,...f},c)});tx.displayName=`Handle`;var nx=(0,H.memo)(tx),rx=({data:e,isConnectable:t,targetPosition:n=Q.Top,sourcePosition:r=Q.Bottom})=>H.createElement(H.Fragment,null,H.createElement(nx,{type:`target`,position:n,isConnectable:t}),e?.label,H.createElement(nx,{type:`source`,position:r,isConnectable:t}));rx.displayName=`DefaultNode`;var ix=(0,H.memo)(rx),ax=({data:e,isConnectable:t,sourcePosition:n=Q.Bottom})=>H.createElement(H.Fragment,null,e?.label,H.createElement(nx,{type:`source`,position:n,isConnectable:t}));ax.displayName=`InputNode`;var ox=(0,H.memo)(ax),sx=({data:e,isConnectable:t,targetPosition:n=Q.Top})=>H.createElement(H.Fragment,null,H.createElement(nx,{type:`target`,position:n,isConnectable:t}),e?.label);sx.displayName=`OutputNode`;var cx=(0,H.memo)(sx),lx=()=>null;lx.displayName=`GroupNode`;var ux=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),dx=e=>e.id;function fx(e,t){return Wp(e.selectedNodes.map(dx),t.selectedNodes.map(dx))&&Wp(e.selectedEdges.map(dx),t.selectedEdges.map(dx))}var px=(0,H.memo)(({onSelectionChange:e})=>{let t=Oy(),{selectedNodes:n,selectedEdges:r}=X(ux,fx);return(0,H.useEffect)(()=>{let i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChange.forEach(e=>e(i))},[n,r,e]),null});px.displayName=`SelectionListener`;var mx=e=>!!e.onSelectionChange;function hx({onSelectionChange:e}){let t=X(mx);return e||t?H.createElement(px,{onSelectionChange:e}):null}var gx=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function _x(e,t){(0,H.useEffect)(()=>{e!==void 0&&t(e)},[e])}function $(e,t,n){(0,H.useEffect)(()=>{t!==void 0&&n({[e]:t})},[t])}var vx=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:a,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:p,elevateNodesOnSelect:m,minZoom:h,maxZoom:g,nodeExtent:_,onNodesChange:v,onEdgesChange:y,elementsSelectable:b,connectionMode:x,snapGrid:S,snapToGrid:C,translateExtent:w,connectOnClick:T,defaultEdgeOptions:E,fitView:D,fitViewOptions:O,onNodesDelete:k,onEdgesDelete:A,onNodeDrag:j,onNodeDragStart:M,onNodeDragStop:N,onSelectionDrag:P,onSelectionDragStart:F,onSelectionDragStop:I,noPanClassName:L,nodeOrigin:R,rfId:ee,autoPanOnConnect:te,autoPanOnNodeDrag:ne,onError:re,connectionRadius:ie,isValidConnection:ae,nodeDragThreshold:oe})=>{let{setNodes:se,setEdges:ce,setDefaultNodesAndEdges:le,setMinZoom:ue,setMaxZoom:de,setTranslateExtent:fe,setNodeExtent:pe,reset:me}=X(gx,Wp),z=Oy();return(0,H.useEffect)(()=>{let e=r?.map(e=>({...e,...E}));return le(n,e),()=>{me()}},[]),$(`defaultEdgeOptions`,E,z.setState),$(`connectionMode`,x,z.setState),$(`onConnect`,i,z.setState),$(`onConnectStart`,a,z.setState),$(`onConnectEnd`,o,z.setState),$(`onClickConnectStart`,s,z.setState),$(`onClickConnectEnd`,c,z.setState),$(`nodesDraggable`,l,z.setState),$(`nodesConnectable`,u,z.setState),$(`nodesFocusable`,d,z.setState),$(`edgesFocusable`,f,z.setState),$(`edgesUpdatable`,p,z.setState),$(`elementsSelectable`,b,z.setState),$(`elevateNodesOnSelect`,m,z.setState),$(`snapToGrid`,C,z.setState),$(`snapGrid`,S,z.setState),$(`onNodesChange`,v,z.setState),$(`onEdgesChange`,y,z.setState),$(`connectOnClick`,T,z.setState),$(`fitViewOnInit`,D,z.setState),$(`fitViewOnInitOptions`,O,z.setState),$(`onNodesDelete`,k,z.setState),$(`onEdgesDelete`,A,z.setState),$(`onNodeDrag`,j,z.setState),$(`onNodeDragStart`,M,z.setState),$(`onNodeDragStop`,N,z.setState),$(`onSelectionDrag`,P,z.setState),$(`onSelectionDragStart`,F,z.setState),$(`onSelectionDragStop`,I,z.setState),$(`noPanClassName`,L,z.setState),$(`nodeOrigin`,R,z.setState),$(`rfId`,ee,z.setState),$(`autoPanOnConnect`,te,z.setState),$(`autoPanOnNodeDrag`,ne,z.setState),$(`onError`,re,z.setState),$(`connectionRadius`,ie,z.setState),$(`isValidConnection`,ae,z.setState),$(`nodeDragThreshold`,oe,z.setState),_x(e,se),_x(t,ce),_x(h,ue),_x(g,de),_x(w,fe),_x(_,pe),null},yx={display:`none`},bx={position:`absolute`,width:1,height:1,margin:-1,border:0,padding:0,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,clipPath:`inset(100%)`},xx=`react-flow__node-desc`,Sx=`react-flow__edge-desc`,Cx=`react-flow__aria-live`,wx=e=>e.ariaLiveMessage;function Tx({rfId:e}){let t=X(wx);return H.createElement(`div`,{id:`${Cx}-${e}`,"aria-live":`assertive`,"aria-atomic":`true`,style:bx},t)}function Ex({rfId:e,disableKeyboardA11y:t}){return H.createElement(H.Fragment,null,H.createElement(`div`,{id:`${xx}-${e}`,style:yx},`Press enter or space to select a node.`,!t&&`You can then use the arrow keys to move the node around.`,` Press delete to remove it and escape to cancel.`,` `),H.createElement(`div`,{id:`${Sx}-${e}`,style:yx},`Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.`),!t&&H.createElement(Tx,{rfId:e}))}var Dx=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,H.useState)(!1),i=(0,H.useRef)(!1),a=(0,H.useRef)(new Set([])),[o,s]=(0,H.useMemo)(()=>{if(e!==null){let t=(Array.isArray(e)?e:[e]).filter(e=>typeof e==`string`).map(e=>e.split(`+`)),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,H.useEffect)(()=>{let n=typeof document<`u`?document:null,c=t?.target||n;if(e!==null){let e=e=>{if(i.current=e.ctrlKey||e.metaKey||e.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Xy(e))return!1;let n=kx(e.code,s);a.current.add(e[n]),Ox(o,a.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Xy(e))return!1;let n=kx(e.code,s);Ox(o,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[n]),e.key===`Meta`&&a.current.clear(),i.current=!1},l=()=>{a.current.clear(),r(!1)};return c?.addEventListener(`keydown`,e),c?.addEventListener(`keyup`,n),window.addEventListener(`blur`,l),()=>{c?.removeEventListener(`keydown`,e),c?.removeEventListener(`keyup`,n),window.removeEventListener(`blur`,l)}}},[e,r]),n};function Ox(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function kx(e,t){return t.includes(e)?`code`:`key`}function Ax(e,t,n,r){let i=e.parentNode||e.parentId;if(!i)return n;let a=t.get(i),o=Ib(a,r);return Ax(a,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(a[Z]?.z??0)>(n.z??0)?a[Z]?.z??0:n.z??0},r)}function jx(e,t,n){e.forEach(r=>{let i=r.parentNode||r.parentId;if(i&&!e.has(i))throw Error(`Parent node ${i} not found`);if(i||n?.[r.id]){let{x:i,y:a,z:o}=Ax(r,e,{...r.position,z:r[Z]?.z??0},t);r.positionAbsolute={x:i,y:a},r[Z].z=o,n?.[r.id]&&(r[Z].isParent=!0)}})}function Mx(e,t,n,r){let i=new Map,a={},o=r?1e3:0;return e.forEach(e=>{let n=(Ky(e.zIndex)?e.zIndex:0)+(e.selected?o:0),r=t.get(e.id),s={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(a[c]=!0);let l=r?.type&&r?.type!==e.type;Object.defineProperty(s,Z,{enumerable:!1,value:{handleBounds:l?void 0:r?.[Z]?.handleBounds,z:n}}),i.set(e.id,s)}),jx(i,n,a),i}function Nx(e,t={}){let{getNodes:n,width:r,height:i,minZoom:a,maxZoom:o,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:d}=e(),f=t.initial&&!l&&u;if(s&&c&&(f||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),l=e.every(e=>e.width&&e.height);if(e.length>0&&l){let n=Lb(e,d),{x:l,y:u,zoom:f}=Bb(n,r,i,t.minZoom??a,t.maxZoom??o,t.padding??.1),p=py.translate(l,u).scale(f);return typeof t.duration==`number`&&t.duration>0?s.transform(Vb(c,t.duration),p):s.transform(c,p),!0}}return!1}function Px(e,t){return e.forEach(e=>{let n=t.get(e.id);n&&t.set(n.id,{...n,[Z]:n[Z],selected:e.selected})}),new Map(t)}function Fx(e,t){return t.map(t=>{let n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function Ix({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:i,edges:a,onNodesChange:o,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e?.length&&(c&&r({nodeInternals:Px(e,i)}),o?.(e)),t?.length&&(l&&r({edges:Fx(t,a)}),s?.(t))}var Lx=()=>{},Rx={zoomIn:Lx,zoomOut:Lx,zoomTo:Lx,getZoom:()=>1,setViewport:Lx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Lx,fitBounds:Lx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},zx=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Bx=()=>{let e=Oy(),{d3Zoom:t,d3Selection:n}=X(zx,Wp);return(0,H.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(Vb(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(Vb(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(Vb(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{let[a,o,s]=e.getState().transform,c=py.translate(r.x??a,r.y??o).scale(r.zoom??s);t.transform(Vb(n,i?.duration),c)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>Nx(e.getState,t),setCenter:(r,i,a)=>{let{width:o,height:s,maxZoom:c}=e.getState(),l=a?.zoom===void 0?c:a.zoom,u=o/2-r*l,d=s/2-i*l,f=py.translate(u,d).scale(l);t.transform(Vb(n,a?.duration),f)},fitBounds:(r,i)=>{let{width:a,height:o,minZoom:s,maxZoom:c}=e.getState(),{x:l,y:u,zoom:d}=Bb(r,a,o,s,c,i?.padding??.1),f=py.translate(l,u).scale(d);t.transform(Vb(n,i?.duration),f)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:i}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Pb(t,n,r,i)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:i,domNode:a}=e.getState();if(!a)return t;let{x:o,y:s}=a.getBoundingClientRect(),c={x:t.x-o,y:t.y-s};return Pb(c,n,r,i)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:i,y:a}=r.getBoundingClientRect(),o=Fb(t,n);return{x:o.x+i,y:o.y+a}},viewportInitialized:!0}:Rx,[t,n])};function Vx(){let e=Bx(),t=Oy(),n=(0,H.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,H.useCallback)(e=>t.getState().nodeInternals.get(e),[]),i=(0,H.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),a=(0,H.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),o=(0,H.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:i,onNodesChange:a}=t.getState(),o=n(),s=typeof e==`function`?e(o):e;if(i)r(s);else if(a){let e=s.length===0?o.map(e=>({type:`remove`,id:e.id})):s.map(e=>({item:e,type:`reset`}));a(e)}},[]),s=(0,H.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:a}=t.getState(),o=typeof e==`function`?e(n):e;if(i)r(o);else if(a){let e=o.length===0?n.map(e=>({type:`remove`,id:e.id})):o.map(e=>({item:e,type:`reset`}));a(e)}},[]),c=(0,H.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:i,hasDefaultNodes:a,onNodesChange:o}=t.getState();if(a){let e=[...r(),...n];i(e)}else if(o){let e=n.map(e=>({item:e,type:`add`}));o(e)}},[]),l=(0,H.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:i,hasDefaultEdges:a,onEdgesChange:o}=t.getState();if(a)i([...r,...n]);else if(o){let e=n.map(e=>({item:e,type:`add`}));o(e)}},[]),u=(0,H.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[i,a,o]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:a,zoom:o}}},[]),d=(0,H.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:i,edges:a,hasDefaultNodes:o,hasDefaultEdges:s,onNodesDelete:c,onEdgesDelete:l,onNodesChange:u,onEdgesChange:d}=t.getState(),f=(e||[]).map(e=>e.id),p=(n||[]).map(e=>e.id),m=i().reduce((e,t)=>{let n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return(typeof t.deletable!=`boolean`||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),h=a.filter(e=>typeof e.deletable==`boolean`?e.deletable:!0),g=h.filter(e=>p.includes(e.id));if(m||g){let e=zb(m,h),n=[...g,...e],i=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);if((s||o)&&(s&&t.setState({edges:a.filter(e=>!i.includes(e.id))}),o&&(m.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),i.length>0&&(l?.(n),d&&d(i.map(e=>({id:e,type:`remove`})))),m.length>0&&(c?.(m),u)){let e=m.map(e=>({id:e.id,type:`remove`}));u(e)}}},[]),f=(0,H.useCallback)(e=>{let n=Gy(e),r=n?null:t.getState().nodeInternals.get(e.id);return!n&&!r?[null,null,n]:[n?e:Hy(r),r,n]},[]),p=(0,H.useCallback)((e,n=!0,r)=>{let[i,a,o]=f(e);return i?(r||t.getState().getNodes()).filter(e=>{if(!o&&(e.id===a.id||!e.positionAbsolute))return!1;let t=Hy(e),r=Wy(t,i);return n&&r>0||r>=i.width*i.height}):[]},[]),m=(0,H.useCallback)((e,t,n=!0)=>{let[r]=f(e);if(!r)return!1;let i=Wy(r,t);return n&&i>0||i>=r.width*r.height},[]);return(0,H.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:a,setNodes:o,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:d,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,r,i,a,o,s,c,l,u,d,p,m])}var Hx={actInsideInputWithModifier:!1},Ux=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=Oy(),{deleteElements:r}=Vx(),i=Dx(e,Hx),a=Dx(t);(0,H.useEffect)(()=>{if(i){let{edges:e,getNodes:t}=n.getState(),i=t().filter(e=>e.selected),a=e.filter(e=>e.selected);r({nodes:i,edges:a}),n.setState({nodesSelectionActive:!1})}},[i]),(0,H.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])};function Wx(e){let t=Oy();(0,H.useEffect)(()=>{let n,r=()=>{if(!e.current)return;let n=Ny(e.current);(n.height===0||n.width===0)&&t.getState().onError?.(`004`,Ey.error004()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener(`resize`,r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener(`resize`,r),n&&e.current&&n.unobserve(e.current)}},[])}var Gx={position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},Kx=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,qx=e=>({x:e.x,y:e.y,zoom:e.k}),Jx=(e,t)=>e.target.closest(`.${t}`),Yx=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xx=e=>{let t=e.ctrlKey&&$y()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Zx=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Qx=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:s=.5,panOnScrollMode:c=ab.Free,zoomOnDoubleClick:l=!0,elementsSelectable:u,panOnDrag:d=!0,defaultViewport:f,translateExtent:p,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:_=!0,children:v,noWheelClassName:y,noPanClassName:b})=>{let x=(0,H.useRef)(),S=Oy(),C=(0,H.useRef)(!1),w=(0,H.useRef)(!1),T=(0,H.useRef)(null),E=(0,H.useRef)({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:O,d3ZoomHandler:k,userSelectionActive:A}=X(Zx,Wp),j=Dx(g),M=(0,H.useRef)(0),N=(0,H.useRef)(!1),P=(0,H.useRef)();return Wx(T),(0,H.useEffect)(()=>{if(T.current){let e=T.current.getBoundingClientRect(),t=Cy().scaleExtent([m,h]).translateExtent(p),n=Zh(T.current).call(t),r=py.translate(f.x,f.y).scale(Py(f.zoom,m,h)),i=[[0,0],[e.width,e.height]],a=t.constrain()(r,i,p);t.transform(n,a),t.wheelDelta(Xx),S.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on(`wheel.zoom`),transform:[a.x,a.y,a.k],domNode:T.current.closest(`.react-flow`)})}},[]),(0,H.useEffect)(()=>{O&&D&&(o&&!j&&!A?O.on(`wheel.zoom`,r=>{if(Jx(r,y))return!1;r.preventDefault(),r.stopImmediatePropagation();let i=O.property(`__zoom`).k||1;if(r.ctrlKey&&a){let e=$h(r),t=Xx(r),n=i*2**t;D.scaleTo(O,n,e,r);return}let o=r.deltaMode===1?20:1,l=c===ab.Vertical?0:r.deltaX*o,u=c===ab.Horizontal?0:r.deltaY*o;!$y()&&r.shiftKey&&c!==ab.Vertical&&(l=r.deltaY*o,u=0),D.translateBy(O,-(l/i)*s,-(u/i)*s,{internal:!0});let d=qx(O.property(`__zoom`)),{onViewportChangeStart:f,onViewportChange:p,onViewportChangeEnd:m}=S.getState();clearTimeout(P.current),N.current||(N.current=!0,t?.(r,d),f?.(d)),N.current&&(e?.(r,d),p?.(d),P.current=setTimeout(()=>{n?.(r,d),m?.(d),N.current=!1},150))},{passive:!1}):k!==void 0&&O.on(`wheel.zoom`,function(e,t){if(!_&&e.type===`wheel`&&!e.ctrlKey||Jx(e,y))return null;e.preventDefault(),k.call(this,e,t)},{passive:!1}))},[A,o,c,O,D,k,j,a,_,y,t,e,n]),(0,H.useEffect)(()=>{D&&D.on(`start`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=S.getState(),r=qx(e.transform);C.current=!0,E.current=r,e.sourceEvent?.type===`mousedown`&&S.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[D,t]),(0,H.useEffect)(()=>{D&&(A&&!C.current?D.on(`zoom`,null):A||D.on(`zoom`,t=>{let{onViewportChange:n}=S.getState();if(S.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),w.current=!!(r&&Yx(d,M.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=qx(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[A,D,e,d,r]),(0,H.useEffect)(()=>{D&&D.on(`end`,e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:t}=S.getState();if(C.current=!1,S.setState({paneDragging:!1}),r&&Yx(d,M.current??0)&&!w.current&&r(e.sourceEvent),w.current=!1,(n||t)&&Kx(E.current,e.transform)){let r=qx(e.transform);E.current=r,clearTimeout(x.current),x.current=setTimeout(()=>{t?.(r),n?.(e.sourceEvent,r)},o?150:0)}})},[D,o,d,n,r]),(0,H.useEffect)(()=>{D&&D.filter(e=>{let t=j||i,n=a&&e.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&e.button===1&&e.type===`mousedown`&&(Jx(e,`react-flow__node`)||Jx(e,`react-flow__edge`)))return!0;if(!d&&!t&&!o&&!l&&!a||A||!l&&e.type===`dblclick`||Jx(e,y)&&e.type===`wheel`||Jx(e,b)&&(e.type!==`wheel`||o&&e.type===`wheel`&&!j)||!a&&e.ctrlKey&&e.type===`wheel`||!t&&!o&&!n&&e.type===`wheel`||!d&&(e.type===`mousedown`||e.type===`touchstart`)||Array.isArray(d)&&!d.includes(e.button)&&e.type===`mousedown`)return!1;let r=Array.isArray(d)&&d.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||e.type===`wheel`)&&r})},[A,D,i,a,o,l,d,u,j]),H.createElement(`div`,{className:`react-flow__renderer`,ref:T,style:Gx},v)},$x=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function eS(){let{userSelectionActive:e,userSelectionRect:t}=X($x,Wp);return e&&t?H.createElement(`div`,{className:`react-flow__selection react-flow__container`,style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function tS(e,t){let n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){let e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function nS(e,t){if(e.some(e=>e.type===`reset`))return e.filter(e=>e.type===`reset`).map(e=>e.item);let n=e.filter(e=>e.type===`add`).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(r.length===0)return t.push(n),t;let i={...n};for(let e of r)if(e)switch(e.type){case`select`:i.selected=e.selected;break;case`position`:e.position!==void 0&&(i.position=e.position),e.positionAbsolute!==void 0&&(i.positionAbsolute=e.positionAbsolute),e.dragging!==void 0&&(i.dragging=e.dragging),i.expandParent&&tS(t,i);break;case`dimensions`:e.dimensions!==void 0&&(i.width=e.dimensions.width,i.height=e.dimensions.height),e.updateStyle!==void 0&&(i.style={...i.style||{},...e.dimensions}),typeof e.resizing==`boolean`&&(i.resizing=e.resizing),i.expandParent&&tS(t,i);break;case`remove`:return t}return t.push(i),t},n)}function rS(e,t){return nS(e,t)}var iS=(e,t)=>({id:e,type:`select`,selected:t});function aS(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(iS(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(iS(n.id,!1))),e},[])}var oS=(e,t)=>n=>{n.target===t.current&&e?.(n)},sS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),cS=(0,H.memo)(({isSelecting:e,selectionMode:t=ob.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:s,onPaneMouseEnter:c,onPaneMouseMove:l,onPaneMouseLeave:u,children:d})=>{let f=(0,H.useRef)(null),p=Oy(),m=(0,H.useRef)(0),h=(0,H.useRef)(0),g=(0,H.useRef)(),{userSelectionActive:_,elementsSelectable:v,dragging:y}=X(sS,Wp),b=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),m.current=0,h.current=0},x=e=>{a?.(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},S=e=>{if(Array.isArray(n)&&n?.includes(2)){e.preventDefault();return}o?.(e)},C=s?e=>s(e):void 0,w=t=>{let{resetSelectedElements:n,domNode:i}=p.getState();if(g.current=i?.getBoundingClientRect(),!v||!e||t.button!==0||t.target!==f.current||!g.current)return;let{x:a,y:o}=Qy(t,g.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:a,startY:o,x:a,y:o}}),r?.(t)},T=n=>{let{userSelectionRect:r,nodeInternals:i,edges:a,transform:o,onNodesChange:s,onEdgesChange:c,nodeOrigin:l,getNodes:u}=p.getState();if(!e||!g.current||!r)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});let d=Qy(n,g.current),f=r.startX??0,_=r.startY??0,v={...r,x:d.x<f?d.x:f,y:d.y<_?d.y:_,width:Math.abs(d.x-f),height:Math.abs(d.y-_)},y=u(),b=Rb(i,v,o,t===ob.Partial,!0,l),x=zb(b,a).map(e=>e.id),S=b.map(e=>e.id);if(m.current!==S.length){m.current=S.length;let e=aS(y,S);e.length&&s?.(e)}if(h.current!==x.length){h.current=x.length;let e=aS(a,x);e.length&&c?.(e)}p.setState({userSelectionRect:v})},E=e=>{if(e.button!==0)return;let{userSelectionRect:t}=p.getState();!_&&t&&e.target===f.current&&x?.(e),p.setState({nodesSelectionActive:m.current>0}),b(),i?.(e)},D=e=>{_&&(p.setState({nodesSelectionActive:m.current>0}),i?.(e)),b()},O=v&&(e||_);return H.createElement(`div`,{className:Ap([`react-flow__pane`,{dragging:y,selection:e}]),onClick:O?void 0:oS(x,f),onContextMenu:oS(S,f),onWheel:oS(C,f),onMouseEnter:O?void 0:c,onMouseDown:O?w:void 0,onMouseMove:O?T:l,onMouseUp:O?E:void 0,onMouseLeave:O?D:u,ref:f,style:Gx},d,H.createElement(eS,null))});cS.displayName=`Pane`;function lS(e,t){let n=e.parentNode||e.parentId;if(!n)return!1;let r=t.get(n);return r?r.selected?!0:lS(r,t):!1}function uS(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function dS(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!lS(n,e))&&(n.draggable||t&&n.draggable===void 0)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function fS(e,t){return!t||t===`parent`?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function pS(e,t,n,r,i=[0,0],a){let o=fS(e,e.extent||r),s=o,c=e.parentNode||e.parentId;if(e.extent===`parent`&&!e.expandParent)if(c&&e.width&&e.height){let t=n.get(c),{x:r,y:a}=Ib(t,i).positionAbsolute;s=t&&Ky(r)&&Ky(a)&&Ky(t.width)&&Ky(t.height)?[[r+e.width*i[0],a+e.height*i[1]],[r+t.width-e.width+e.width*i[0],a+t.height-e.height+e.height*i[1]]]:s}else a?.(`005`,Ey.error005()),s=o;else if(e.extent&&c&&e.extent!==`parent`){let t=n.get(c),{x:r,y:a}=Ib(t,i).positionAbsolute;s=[[e.extent[0][0]+r,e.extent[0][1]+a],[e.extent[1][0]+r,e.extent[1][1]+a]]}let l={x:0,y:0};if(c){let e=n.get(c);l=Ib(e,i).positionAbsolute}let u=s&&s!==`parent`?Fy(t,s):t;return{position:{x:u.x-l.x,y:u.y-l.y},positionAbsolute:u}}function mS({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}var hS=(e,t,n,r)=>{let i=t.querySelectorAll(e);if(!i||!i.length)return null;let a=Array.from(i),o=t.getBoundingClientRect(),s={x:o.width*r[0],y:o.height*r[1]};return a.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute(`data-handleid`),position:e.getAttribute(`data-handlepos`),x:(t.left-o.left-s.x)/n,y:(t.top-o.top-s.y)/n,...Ny(e)}})};function gS(e,t,n){return n===void 0?n:r=>{let i=t().nodeInternals.get(e);i&&n(r,{...i})}}function _S({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:s,onError:c}=t.getState(),l=s.get(e);if(!l){c?.(`012`,Ey.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function vS(){let e=Oy();return(0,H.useCallback)(({sourceEvent:t})=>{let{transform:n,snapGrid:r,snapToGrid:i}=e.getState(),a=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY,s={x:(a-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:i?r[0]*Math.round(s.x/r[0]):s.x,ySnapped:i?r[1]*Math.round(s.y/r[1]):s.y,...s}},[])}function yS(e){return(t,n,r)=>e?.(t,r)}function bS({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,selectNodesOnDrag:o}){let s=Oy(),[c,l]=(0,H.useState)(!1),u=(0,H.useRef)([]),d=(0,H.useRef)({x:null,y:null}),f=(0,H.useRef)(0),p=(0,H.useRef)(null),m=(0,H.useRef)({x:0,y:0}),h=(0,H.useRef)(null),g=(0,H.useRef)(!1),_=(0,H.useRef)(!1),v=(0,H.useRef)(!1),y=vS();return(0,H.useEffect)(()=>{if(e?.current){let c=Zh(e.current),b=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:a,updateNodePositions:o,nodeExtent:c,snapGrid:f,snapToGrid:p,nodeOrigin:m,onError:g}=s.getState();d.current={x:e,y:t};let _=!1,v={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&c){let e=Lb(u.current,m);v=By(e)}if(u.current=u.current.map(r=>{let i={x:e-r.distance.x,y:t-r.distance.y};p&&(i.x=f[0]*Math.round(i.x/f[0]),i.y=f[1]*Math.round(i.y/f[1]));let a=[[c[0][0],c[0][1]],[c[1][0],c[1][1]]];u.current.length>1&&c&&!r.extent&&(a[0][0]=r.positionAbsolute.x-v.x+c[0][0],a[1][0]=r.positionAbsolute.x+(r.width??0)-v.x2+c[1][0],a[0][1]=r.positionAbsolute.y-v.y+c[0][1],a[1][1]=r.positionAbsolute.y+(r.height??0)-v.y2+c[1][1]);let o=pS(r,i,n,a,m,g);return _=_||r.position.x!==o.position.x||r.position.y!==o.position.y,r.position=o.position,r.positionAbsolute=o.positionAbsolute,r}),!_)return;o(u.current,!0,!0),l(!0);let y=i?r:yS(a);if(y&&h.current){let[e,t]=mS({nodeId:i,dragItems:u.current,nodeInternals:n});y(h.current,e,t)}},x=()=>{if(!p.current)return;let[e,t]=Ly(m.current,p.current);if(e!==0||t!==0){let{transform:n,panBy:r}=s.getState();d.current.x=(d.current.x??0)-e/n[2],d.current.y=(d.current.y??0)-t/n[2],r({x:e,y:t})&&b(d.current)}f.current=requestAnimationFrame(x)},S=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:c,unselectNodesAndEdges:l,onNodeDragStart:f,onSelectionDragStart:p}=s.getState();_.current=!0;let m=i?f:yS(p);(!o||!a)&&!r&&i&&(n.get(i)?.selected||l()),i&&a&&o&&_S({id:i,store:s,nodeRef:e});let h=y(t);if(d.current=h,u.current=dS(n,c,h,i),m&&u.current){let[e,r]=mS({nodeId:i,dragItems:u.current,nodeInternals:n});m(t.sourceEvent,e,r)}};if(t)c.on(`.drag`,null);else{let t=fg().on(`start`,e=>{let{domNode:t,nodeDragThreshold:n}=s.getState();n===0&&S(e),v.current=!1,d.current=y(e),p.current=t?.getBoundingClientRect()||null,m.current=Qy(e.sourceEvent,p.current)}).on(`drag`,e=>{let t=y(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=s.getState();if(e.sourceEvent.type===`touchmove`&&e.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!g.current&&_.current&&n&&(g.current=!0,x()),!_.current){let n=t.xSnapped-(d?.current?.x??0),i=t.ySnapped-(d?.current?.y??0);Math.sqrt(n*n+i*i)>r&&S(e)}(d.current.x!==t.xSnapped||d.current.y!==t.ySnapped)&&u.current&&_.current&&(h.current=e.sourceEvent,m.current=Qy(e.sourceEvent,p.current),b(t))}}).on(`end`,e=>{if(!(!_.current||v.current)&&(l(!1),g.current=!1,_.current=!1,cancelAnimationFrame(f.current),u.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:a}=s.getState(),o=i?r:yS(a);if(t(u.current,!1,!1),o){let[t,r]=mS({nodeId:i,dragItems:u.current,nodeInternals:n});o(e.sourceEvent,t,r)}}}).filter(t=>{let i=t.target;return!t.button&&(!n||!uS(i,`.${n}`,e))&&(!r||uS(i,r,e))});return c.call(t),()=>{c.on(`.drag`,null)}}}},[e,t,n,r,a,s,i,o,y]),c}function xS(){let e=Oy();return(0,H.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:i,getNodes:a,snapToGrid:o,snapGrid:s,onError:c,nodesDraggable:l}=e.getState(),u=a().filter(e=>e.selected&&(e.draggable||l&&e.draggable===void 0)),d=o?s[0]:5,f=o?s[1]:5,p=t.isShiftPressed?4:1,m=t.x*d*p,h=t.y*f*p,g=u.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+h};o&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));let{positionAbsolute:i,position:a}=pS(e,t,n,r,void 0,c);e.position=a,e.positionAbsolute=i}return e});i(g,!0,!1)},[])}var SS={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},CS=e=>{let t=({id:t,type:n,data:r,xPos:i,yPos:a,xPosOrigin:o,yPosOrigin:s,selected:c,onClick:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:f,onContextMenu:p,onDoubleClick:m,style:h,className:g,isDraggable:_,isSelectable:v,isConnectable:y,isFocusable:b,selectNodesOnDrag:x,sourcePosition:S,targetPosition:C,hidden:w,resizeObserver:T,dragHandle:E,zIndex:D,isParent:O,noDragClassName:k,noPanClassName:A,initialized:j,disableKeyboardA11y:M,ariaLabel:N,rfId:P,hasHandleBounds:F})=>{let I=Oy(),L=(0,H.useRef)(null),R=(0,H.useRef)(null),ee=(0,H.useRef)(S),te=(0,H.useRef)(C),ne=(0,H.useRef)(n),re=v||_||l||u||d||f,ie=xS(),ae=gS(t,I.getState,u),oe=gS(t,I.getState,d),se=gS(t,I.getState,f),ce=gS(t,I.getState,p),le=gS(t,I.getState,m),ue=e=>{let{nodeDragThreshold:n}=I.getState();if(v&&(!x||!_||n>0)&&_S({id:t,store:I,nodeRef:L}),l){let n=I.getState().nodeInternals.get(t);n&&l(e,{...n})}},de=e=>{if(!Xy(e)&&!M)if(qy.includes(e.key)&&v){let n=e.key===`Escape`;_S({id:t,store:I,unselect:n,nodeRef:L})}else _&&c&&Object.prototype.hasOwnProperty.call(SS,e.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${e.key.replace(`Arrow`,``).toLowerCase()}. New position, x: ${~~i}, y: ${~~a}`}),ie({x:SS[e.key].x,y:SS[e.key].y,isShiftPressed:e.shiftKey}))};(0,H.useEffect)(()=>()=>{R.current&&=(T?.unobserve(R.current),null)},[]),(0,H.useEffect)(()=>{if(L.current&&!w){let e=L.current;(!j||!F||R.current!==e)&&(R.current&&T?.unobserve(R.current),T?.observe(e),R.current=e)}},[w,j,F]),(0,H.useEffect)(()=>{let e=ne.current!==n,r=ee.current!==S,i=te.current!==C;L.current&&(e||r||i)&&(e&&(ne.current=n),r&&(ee.current=S),i&&(te.current=C),I.getState().updateNodeDimensions([{id:t,nodeElement:L.current,forceUpdate:!0}]))},[t,n,S,C]);let fe=bS({nodeRef:L,disabled:w||!_,noDragClassName:k,handleSelector:E,nodeId:t,isSelectable:v,selectNodesOnDrag:x});return w?null:H.createElement(`div`,{className:Ap([`react-flow__node`,`react-flow__node-${n}`,{[A]:_},g,{selected:c,selectable:v,parent:O,dragging:fe}]),ref:L,style:{zIndex:D,transform:`translate(${o}px,${s}px)`,pointerEvents:re?`all`:`none`,visibility:j?`visible`:`hidden`,...h},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:ae,onMouseMove:oe,onMouseLeave:se,onContextMenu:ce,onClick:ue,onDoubleClick:le,onKeyDown:b?de:void 0,tabIndex:b?0:void 0,role:b?`button`:void 0,"aria-describedby":M?void 0:`${xx}-${P}`,"aria-label":N},H.createElement(Db,{value:t},H.createElement(e,{id:t,data:r,type:n,xPos:i,yPos:a,selected:c,isConnectable:y,sourcePosition:S,targetPosition:C,dragging:fe,dragHandle:E,zIndex:D})))};return t.displayName=`NodeWrapper`,(0,H.memo)(t)},wS=e=>{let t=e.getNodes().filter(e=>e.selected);return{...Lb(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function TS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=Oy(),{width:i,height:a,x:o,y:s,transformString:c,userSelectionActive:l}=X(wS,Wp),u=xS(),d=(0,H.useRef)(null);if((0,H.useEffect)(()=>{n||d.current?.focus({preventScroll:!0})},[n]),bS({nodeRef:d}),l||!i||!a)return null;let f=e?t=>{let n=r.getState().getNodes().filter(e=>e.selected);e(t,n)}:void 0;return H.createElement(`div`,{className:Ap([`react-flow__nodesselection`,`react-flow__container`,t]),style:{transform:c}},H.createElement(`div`,{ref:d,className:`react-flow__nodesselection-rect`,onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(SS,e.key)&&u({x:SS[e.key].x,y:SS[e.key].y,isShiftPressed:e.shiftKey})},style:{width:i,height:a,top:s,left:o}}))}var ES=(0,H.memo)(TS),DS=e=>e.nodesSelectionActive,OS=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:_,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:E,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,preventScrolling:j,onSelectionContextMenu:M,noWheelClassName:N,noPanClassName:P,disableKeyboardA11y:F})=>{let I=X(DS),L=Dx(d),R=Dx(_),ee=R||E,te=R||S,ne=L||f&&ee!==!0;return Ux({deleteKeyCode:s,multiSelectionKeyCode:g}),H.createElement(Qx,{onMove:c,onMoveStart:l,onMoveEnd:u,onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:x,panOnScroll:te,panOnScrollSpeed:C,panOnScrollMode:w,zoomOnDoubleClick:T,panOnDrag:!L&&ee,defaultViewport:D,translateExtent:O,minZoom:k,maxZoom:A,zoomActivationKeyCode:v,preventScrolling:j,noWheelClassName:N,noPanClassName:P},H.createElement(cS,{onSelectionStart:m,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:ee,isSelecting:!!ne,selectionMode:p},e,I&&H.createElement(ES,{onSelectionContextMenu:M,noPanClassName:P,disableKeyboardA11y:F})))};OS.displayName=`FlowRenderer`;var kS=(0,H.memo)(OS);function AS(e){return X((0,H.useCallback)(t=>e?Rb(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):t.getNodes(),[e]))}function jS(e){let t={input:CS(e.input||ox),default:CS(e.default||ix),output:CS(e.output||cx),group:CS(e.group||lx)},n=Object.keys(e).filter(e=>![`input`,`default`,`output`,`group`].includes(e)).reduce((t,n)=>(t[n]=CS(e[n]||ix),t),{});return{...t,...n}}var MS=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r||i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},NS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),PS=e=>{let{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:a,onError:o}=X(NS,Wp),s=AS(e.onlyRenderVisibleElements),c=(0,H.useRef)(),l=(0,H.useMemo)(()=>{if(typeof ResizeObserver>`u`)return null;let e=new ResizeObserver(e=>{let t=e.map(e=>({id:e.target.getAttribute(`data-id`),nodeElement:e.target,forceUpdate:!0}));a(t)});return c.current=e,e},[]);return(0,H.useEffect)(()=>()=>{c?.current?.disconnect()},[]),H.createElement(`div`,{className:`react-flow__nodes`,style:Gx},s.map(a=>{let s=a.type||`default`;e.nodeTypes[s]||(o?.(`003`,Ey.error003(s)),s=`default`);let c=e.nodeTypes[s]||e.nodeTypes.default,u=!!(a.draggable||t&&a.draggable===void 0),d=!!(a.selectable||i&&a.selectable===void 0),f=!!(a.connectable||n&&a.connectable===void 0),p=!!(a.focusable||r&&a.focusable===void 0),m=e.nodeExtent?Fy(a.positionAbsolute,e.nodeExtent):a.positionAbsolute,h=m?.x??0,g=m?.y??0,_=MS({x:h,y:g,width:a.width??0,height:a.height??0,origin:e.nodeOrigin});return H.createElement(c,{key:a.id,id:a.id,className:a.className,style:a.style,type:s,data:a.data,sourcePosition:a.sourcePosition||Q.Bottom,targetPosition:a.targetPosition||Q.Top,hidden:a.hidden,xPos:h,yPos:g,xPosOrigin:_.x,yPosOrigin:_.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!a.selected,isDraggable:u,isSelectable:d,isConnectable:f,isFocusable:p,resizeObserver:l,dragHandle:a.dragHandle,zIndex:a[Z]?.z??0,isParent:!!a[Z]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!a.width&&!!a.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:a.ariaLabel,hasHandleBounds:!!a[Z]?.handleBounds})}))};PS.displayName=`NodeRenderer`;var FS=(0,H.memo)(PS),IS=(e,t,n)=>n===Q.Left?e-t:n===Q.Right?e+t:e,LS=(e,t,n)=>n===Q.Top?e-t:n===Q.Bottom?e+t:e,RS=`react-flow__edgeupdater`,zS=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:o,type:s})=>H.createElement(`circle`,{onMouseDown:i,onMouseEnter:a,onMouseOut:o,className:Ap([RS,`${RS}-${s}`]),cx:IS(t,r,e),cy:LS(n,r,e),r,stroke:`transparent`,fill:`transparent`}),BS=()=>!0,VS=e=>{let t=({id:t,className:n,type:r,data:i,onClick:a,onEdgeDoubleClick:o,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:h,source:g,target:_,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,elementsSelectable:w,hidden:T,sourceHandleId:E,targetHandleId:D,onContextMenu:O,onMouseEnter:k,onMouseMove:A,onMouseLeave:j,reconnectRadius:M,onReconnect:N,onReconnectStart:P,onReconnectEnd:F,markerEnd:I,markerStart:L,rfId:R,ariaLabel:ee,isFocusable:te,isReconnectable:ne,pathOptions:re,interactionWidth:ie,disableKeyboardA11y:ae})=>{let oe=(0,H.useRef)(null),[se,ce]=(0,H.useState)(!1),[le,ue]=(0,H.useState)(!1),de=Oy(),fe=(0,H.useMemo)(()=>`url('#${jb(L,R)}')`,[L,R]),pe=(0,H.useMemo)(()=>`url('#${jb(I,R)}')`,[I,R]);if(T)return null;let me=e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:i,multiSelectionActive:o}=de.getState(),s=n.find(e=>e.id===t);s&&(w&&(de.setState({nodesSelectionActive:!1}),s.selected&&o?(i({nodes:[],edges:[s]}),oe.current?.blur()):r([t])),a&&a(e,s))},z=tb(t,de.getState,o),he=tb(t,de.getState,O),ge=tb(t,de.getState,k),_e=tb(t,de.getState,A),ve=tb(t,de.getState,j),B=(e,n)=>{if(e.button!==0)return;let{edges:r,isValidConnection:i}=de.getState(),a=n?_:g,o=(n?D:E)||null,s=n?`target`:`source`,c=i||BS,l=n,u=r.find(e=>e.id===t);ue(!0),P?.(e,u,s),Zb({event:e,handleId:o,nodeId:a,onConnect:e=>N?.(u,e),isTarget:l,getState:de.getState,setState:de.setState,isValidConnection:c,edgeUpdaterType:s,onReconnectEnd:e=>{ue(!1),F?.(e,u,s)}})},ye=e=>B(e,!0),be=e=>B(e,!1),xe=()=>ce(!0),Se=()=>ce(!1),Ce=!w&&!a;return H.createElement(`g`,{className:Ap([`react-flow__edge`,`react-flow__edge-${r}`,n,{selected:s,animated:c,inactive:Ce,updating:se}]),onClick:me,onDoubleClick:z,onContextMenu:he,onMouseEnter:ge,onMouseMove:_e,onMouseLeave:ve,onKeyDown:te?e=>{if(!ae&&qy.includes(e.key)&&w){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:i}=de.getState();e.key===`Escape`?(oe.current?.blur(),n({edges:[i.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:te?0:void 0,role:te?`button`:`img`,"data-testid":`rf__edge-${t}`,"aria-label":ee===null?void 0:ee||`Edge from ${g} to ${_}`,"aria-describedby":te?`${Sx}-${R}`:void 0,ref:oe},!le&&H.createElement(e,{id:t,source:g,target:_,selected:s,animated:c,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,data:i,style:h,sourceX:v,sourceY:y,targetX:b,targetY:x,sourcePosition:S,targetPosition:C,sourceHandleId:E,targetHandleId:D,markerStart:fe,markerEnd:pe,pathOptions:re,interactionWidth:ie}),ne&&H.createElement(H.Fragment,null,(ne===`source`||ne===!0)&&H.createElement(zS,{position:S,centerX:v,centerY:y,radius:M,onMouseDown:ye,onMouseEnter:xe,onMouseOut:Se,type:`source`}),(ne===`target`||ne===!0)&&H.createElement(zS,{position:C,centerX:b,centerY:x,radius:M,onMouseDown:be,onMouseEnter:xe,onMouseOut:Se,type:`target`})))};return t.displayName=`EdgeWrapper`,(0,H.memo)(t)};function HS(e){let t={default:VS(e.default||Tb),straight:VS(e.bezier||xb),step:VS(e.step||yb),smoothstep:VS(e.step||vb),simplebezier:VS(e.simplebezier||db)},n=Object.keys(e).filter(e=>![`default`,`bezier`].includes(e)).reduce((t,n)=>(t[n]=VS(e[n]||Tb),t),{});return{...t,...n}}function US(e,t,n=null){let r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,a=n?.width||t.width,o=n?.height||t.height;switch(e){case Q.Top:return{x:r+a/2,y:i};case Q.Right:return{x:r+a,y:i+o/2};case Q.Bottom:return{x:r+a/2,y:i+o};case Q.Left:return{x:r,y:i+o/2}}}function WS(e,t){return e?e.length===1||!t?e[0]:t&&e.find(e=>e.id===t)||null:null}var GS=(e,t,n,r,i,a)=>{let o=US(n,e,t),s=US(a,r,i);return{sourceX:o.x,sourceY:o.y,targetX:s.x,targetY:s.y}};function KS({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:o,height:s,transform:c}){let l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);let u=By({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:s/c[2]}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function qS(e){let t=e?.[Z]?.handleBounds||null,n=t&&e?.width&&e?.height&&e?.positionAbsolute?.x!==void 0&&e?.positionAbsolute?.y!==void 0;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var JS=[{level:0,isMaxLevel:!0,edges:[]}];function YS(e,t,n=!1){let r=-1,i=e.reduce((e,i)=>{let a=Ky(i.zIndex),o=a?i.zIndex:0;if(n){let e=t.get(i.target),n=t.get(i.source),r=i.selected||e?.selected||n?.selected,s=Math.max(n?.[Z]?.z||0,e?.[Z]?.z||0,1e3);o=(a?i.zIndex:0)+(r?s:0)}return e[o]?e[o].push(i):e[o]=[i],r=o>r?o:r,e},{}),a=Object.entries(i).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return a.length===0?JS:a}function XS(e,t,n){let r=X((0,H.useCallback)(n=>e?n.edges.filter(e=>{let r=t.get(e.source),i=t.get(e.target);return r?.width&&r?.height&&i?.width&&i?.height&&KS({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:i.width,targetHeight:i.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return YS(r,t,n)}var ZS=({color:e=`none`,strokeWidth:t=1})=>H.createElement(`polyline`,{style:{stroke:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,fill:`none`,points:`-5,-4 0,0 -5,4`}),QS=({color:e=`none`,strokeWidth:t=1})=>H.createElement(`polyline`,{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:`round`,strokeLinejoin:`round`,points:`-5,-4 0,0 -5,4 -5,-4`}),$S={[cb.Arrow]:ZS,[cb.ArrowClosed]:QS};function eC(e){let t=Oy();return(0,H.useMemo)(()=>Object.prototype.hasOwnProperty.call($S,e)?$S[e]:(t.getState().onError?.(`009`,Ey.error009(e)),null),[e])}var tC=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a=`strokeWidth`,strokeWidth:o,orient:s=`auto-start-reverse`})=>{let c=eC(t);return c?H.createElement(`marker`,{className:`react-flow__arrowhead`,id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:`-10 -10 20 20`,markerUnits:a,orient:s,refX:`0`,refY:`0`},H.createElement(c,{color:n,strokeWidth:o})):null},nC=({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,i)=>([i.markerStart,i.markerEnd].forEach(i=>{if(i&&typeof i==`object`){let a=jb(i,t);r.includes(a)||(n.push({id:a,color:i.color||e,...i}),r.push(a))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))},rC=({defaultColor:e,rfId:t})=>{let n=X((0,H.useCallback)(nC({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return H.createElement(`defs`,null,n.map(e=>H.createElement(tC,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};rC.displayName=`MarkerDefinitions`;var iC=(0,H.memo)(rC),aC=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),oC=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,children:g,disableKeyboardA11y:_})=>{let{edgesFocusable:v,edgesUpdatable:y,elementsSelectable:b,width:x,height:S,connectionMode:C,nodeInternals:w,onError:T}=X(aC,Wp),E=XS(t,w,n);return x?H.createElement(H.Fragment,null,E.map(({level:t,edges:n,isMaxLevel:g})=>H.createElement(`svg`,{key:t,style:{zIndex:t},width:x,height:S,className:`react-flow__edges react-flow__container`},g&&H.createElement(iC,{defaultColor:e,rfId:r}),H.createElement(`g`,null,n.map(e=>{let[t,n,g]=qS(w.get(e.source)),[x,S,E]=qS(w.get(e.target));if(!g||!E)return null;let D=e.type||`default`;i[D]||(T?.(`011`,Ey.error011(D)),D=`default`);let O=i[D]||i.default,k=C===ib.Strict?S.target:(S.target??[]).concat(S.source??[]),A=WS(n.source,e.sourceHandle),j=WS(k,e.targetHandle),M=A?.position||Q.Bottom,N=j?.position||Q.Top,P=!!(e.focusable||v&&e.focusable===void 0),F=e.reconnectable||e.updatable,I=f!==void 0&&(F||y&&F===void 0);if(!A||!j)return T?.(`008`,Ey.error008(A,e)),null;let{sourceX:L,sourceY:R,targetX:ee,targetY:te}=GS(t,A,M,x,j,N);return H.createElement(O,{key:e.id,id:e.id,className:Ap([e.className,a]),type:D,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:L,sourceY:R,targetX:ee,targetY:te,sourcePosition:M,targetPosition:N,elementsSelectable:b,onContextMenu:o,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,reconnectRadius:h,rfId:r,ariaLabel:e.ariaLabel,isFocusable:P,isReconnectable:I,pathOptions:`pathOptions`in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:_})})))),g):null};oC.displayName=`EdgeRenderer`;var sC=(0,H.memo)(oC),cC=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lC({children:e}){let t=X(cC);return H.createElement(`div`,{className:`react-flow__viewport react-flow__container`,style:{transform:t}},e)}function uC(e){let t=Vx(),n=(0,H.useRef)(!1);(0,H.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}var dC={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top},fC=({nodeId:e,handleType:t,style:n,type:r=sb.Bezier,CustomComponent:i,connectionStatus:a})=>{let{fromNode:o,handleId:s,toX:c,toY:l,connectionMode:u}=X((0,H.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),Wp),d=o?.[Z]?.handleBounds,f=d?.[t];if(u===ib.Loose&&(f||=d?.[t===`source`?`target`:`source`]),!o||!f)return null;let p=s?f.find(e=>e.id===s):f[0],m=p?p.x+p.width/2:(o.width??0)/2,h=p?p.y+p.height/2:o.height??0,g=(o.positionAbsolute?.x??0)+m,_=(o.positionAbsolute?.y??0)+h,v=p?.position,y=v?dC[v]:null;if(!v||!y)return null;if(i)return H.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:p,fromX:g,fromY:_,toX:c,toY:l,fromPosition:v,toPosition:y,connectionStatus:a});let b=``,x={sourceX:g,sourceY:_,sourcePosition:v,targetX:c,targetY:l,targetPosition:y};return r===sb.Bezier?[b]=wb(x):r===sb.Step?[b]=_b({...x,borderRadius:0}):r===sb.SmoothStep?[b]=_b(x):r===sb.SimpleBezier?[b]=ub(x):b=`M${g},${_} ${c},${l}`,H.createElement(`path`,{d:b,fill:`none`,className:`react-flow__connection-path`,style:n})};fC.displayName=`ConnectionLine`;var pC=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function mC({containerStyle:e,style:t,type:n,component:r}){let{nodeId:i,handleType:a,nodesConnectable:o,width:s,height:c,connectionStatus:l}=X(pC,Wp);return i&&a&&s&&o?H.createElement(`svg`,{style:e,width:s,height:c,className:`react-flow__edges react-flow__connectionline react-flow__container`},H.createElement(`g`,{className:Ap([`react-flow__connection`,l])},H.createElement(fC,{nodeId:i,handleType:a,style:t,type:n,CustomComponent:r,connectionStatus:l}))):null}function hC(e,t){return(0,H.useRef)(null),Oy(),(0,H.useMemo)(()=>t(e),[e])}var gC=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:a,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:h,onSelectionEnd:g,connectionLineType:_,connectionLineStyle:v,connectionLineComponent:y,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,deleteKeyCode:D,onlyRenderVisibleElements:O,elementsSelectable:k,selectNodesOnDrag:A,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,preventScrolling:F,defaultMarkerColor:I,zoomOnScroll:L,zoomOnPinch:R,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,zoomOnDoubleClick:re,panOnDrag:ie,onPaneClick:ae,onPaneMouseEnter:oe,onPaneMouseMove:se,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:ue,onEdgeContextMenu:de,onEdgeMouseEnter:fe,onEdgeMouseMove:pe,onEdgeMouseLeave:me,onReconnect:z,onReconnectStart:he,onReconnectEnd:ge,reconnectRadius:_e,noDragClassName:ve,noWheelClassName:B,noPanClassName:ye,elevateEdgesOnSelect:be,disableKeyboardA11y:xe,nodeOrigin:Se,nodeExtent:Ce,rfId:we})=>{let Te=hC(e,jS),Ee=hC(t,HS);return uC(a),H.createElement(kS,{onPaneClick:ae,onPaneMouseEnter:oe,onPaneMouseMove:se,onPaneMouseLeave:ce,onPaneContextMenu:ue,onPaneScroll:le,deleteKeyCode:D,selectionKeyCode:x,selectionOnDrag:S,selectionMode:C,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:w,panActivationKeyCode:T,zoomActivationKeyCode:E,elementsSelectable:k,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:L,zoomOnPinch:R,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,panOnDrag:ie,defaultViewport:j,translateExtent:M,minZoom:N,maxZoom:P,onSelectionContextMenu:m,preventScrolling:F,noDragClassName:ve,noWheelClassName:B,noPanClassName:ye,disableKeyboardA11y:xe},H.createElement(lC,null,H.createElement(sC,{edgeTypes:Ee,onEdgeClick:s,onEdgeDoubleClick:l,onlyRenderVisibleElements:O,onEdgeContextMenu:de,onEdgeMouseEnter:fe,onEdgeMouseMove:pe,onEdgeMouseLeave:me,onReconnect:z,onReconnectStart:he,onReconnectEnd:ge,reconnectRadius:_e,defaultMarkerColor:I,noPanClassName:ye,elevateEdgesOnSelect:!!be,disableKeyboardA11y:xe,rfId:we},H.createElement(mC,{style:v,type:_,component:y,containerStyle:b})),H.createElement(`div`,{className:`react-flow__edgelabel-renderer`}),H.createElement(FS,{nodeTypes:Te,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:A,onlyRenderVisibleElements:O,noPanClassName:ye,noDragClassName:ve,disableKeyboardA11y:xe,nodeOrigin:Se,nodeExtent:Ce,rfId:we})))};gC.displayName=`GraphView`;var _C=(0,H.memo)(gC),vC=[[-1/0,-1/0],[1/0,1/0]],yC={rfId:`1`,width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:vC,nodeExtent:vC,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:`source`,connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ib.Strict,domNode:null,paneDragging:!1,noPanClassName:`nopan`,nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:``,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Jy,isValidConnection:void 0},bC=()=>Up((e,t)=>({...yC,setNodes:n=>{let{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:a}=t();e({nodeInternals:Mx(n,r,i,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let i=n!==void 0,a=r!==void 0,o=i?Mx(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:a?r:[],hasDefaultNodes:i,hasDefaultEdges:a})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:i,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c?.querySelector(`.react-flow__viewport`);if(!u)return;let d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=n.reduce((e,t)=>{let n=i.get(t.id);if(n?.hidden)i.set(n.id,{...n,[Z]:{...n[Z],handleBounds:void 0}});else if(n){let r=Ny(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(i.set(n.id,{...n,[Z]:{...n[Z],handleBounds:{source:hS(`.source`,t.nodeElement,f,l),target:hS(`.target`,t.nodeElement,f,l)}},...r}),e.push({id:n.id,type:`dimensions`,dimensions:r}))}return e},[]);jx(i,l);let m=o||a&&!o&&Nx(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:m}),p?.length>0&&r?.(p)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:i}=t(),a=e.map(e=>{let t={id:e.id,type:`position`,dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t});i(a)},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:i,hasDefaultNodes:a,nodeOrigin:o,getNodes:s,elevateNodesOnSelect:c}=t();if(n?.length){if(a){let t=rS(n,s()),r=Mx(t,i,o,c);e({nodeInternals:r})}r?.(n)}},addSelectedNodes:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>iS(e,!0)):(o=aS(a(),n),s=aS(i,[])),Ix({changedNodes:o,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{let{multiSelectionActive:r,edges:i,getNodes:a}=t(),o,s=null;r?o=n.map(e=>iS(e,!0)):(o=aS(i,n),s=aS(a(),[])),Ix({changedNodes:s,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:i,getNodes:a}=t(),o=n||a(),s=r||i,c=o.map(e=>(e.selected=!1,iS(e.id,!1))),l=s.map(e=>iS(e.id,!1));Ix({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t(),i=r().filter(e=>e.selected).map(e=>iS(e.id,!1)),a=n.filter(e=>e.selected).map(e=>iS(e.id,!1));Ix({changedNodes:i,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=Fy(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:i,d3Zoom:a,d3Selection:o,translateExtent:s}=t();if(!a||!o||!e.x&&!e.y)return!1;let c=py.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),l=[[0,0],[r,i]],u=a?.constrain()(c,l,s);return a.transform(o,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:yC.connectionNodeId,connectionHandleId:yC.connectionHandleId,connectionHandleType:yC.connectionHandleType,connectionStatus:yC.connectionStatus,connectionStartHandle:yC.connectionStartHandle,connectionEndHandle:yC.connectionEndHandle}),reset:()=>e({...yC})}),Object.is),xC=({children:e})=>{let t=(0,H.useRef)(null);return t.current||=bC(),H.createElement(Ty,{value:t.current},e)};xC.displayName=`ReactFlowProvider`;var SC=({children:e})=>(0,H.useContext)(wy)?H.createElement(H.Fragment,null,e):H.createElement(xC,null,e);SC.displayName=`ReactFlowWrapper`;var CC={input:ox,default:ix,output:cx,group:lx},wC={default:Tb,straight:xb,step:yb,smoothstep:vb,simplebezier:db},TC=[0,0],EC=[15,15],DC={x:0,y:0,zoom:1},OC={width:`100%`,height:`100%`,overflow:`hidden`,position:`relative`,zIndex:0},kC=(0,H.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a=CC,edgeTypes:o=wC,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onNodesDelete:E,onEdgesDelete:D,onSelectionChange:O,onSelectionDragStart:k,onSelectionDrag:A,onSelectionDragStop:j,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,connectionMode:F=ib.Strict,connectionLineType:I=sb.Bezier,connectionLineStyle:L,connectionLineComponent:R,connectionLineContainerStyle:ee,deleteKeyCode:te=`Backspace`,selectionKeyCode:ne=`Shift`,selectionOnDrag:re=!1,selectionMode:ie=ob.Full,panActivationKeyCode:ae=`Space`,multiSelectionKeyCode:oe=$y()?`Meta`:`Control`,zoomActivationKeyCode:se=$y()?`Meta`:`Control`,snapToGrid:ce=!1,snapGrid:le=EC,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:de=!0,nodesDraggable:fe,nodesConnectable:pe,nodesFocusable:me,nodeOrigin:z=TC,edgesFocusable:he,edgesUpdatable:ge,elementsSelectable:_e,defaultViewport:ve=DC,minZoom:B=.5,maxZoom:ye=2,translateExtent:be=vC,preventScrolling:xe=!0,nodeExtent:Se,defaultMarkerColor:Ce=`#b1b1b7`,zoomOnScroll:we=!0,zoomOnPinch:Te=!0,panOnScroll:Ee=!1,panOnScrollSpeed:De=.5,panOnScrollMode:Oe=ab.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Ae=!0,onPaneClick:je,onPaneMouseEnter:Me,onPaneMouseMove:Ne,onPaneMouseLeave:Pe,onPaneScroll:Fe,onPaneContextMenu:Ie,children:Le,onEdgeContextMenu:V,onEdgeDoubleClick:Re,onEdgeMouseEnter:ze,onEdgeMouseMove:Be,onEdgeMouseLeave:Ve,onEdgeUpdate:He,onEdgeUpdateStart:Ue,onEdgeUpdateEnd:We,onReconnect:U,onReconnectStart:Ge,onReconnectEnd:Ke,reconnectRadius:qe=10,edgeUpdaterRadius:Je=10,onNodesChange:Ye,onEdgesChange:Xe,noDragClassName:Ze=`nodrag`,noWheelClassName:Qe=`nowheel`,noPanClassName:$e=`nopan`,fitView:et=!1,fitViewOptions:tt,connectOnClick:nt=!0,attributionPosition:rt,proOptions:it,defaultEdgeOptions:at,elevateNodesOnSelect:ot=!0,elevateEdgesOnSelect:st=!1,disableKeyboardA11y:ct=!1,autoPanOnConnect:lt=!0,autoPanOnNodeDrag:ut=!0,connectionRadius:dt=20,isValidConnection:ft,onError:pt,style:mt,id:ht,nodeDragThreshold:gt,..._t},vt)=>{let yt=ht||`1`;return H.createElement(`div`,{..._t,style:{...mt,...OC},ref:vt,className:Ap([`react-flow`,i]),"data-testid":`rf__wrapper`,id:ht},H.createElement(SC,null,H.createElement(_C,{onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:v,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:x,onNodeDoubleClick:S,nodeTypes:a,edgeTypes:o,connectionLineType:I,connectionLineStyle:L,connectionLineComponent:R,connectionLineContainerStyle:ee,selectionKeyCode:ne,selectionOnDrag:re,selectionMode:ie,deleteKeyCode:te,multiSelectionKeyCode:oe,panActivationKeyCode:ae,zoomActivationKeyCode:se,onlyRenderVisibleElements:ue,selectNodesOnDrag:de,defaultViewport:ve,translateExtent:be,minZoom:B,maxZoom:ye,preventScrolling:xe,zoomOnScroll:we,zoomOnPinch:Te,zoomOnDoubleClick:ke,panOnScroll:Ee,panOnScrollSpeed:De,panOnScrollMode:Oe,panOnDrag:Ae,onPaneClick:je,onPaneMouseEnter:Me,onPaneMouseMove:Ne,onPaneMouseLeave:Pe,onPaneScroll:Fe,onPaneContextMenu:Ie,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:P,onEdgeContextMenu:V,onEdgeDoubleClick:Re,onEdgeMouseEnter:ze,onEdgeMouseMove:Be,onEdgeMouseLeave:Ve,onReconnect:U??He,onReconnectStart:Ge??Ue,onReconnectEnd:Ke??We,reconnectRadius:qe??Je,defaultMarkerColor:Ce,noDragClassName:Ze,noWheelClassName:Qe,noPanClassName:$e,elevateEdgesOnSelect:st,rfId:yt,disableKeyboardA11y:ct,nodeOrigin:z,nodeExtent:Se}),H.createElement(vx,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:m,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:_,nodesDraggable:fe,nodesConnectable:pe,nodesFocusable:me,edgesFocusable:he,edgesUpdatable:ge,elementsSelectable:_e,elevateNodesOnSelect:ot,minZoom:B,maxZoom:ye,nodeExtent:Se,onNodesChange:Ye,onEdgesChange:Xe,snapToGrid:ce,snapGrid:le,connectionMode:F,translateExtent:be,connectOnClick:nt,defaultEdgeOptions:at,fitView:et,fitViewOptions:tt,onNodesDelete:E,onEdgesDelete:D,onNodeDragStart:C,onNodeDrag:w,onNodeDragStop:T,onSelectionDrag:A,onSelectionDragStart:k,onSelectionDragStop:j,noPanClassName:$e,nodeOrigin:z,rfId:yt,autoPanOnConnect:lt,autoPanOnNodeDrag:ut,onError:pt,connectionRadius:dt,isValidConnection:ft,nodeDragThreshold:gt}),H.createElement(hx,{onSelectionChange:O}),Le,H.createElement(jy,{proOptions:it,position:rt}),H.createElement(Ex,{rfId:yt,disableKeyboardA11y:ct})))});kC.displayName=`ReactFlow`;var AC=({id:e,x:t,y:n,width:r,height:i,style:a,color:o,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,onClick:f,selected:p})=>{let{background:m,backgroundColor:h}=a||{},g=o||m||h;return H.createElement(`rect`,{className:Ap([`react-flow__minimap-node`,{selected:p},l]),x:t,y:n,rx:u,ry:u,width:r,height:i,fill:g,stroke:s,strokeWidth:c,shapeRendering:d,onClick:f?t=>f(t,e):void 0})};AC.displayName=`MiniMapNode`;var jC=(0,H.memo)(AC),MC=e=>e.nodeOrigin,NC=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),PC=e=>e instanceof Function?e:()=>e;function FC({nodeStrokeColor:e=`transparent`,nodeColor:t=`#e2e2e2`,nodeClassName:n=``,nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:a=jC,onClick:o}){let s=X(NC,Wp),c=X(MC),l=PC(t),u=PC(e),d=PC(n),f=typeof window>`u`||window.chrome?`crispEdges`:`geometricPrecision`;return H.createElement(H.Fragment,null,s.map(e=>{let{x:t,y:n}=Ib(e,c).positionAbsolute;return H.createElement(a,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:d(e),color:l(e),borderRadius:r,strokeColor:u(e),strokeWidth:i,shapeRendering:f,onClick:o,id:e.id})}))}var IC=(0,H.memo)(FC),LC=200,RC=150,zC=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?Uy(Lb(t,e.nodeOrigin),n):n,rfId:e.rfId}},BC=`react-flow__minimap-desc`;function VC({style:e,className:t,nodeStrokeColor:n=`transparent`,nodeColor:r=`#e2e2e2`,nodeClassName:i=``,nodeBorderRadius:a=5,nodeStrokeWidth:o=2,nodeComponent:s,maskColor:c=`rgb(240, 240, 240, 0.6)`,maskStrokeColor:l=`none`,maskStrokeWidth:u=1,position:d=`bottom-right`,onClick:f,onNodeClick:p,pannable:m=!1,zoomable:h=!1,ariaLabel:g=`React Flow mini map`,inversePan:_=!1,zoomStep:v=10,offsetScale:y=5}){let b=Oy(),x=(0,H.useRef)(null),{boundingRect:S,viewBB:C,rfId:w}=X(zC,Wp),T=e?.width??LC,E=e?.height??RC,D=S.width/T,O=S.height/E,k=Math.max(D,O),A=k*T,j=k*E,M=y*k,N=S.x-(A-S.width)/2-M,P=S.y-(j-S.height)/2-M,F=A+M*2,I=j+M*2,L=`${BC}-${w}`,R=(0,H.useRef)(0);R.current=k,(0,H.useEffect)(()=>{if(x.current){let e=Zh(x.current),t=Cy().on(`zoom`,m?e=>{let{transform:t,d3Selection:n,d3Zoom:r,translateExtent:i,width:a,height:o}=b.getState();if(e.sourceEvent.type!==`mousemove`||!n||!r)return;let s=R.current*Math.max(1,t[2])*(_?-1:1),c={x:t[0]-e.sourceEvent.movementX*s,y:t[1]-e.sourceEvent.movementY*s},l=[[0,0],[a,o]],u=py.translate(c.x,c.y).scale(t[2]),d=r.constrain()(u,l,i);r.transform(n,d)}:null).on(`zoom.wheel`,h?e=>{let{transform:t,d3Selection:n,d3Zoom:r}=b.getState();if(e.sourceEvent.type!==`wheel`||!n||!r)return;let i=-e.sourceEvent.deltaY*(e.sourceEvent.deltaMode===1?.05:e.sourceEvent.deltaMode?1:.002)*v,a=t[2]*2**i;r.scaleTo(n,a)}:null);return e.call(t),()=>{e.on(`zoom`,null)}}},[m,h,_,v]);let ee=f?e=>{let t=$h(e);f(e,{x:t[0],y:t[1]})}:void 0,te=p?(e,t)=>{let n=b.getState().nodeInternals.get(t);p(e,n)}:void 0;return H.createElement(Ay,{position:d,style:e,className:Ap([`react-flow__minimap`,t]),"data-testid":`rf__minimap`},H.createElement(`svg`,{width:T,height:E,viewBox:`${N} ${P} ${F} ${I}`,role:`img`,"aria-labelledby":L,ref:x,onClick:ee},g&&H.createElement(`title`,{id:L},g),H.createElement(IC,{onClick:te,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:s}),H.createElement(`path`,{className:`react-flow__minimap-mask`,d:`M${N-M},${P-M}h${F+M*2}v${I+M*2}h${-F-M*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:c,fillRule:`evenodd`,stroke:l,strokeWidth:u,pointerEvents:`none`})))}VC.displayName=`MiniMap`;var HC=(0,H.memo)(VC);function UC(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 32`},H.createElement(`path`,{d:`M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z`}))}function WC(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 5`},H.createElement(`path`,{d:`M0 0h32v4.2H0z`}))}function GC(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 32 30`},H.createElement(`path`,{d:`M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z`}))}function KC(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},H.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z`}))}function qC(){return H.createElement(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 25 32`},H.createElement(`path`,{d:`M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z`}))}var JC=({children:e,className:t,...n})=>H.createElement(`button`,{type:`button`,className:Ap([`react-flow__controls-button`,t]),...n},e);JC.displayName=`ControlButton`;var YC=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),XC=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:o,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d=`bottom-left`})=>{let f=Oy(),[p,m]=(0,H.useState)(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:_}=X(YC,Wp),{zoomIn:v,zoomOut:y,fitView:b}=Vx();if((0,H.useEffect)(()=>{m(!0)},[]),!p)return null;let x=()=>{v(),a?.()},S=()=>{y(),o?.()},C=()=>{b(i),s?.()},w=()=>{f.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),c?.(!h)};return H.createElement(Ay,{className:Ap([`react-flow__controls`,l]),position:d,style:e,"data-testid":`rf__controls`},t&&H.createElement(H.Fragment,null,H.createElement(JC,{onClick:x,className:`react-flow__controls-zoomin`,title:`zoom in`,"aria-label":`zoom in`,disabled:_},H.createElement(UC,null)),H.createElement(JC,{onClick:S,className:`react-flow__controls-zoomout`,title:`zoom out`,"aria-label":`zoom out`,disabled:g},H.createElement(WC,null))),n&&H.createElement(JC,{className:`react-flow__controls-fitview`,onClick:C,title:`fit view`,"aria-label":`fit view`},H.createElement(GC,null)),r&&H.createElement(JC,{className:`react-flow__controls-interactive`,onClick:w,title:`toggle interactivity`,"aria-label":`toggle interactivity`},h?H.createElement(qC,null):H.createElement(KC,null)),u)};XC.displayName=`Controls`;var ZC=(0,H.memo)(XC),QC;(function(e){e.Lines=`lines`,e.Dots=`dots`,e.Cross=`cross`})(QC||={});function $C({color:e,dimensions:t,lineWidth:n}){return H.createElement(`path`,{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function ew({color:e,radius:t}){return H.createElement(`circle`,{cx:t,cy:t,r:t,fill:e})}var tw={[QC.Dots]:`#91919a`,[QC.Lines]:`#eee`,[QC.Cross]:`#e2e2e2`},nw={[QC.Dots]:1,[QC.Lines]:1,[QC.Cross]:6},rw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function iw({id:e,variant:t=QC.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=2,color:o,style:s,className:c}){let l=(0,H.useRef)(null),{transform:u,patternId:d}=X(rw,Wp),f=o||tw[t],p=r||nw[t],m=t===QC.Dots,h=t===QC.Cross,g=Array.isArray(n)?n:[n,n],_=[g[0]*u[2]||1,g[1]*u[2]||1],v=p*u[2],y=h?[v,v]:_,b=m?[v/a,v/a]:[y[0]/a,y[1]/a];return H.createElement(`svg`,{className:Ap([`react-flow__background`,c]),style:{...s,position:`absolute`,width:`100%`,height:`100%`,top:0,left:0},ref:l,"data-testid":`rf__background`},H.createElement(`pattern`,{id:d+e,x:u[0]%_[0],y:u[1]%_[1],width:_[0],height:_[1],patternUnits:`userSpaceOnUse`,patternTransform:`translate(-${b[0]},-${b[1]})`},m?H.createElement(ew,{color:f,radius:v/a}):H.createElement($C,{dimensions:y,color:f,lineWidth:i})),H.createElement(`rect`,{x:`0`,y:`0`,width:`100%`,height:`100%`,fill:`url(#${d+e})`}))}iw.displayName=`Background`;var aw=(0,H.memo)(iw);function ow({nodes:e,edges:t}){let n=(0,H.useMemo)(()=>t.map(e=>({...e,animated:e.data?.active===!0,style:e.data?.active===!1?{stroke:`#ccc`,strokeDasharray:`5,5`}:{stroke:`#333`}})),[t]);return(0,U.jsx)(`div`,{style:{width:`100%`,height:`100%`},children:(0,U.jsxs)(kC,{nodes:e,edges:n,fitView:!0,children:[(0,U.jsx)(aw,{}),(0,U.jsx)(ZC,{}),(0,U.jsx)(HC,{})]})})}function sw({nodes:e,edges:t}){return(0,U.jsxs)(h,{sx:{height:`100%`,p:2,display:`flex`,flexDirection:`column`},children:[(0,U.jsx)(s,{variant:`h6`,gutterBottom:!0,children:``}),(0,U.jsx)(xC,{children:(0,U.jsx)(ow,{nodes:e,edges:t})})]})}var cw=sw,lw=C((0,U.jsx)(`path`,{d:`M9.19 6.35c-2.04 2.29-3.44 5.58-3.57 5.89L2 10.69l4.05-4.05c.47-.47 1.15-.68 1.81-.55zM11.17 17s3.74-1.55 5.89-3.7c5.4-5.4 4.5-9.62 4.21-10.57-.95-.3-5.17-1.19-10.57 4.21C8.55 9.09 7 12.83 7 12.83zm6.48-2.19c-2.29 2.04-5.58 3.44-5.89 3.57L13.31 22l4.05-4.05c.47-.47.68-1.15.55-1.81zM9 18c0 .83-.34 1.58-.88 2.12C6.94 21.3 2 22 2 22s.7-4.94 1.88-6.12C4.42 15.34 5.17 15 6 15c1.66 0 3 1.34 3 3m4-9c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2`}),`RocketLaunch`);function uw({isActive:e,chatHistory:t,nodes:n,edges:r,onSendMessage:i,isWaitingForUserInput:a,isWaitingForAiResponse:o,onSave:c}){return e?(0,U.jsxs)(B,{sx:{height:`100%`,display:`flex`,gap:2},children:[(0,U.jsx)(B,{sx:{flex:`1 1 40%`,minWidth:400},children:(0,U.jsx)(kp,{chatHistory:t,onSendMessage:i,isWaitingForUserInput:a,isWaitingForAiResponse:o})}),(0,U.jsxs)(B,{sx:{flex:`1 1 60%`,minWidth:500,display:`flex`,flexDirection:`column`,gap:2},children:[(0,U.jsx)(B,{sx:{flexGrow:1},children:(0,U.jsx)(cw,{nodes:n,edges:r})}),(0,U.jsx)(B,{sx:{textAlign:`right`},children:(0,U.jsx)(f,{variant:`contained`,onClick:c,disabled:n.length===0,children:``})})]})]}):(0,U.jsxs)(h,{sx:{height:`100%`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,p:3,gap:2,backgroundColor:`action.hover`},children:[(0,U.jsx)(lw,{sx:{fontSize:60,color:`text.secondary`}}),(0,U.jsx)(s,{variant:`h6`,color:`text.secondary`,children:`AI`}),(0,U.jsxs)(s,{color:`text.secondary`,align:`center`,children:[`AI`,(0,U.jsx)(`br`,{}),``]})]})}var dw=uw,fw={position:`absolute`,top:`50%`,left:`50%`,transform:`translate(-50%, -50%)`,width:`90%`,maxWidth:`900px`,bgcolor:`background.paper`,border:`2px solid #000`,boxShadow:24,p:4,display:`flex`,flexDirection:`column`,maxHeight:`90vh`},pw=[``,``,``,``,`AI`,``],mw=e=>{let t=e.match(/```json\s*([\s\S]*?)\s*```/);if(t&&t[1])return JSON.parse(t[1]);let n=e.indexOf(`[`),r=e.indexOf(`{`),i=-1;if(n!==-1&&(r===-1||n<r)?i=n:r!==-1&&(i=r),i===-1)throw Error(`AIJSON`);let a=e.lastIndexOf(`]`),o=e.lastIndexOf(`}`),s=Math.max(a,o);if(s===-1)throw Error(`AIJSON`);let c=e.substring(i,s+1);return JSON.parse(c)};function hw({open:e,onClose:n,isInitialSetup:i}){let a=Ie(),{library:o}=oe(e=>e.knowledge),[c,l]=(0,H.useState)(0),[d,p]=(0,H.useState)(!1),[_,v]=(0,H.useState)(``),[y,b]=(0,H.useState)({industry:``,activities:[],customerFlow:``,notes:``}),[S,C]=(0,H.useState)([]),[w,T]=(0,H.useState)([]),[E,D]=(0,H.useState)(null),[k,A]=(0,H.useState)(``),j=async()=>{p(!0);try{c===0?(v(`AI...`),await F(),l(1)):c===1?(v(`AI...`),await R(),l(2)):c===3?await re():c===5?ae():l(e=>e+1)}catch(e){console.error(`Step transition failed:`,e)}finally{p(!1),v(``)}},N=()=>l(e=>e-1),P=()=>{l(0),b({industry:``,activities:[],customerFlow:``,notes:``}),C([]),T([]),D(null),n()},F=async()=>{let e=new O;if(!e.isAvailable)throw alert(`Gemini APIID`),Error(`API not available`);let t=`${y.industry}10`,n=(await e.generateContent(t)).split(`,`).map(e=>e.trim()).filter(Boolean);C(n)},R=async()=>{if(y.activities.length===0){b(e=>({...e,customerFlow:``}));return}let e=new O;if(!e.isAvailable)throw alert(`Gemini APIID`),Error(`API not available`);let t=`${y.industry}${y.activities.join(``)}`,n=await e.generateContent(t);b(e=>({...e,customerFlow:n}))},te=e=>{b(t=>({...t,activities:t.activities.includes(e)?t.activities.filter(t=>t!==e):[...t.activities,e]}))},ne=e=>{if(e.key===`Enter`&&k.trim()!==``){let t=k.trim();y.activities.includes(t)||b(e=>({...e,activities:[...e.activities,t]})),S.includes(t)||C(e=>[...e,t]),A(``),e.preventDefault()}},re=async()=>{console.log(`--- handleFinalGenerateAndMerge function CALLED ---`),l(4);let e=new O;if(!e.isAvailable){alert(`Gemini APIID`),l(3);return}try{v(`1/3: AI...`);let t=`
# 
${y.customerFlow}
# 
- JSON["1", "2", ...] 
- `,n=await e.generateContent(t),r=mw(n);if(!Array.isArray(r))throw Error(`AI`);let a=[];for(let t=0;t<r.length;t++){let n=r[t];v(`2/${r.length}: ${n}...`);let i=`
# 
- : ${y.industry}
- : ${y.customerFlow}
# 
${n}
 type  'branch' 
# JSON
- JSON
-  text(), details(), type('task' or 'branch') 
- **type 'branch'  options  { "id": "opt-...", "label": "" } 23**
- : [{"id": "k-auto-001", "text": "...", "details": "...", "type": "task", "options": []}, {"id": "k-auto-002", "text": "", "details": "...", "type": "branch", "options": [{"id": "opt-001", "label": "A"}, {"id": "opt-002", "label": "B"}] }]
- JSON`,o=await e.generateContent(i),s=mw(o);Array.isArray(s)&&a.push({id:`phase-auto-${ee()}`,name:n,knowledges:s.map(e=>({...e,id:`k-auto-${ee()}`,options:e.options||[]})),subPhases:[]})}if(i){let e=a,t=ie([],e);D(t),T(e),l(5);return}v(`3/3: AI...`);let s=`
# 
- 
- IDID
- JSON
# 
${JSON.stringify(o,null,2)}
# 
${JSON.stringify(a,null,2)}
# 
- JSON`,c=await e.generateContent(s),u=mw(c),d=ie(o,u);if(d.newPhases.length===0&&d.updatedPhases.length===0){alert(`AI`),l(3);return}D(d),T(u),l(5)}catch(e){console.error(`AI generation/merge failed:`,e),alert(`: ${e.message}`),l(3)}},ie=(e,t)=>{let n={newPhases:[],updatedPhases:[]},r=new Map(e.map(e=>[e.name,e]));return t.forEach(e=>{let t=r.get(e.name),i=(e.knowledges?.length||0)+(e.subPhases?.flatMap(e=>e.knowledges||[]).length||0);if(i!==0)if(!t)n.newPhases.push({name:e.name,added:i});else{let r=(t.knowledges?.length||0)+(t.subPhases?.flatMap(e=>e.knowledges||[]).length||0);i>r&&n.updatedPhases.push({name:e.name,added:i-r})}}),n},ae=()=>{a(ze(w)),P()};return(0,U.jsx)(m,{open:e,onClose:n,children:(0,U.jsxs)(B,{sx:fw,children:[(0,U.jsxs)(s,{variant:`h5`,component:`h2`,gutterBottom:!0,children:[` `,i?`()`:`()`]}),(0,U.jsx)(Vt,{activeStep:c,sx:{mb:3},children:pw.map(e=>(0,U.jsx)(pt,{children:(0,U.jsx)(jt,{children:e})},e))}),(0,U.jsx)(B,{sx:{flexGrow:1,overflow:`auto`,p:2,mb:2,minHeight:`30vh`},children:d&&c<4?(0,U.jsxs)(B,{sx:{display:`flex`,justifyContent:`center`,alignItems:`center`,height:`100%`},children:[(0,U.jsx)(ve,{sx:{mr:2}}),` `,(0,U.jsx)(s,{children:_})]}):(e=>{switch(e){case 0:return(0,U.jsx)(x,{autoFocus:!0,label:``,fullWidth:!0,value:y.industry,onChange:e=>b({...y,industry:e.target.value}),placeholder:`: `});case 1:return(0,U.jsxs)(B,{children:[(0,U.jsx)(s,{gutterBottom:!0,children:`AI`}),(0,U.jsx)(h,{variant:`outlined`,sx:{p:1,mb:2,minHeight:`100px`},children:S.map(e=>(0,U.jsx)(u,{label:e,onClick:()=>te(e),color:y.activities.includes(e)?`primary`:`default`,sx:{m:.5}},e))}),(0,U.jsx)(x,{label:``,fullWidth:!0,value:k,onChange:e=>A(e.target.value),onKeyDown:ne,placeholder:`Enter`})]});case 2:return(0,U.jsxs)(B,{children:[(0,U.jsxs)(s,{gutterBottom:!0,children:[`AI`,(0,U.jsx)(`br`,{}),`****`]}),(0,U.jsx)(x,{label:``,fullWidth:!0,multiline:!0,rows:8,value:y.customerFlow,onChange:e=>b({...y,customerFlow:e.target.value})})]});case 3:return(0,U.jsx)(x,{label:``,fullWidth:!0,multiline:!0,rows:4,value:y.notes,onChange:e=>b({...y,notes:e.target.value}),placeholder:``});case 4:return(0,U.jsxs)(B,{sx:{display:`flex`,flexDirection:`column`,alignItems:`center`,p:4},children:[(0,U.jsx)(ve,{sx:{mb:2}}),(0,U.jsx)(s,{children:_})]});case 5:return(0,U.jsxs)(B,{children:[(0,U.jsx)(r,{severity:`success`,sx:{mb:2},children:`AI`}),(0,U.jsx)(h,{variant:`outlined`,sx:{p:2,overflow:`auto`,maxHeight:`40vh`},children:E&&(0,U.jsxs)(g,{dense:!0,children:[E.newPhases.map(e=>(0,U.jsxs)(I,{children:[(0,U.jsx)(t,{children:(0,U.jsx)(cp,{color:`success`})}),(0,U.jsx)(L,{primary:`${e.name}`,secondary:`${e.added}`})]},e.name)),E.updatedPhases.map(e=>(0,U.jsxs)(I,{children:[(0,U.jsx)(t,{children:(0,U.jsx)(M,{color:`info`})}),(0,U.jsx)(L,{primary:`${e.name}${e.added}`})]},e.name)),E.newPhases.length===0&&E.updatedPhases.length===0&&(0,U.jsx)(I,{children:(0,U.jsx)(L,{primary:``})})]})})]});default:return(0,U.jsx)(s,{children:``})}})(c)}),(0,U.jsxs)(B,{sx:{display:`flex`,flexDirection:`row`,pt:2},children:[(0,U.jsx)(f,{color:`inherit`,disabled:c===0||d,onClick:N,sx:{mr:1},children:``}),(0,U.jsx)(B,{sx:{flex:`1 1 auto`}}),(0,U.jsx)(f,{onClick:n,sx:{mr:1},children:``}),(0,U.jsx)(f,{onClick:j,disabled:d||c===0&&!y.industry||c===1&&y.activities.length===0,children:c===pw.length-1?``:``})]})]})})}var gw=hw;function _w({onStart:e}){return(0,U.jsxs)(h,{sx:{height:`100%`,display:`flex`,flexDirection:`column`,alignItems:`center`,justifyContent:`center`,p:4,gap:2,width:`100%`},children:[(0,U.jsx)(a,{sx:{fontSize:60,color:`text.secondary`}}),(0,U.jsx)(s,{variant:`h5`,component:`h2`,gutterBottom:!0,children:`AI`}),(0,U.jsx)(s,{color:`text.secondary`,align:`center`,sx:{maxWidth:`600px`,mb:2},children:`AI `}),(0,U.jsx)(f,{variant:`contained`,size:`large`,onClick:e,children:``})]})}function vw({open:t,onClose:n,phases:r,onSelect:i}){return(0,U.jsxs)(A,{open:t,onClose:n,children:[(0,U.jsx)(k,{children:``}),(0,U.jsxs)(N,{children:[(0,U.jsx)(s,{gutterBottom:!0,children:``}),(0,U.jsx)(g,{children:r.map(t=>(0,U.jsx)(e,{onClick:()=>i(t.id),children:(0,U.jsx)(L,{primary:t.name})},t.id))})]}),(0,U.jsx)(F,{children:(0,U.jsx)(f,{onClick:n,children:``})})]})}function yw(){let e=Ie(),[t,n]=(0,H.useState)(!1),[r,i]=(0,H.useState)(!1),[o,s]=(0,H.useState)(`knowledge`),{library:c}=oe(e=>e.knowledge),[l,u]=(0,H.useState)([]),[d,p]=(0,H.useState)([]),[m,h]=(0,H.useState)([]),[g,_]=(0,H.useState)(!1),[v,y]=(0,H.useState)(!1),[b,C]=(0,H.useState)(!1),[w,T]=(0,H.useState)(``),[E,D]=(0,H.useState)(!1),[j,M]=(0,H.useState)(null),P=j!==null,I=c&&c.length>0;(0,H.useEffect)(()=>{if(j&&l.length===0){let e=c.find(e=>e.id===j)?.name||``;u([{sender:`ai`,text:`${e}`}]),p([]),h([]),_(!0),y(!1)}},[j,l.length,c]);let L=(0,H.useCallback)(e=>{for(let t of c){let n=(t.knowledges||[]).find(t=>t.id===e);if(n)return{knowledge:n,phaseId:t.id,phaseName:t.name};for(let n of t.subPhases||[]){let r=(n.knowledges||[]).find(t=>t.id===e);if(r)return{knowledge:r,phaseId:t.id,phaseName:t.name}}}return null},[c]),R=e=>{let t=c.find(e=>e.id===j);return`

#  ()
${JSON.stringify(c,null,2)}

#  ()
1.  ****: (knowledgeId)
2.  ****:
    a.  ID
    b.  ${t?.name}(ID: ${t?.id}) 
    c.  
    d.   ** [WARNING] ** 
3.  ****: JSONADD, DELETE, UPDATE
4.  ****:  [WARNING] 

# 
- ****: ${t?.name}
- ****: ** [WARNING] **

# 
- 
- Y position  (: y: y + 80)
- X

# 
- : ${JSON.stringify(d,null,2)}
- : ${JSON.stringify(m,null,2)}
- : "${e}"

# JSON ()
[
  {
    "action": "ADD" | "DELETE" | "UPDATE",
    "newNode": { "knowledgeId": "k-001", "position": { "x": 250, "y": 50 } },
    "newEdge": { "source": "k-001", "target": "k-002" },
    "deleteNodeId": "k-007",
    "updateEdge": { "source": "k-006", "target": "k-008" },
    "aiResponse": {
      "text": "",
      "options": [ { "label": "", "value": "choice_value" } ]
    }
  }
]
`},ee=async e=>{let t={sender:`user`,text:e};u(e=>[...e,t]),_(!1),y(!0);try{let t=new O;if(!t.isAvailable)throw Error(`Gemini APIID`);let n=R(e),r=(await t.generateContent(n)).replace(/```json/g,``).replace(/```/g,``).trim(),i=JSON.parse(r),a=null;i.forEach(e=>{let{action:t,newNode:n,newEdge:r,deleteNodeId:i,updateEdge:o,aiResponse:s}=e;if(t===`DELETE`&&i&&(p(e=>e.filter(e=>e.id!==i)),h(e=>e.filter(e=>e.source!==i&&e.target!==i))),t===`UPDATE`&&o&&h(e=>e.map(e=>e.source===o.source||e.target===o.target?{...e,target:o.target}:e)),t===`ADD`){if(n&&n.knowledgeId){let e=L(n.knowledgeId);e&&p(t=>[...t,{id:e.knowledge.id,position:n.position,data:{label:e.knowledge.text}}])}r&&r.source&&r.target&&h(e=>[...e,{id:`e-${r.source}-${r.target}-${He()}`,source:r.source,target:r.target,animated:!0}])}s&&(a={sender:`ai`,...s})}),a&&u(e=>[...e,a])}catch(e){console.error(`AI response handling failed:`,e);let t={sender:`ai`,text:`: ${e.message}`};u(e=>[...e,t])}finally{_(!0),y(!1)}},ne=()=>{if(!w.trim()){alert(``);return}let t=d.map(e=>{let t=L(e.id),n=t?t.knowledge:null;return{id:He(),text:n?.text||``,details:n?.details||``,refId:n?.id,type:n?.type||`task`,options:n?.options||[],completed:!1,memo:``}}),n={id:`flow-${He()}`,name:w,description:`AI`,tasks:t};e(te(n)),alert(`${w}`),C(!1),T(``)},re=(e,t)=>{t!==null&&s(t)},ie=()=>{D(!0)},ae=e=>{M(e),u([]),p([]),h([]),D(!1)};return(0,U.jsxs)(B,{sx:{display:`flex`,flexDirection:`column`,height:`100vh`,bgcolor:`background.default`},children:[(0,U.jsx)(B,{sx:{p:`0 24px`},children:(0,U.jsx)(S,{isLocked:!1})}),(0,U.jsx)(B,{sx:{display:`flex`,justifyContent:`center`,p:`0 24px 16px`},children:(0,U.jsxs)($t,{value:o,exclusive:!0,onChange:re,"aria-label":`designer mode`,children:[(0,U.jsxs)(Yt,{value:`knowledge`,"aria-label":`knowledge editing mode`,children:[(0,U.jsx)(ap,{sx:{mr:1}}),``]}),(0,U.jsxs)(Yt,{value:`flow-management`,"aria-label":`flow management mode`,children:[(0,U.jsx)(op,{sx:{mr:1}}),``]}),(0,U.jsxs)(Yt,{value:`rule-editing`,"aria-label":`rule editing mode`,children:[(0,U.jsx)(sp,{sx:{mr:1}}),``]})]})}),o===`knowledge`&&(0,U.jsx)(U.Fragment,{children:I?(0,U.jsx)(Zr,{backend:ip,children:(0,U.jsxs)(B,{sx:{flexGrow:1,p:`0 24px 24px 24px`,display:`flex`,gap:2,minHeight:0},children:[(0,U.jsx)(B,{sx:{flex:`0 1 320px`,minWidth:280},children:(0,U.jsx)(Gi,{})}),(0,U.jsx)(B,{sx:{flex:`1 1 40%`,minWidth:300},children:(0,U.jsx)(Yi,{onOpenAiModal:()=>n(!0)})}),(0,U.jsx)(B,{sx:{flex:`1 1 60%`,minWidth:400},children:(0,U.jsx)(Qi,{})})]})}):(0,U.jsx)(B,{sx:{flexGrow:1,p:`0 24px 24px 24px`,display:`flex`},children:(0,U.jsx)(_w,{onStart:()=>i(!0)})})}),o===`flow-management`&&(0,U.jsx)(Zr,{backend:ip,children:(0,U.jsxs)(B,{sx:{flexGrow:1,p:`0 24px 24px 24px`,display:`flex`,gap:2,minHeight:0},children:[(0,U.jsx)(B,{sx:{flex:`0 1 400px`,minWidth:320},children:(0,U.jsx)(xp,{onStartAiDesign:ie})}),(0,U.jsx)(B,{sx:{flex:`1 1 60%`,minWidth:500},children:(0,U.jsx)(dw,{isActive:P,chatHistory:l,nodes:d,edges:m,onSendMessage:ee,isWaitingForUserInput:g,isWaitingForAiResponse:v,onSave:()=>C(!0)})})]})}),o===`rule-editing`&&(0,U.jsx)(B,{sx:{flexGrow:1,p:`0 24px 24px 24px`,minHeight:0},children:(0,U.jsx)(fp,{})}),I&&o===`knowledge`&&(0,U.jsx)(st,{color:`primary`,"aria-label":`ai-assistant`,sx:{position:`absolute`,bottom:40,right:40},onClick:()=>i(!0),children:(0,U.jsx)(a,{})}),(0,U.jsx)(Af,{open:t,onClose:()=>n(!1)}),(0,U.jsxs)(A,{open:b,onClose:()=>C(!1),children:[(0,U.jsx)(k,{children:``}),(0,U.jsx)(N,{children:(0,U.jsx)(x,{autoFocus:!0,margin:`dense`,label:``,type:`text`,fullWidth:!0,variant:`standard`,value:w,onChange:e=>T(e.target.value)})}),(0,U.jsxs)(F,{children:[(0,U.jsx)(f,{onClick:()=>C(!1),children:``}),(0,U.jsx)(f,{onClick:ne,children:``})]})]}),(0,U.jsx)(vw,{open:E,onClose:()=>D(!1),phases:c.filter(e=>e&&e.subPhases&&e.subPhases.length>0||e&&e.knowledges&&e.knowledges.length>0),onSelect:ae}),(0,U.jsx)(gw,{open:r,onClose:()=>i(!1),isInitialSetup:!I})]})}var bw=yw;export{bw as default};